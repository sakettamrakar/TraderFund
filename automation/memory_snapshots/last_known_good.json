{
  "AUDIT_REPORT.md": "# Memory Quality Audit Report\n\n**Generated**: 2026-02-11 00:07:08\n**Script**: `scripts/memory_audit.py`\n**Status**: READ-ONLY ANALYSIS \u2014 no files were modified\n\n---\n\n## Required Files\n\n- \u2705 **PASS**: `docs\\memory\\index.md` exists\n- \u2705 **PASS**: `docs\\memory\\QUALITY.md` exists\n- \u2705 **PASS**: `docs\\memory\\DECISION_PROTOCOL.md` exists\n## Authority Invariant\n\n- \u2705 **PASS**: `vision` is defined in docs\\memory\\00_vision\\vision.md\n- \u26a0\ufe0f **WARN**: `scope` headings found in 2 files: docs\\memory\\01_scope\\boundaries.md, docs\\memory\\12_orchestration\\shadow_mode.md. Verify only one is authoritative.\n- \u2705 **PASS**: `decisions` is defined in docs\\memory\\decisions\\README.md\n## Explicit Non-Goals\n\n- \u2705 **PASS**: Explicit exclusion language found in boundaries.md\n## Decision Traceability\n\n- \u2705 **PASS**: 16 ADR(s) found: ADR-0001.md, ADR-0002.md, ADR-0003.md, ADR-0004.md, ADR-0005.md, ADR-0006.md, ADR-0007.md, ADR-0008.md, ADR-0009.md, ADR-0010.md, ADR-0011.md, ADR-0012.md, ADR-0013.md, ADR-0014.md, ADR-0015.md, ADR-0016.md\n## Intent vs Implementation\n\n- \u2705 **PASS**: No large code blocks found in memory files\n## Update Locality\n\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\00_vision\\vision.md` and `docs\\memory\\03_domain\\domain_model.md`: cognitive, hierarchy, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\00_vision\\vision.md` and `docs\\memory\\04_architecture\\macro.md`: cognitive, core, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\01_scope\\boundaries.md` and `docs\\memory\\02_success\\success_criteria.md`: criteria, exit, intelligence, mode, portfolio\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\01_scope\\boundaries.md` and `docs\\memory\\06_data\\data_contracts.md`: portfolio, profile, three\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\01_scope\\boundaries.md` and `docs\\memory\\07_execution\\runtime.md`: criteria, intelligence, mode, shadow\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\01_scope\\boundaries.md` and `docs\\memory\\08_reliability\\failure_model.md`: mode, shadow, validation\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\01_scope\\boundaries.md` and `docs\\memory\\11_deployment\\evolution.md`: criteria, exit, intelligence, research, three\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\01_scope\\boundaries.md` and `docs\\memory\\12_orchestration\\shadow_mode.md`: criteria, mode, scope, shadow\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\01_scope\\boundaries.md` and `docs\\memory\\decisions\\ADR-0004.md`: mode, shadow, validation\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\02_success\\success_criteria.md` and `docs\\memory\\03_domain\\domain_model.md`: discovery, intelligence, opportunity, portfolio, regime\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\02_success\\success_criteria.md` and `docs\\memory\\04_architecture\\macro.md`: dashboard, discovery, intelligence, layer, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\02_success\\success_criteria.md` and `docs\\memory\\05_components\\component_validation_report.md`: criteria, observability, success\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\02_success\\success_criteria.md` and `docs\\memory\\06_data\\data_contracts.md`: dashboard, portfolio, regime\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\02_success\\success_criteria.md` and `docs\\memory\\07_execution\\runtime.md`: criteria, dashboard, intelligence, mode, shadow\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\02_success\\success_criteria.md` and `docs\\memory\\08_reliability\\failure_model.md`: dashboard, layer, mode, regime, shadow\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\02_success\\success_criteria.md` and `docs\\memory\\10_observability\\metrics.md`: criteria, dashboard, observability, regime, signal\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\02_success\\success_criteria.md` and `docs\\memory\\11_deployment\\evolution.md`: criteria, exit, intelligence, layer\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\02_success\\success_criteria.md` and `docs\\memory\\12_orchestration\\execution_phases.md`: dashboard, discovery, portfolio, regime\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\02_success\\success_criteria.md` and `docs\\memory\\12_orchestration\\shadow_mode.md`: criteria, mode, shadow\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\04_architecture\\macro.md`: cognitive, constraints, convergence, discovery, intelligence\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\constraint_engine.yaml`: constraints, execution, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\convergence_engine.yaml`: convergence, level, scoring\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\factor_engine.yaml`: analysis, factor, level, reward\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\factor_lens.yaml`: discovery, factor, level, opportunity, parallel\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\fundamental_lens.yaml`: discovery, level, opportunity, parallel\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\meta_engine.yaml`: analysis, filter, level, meta, trust\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\narrative_engine.yaml`: change, explanation, level, narrative\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\narrative_lens.yaml`: discovery, level, narrative, opportunity, parallel\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\portfolio_intelligence.yaml`: intelligence, level, portfolio\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\regime_engine.yaml`: level, reality, regime\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\strategy_lens.yaml`: discovery, level, opportunity, parallel, strategy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\strategy_selector.yaml`: level, playbook, selection, strategy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\05_components\\technical_lens.yaml`: discovery, level, opportunity, parallel\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\06_data\\data_contracts.md`: cognitive, factor, portfolio, regime, strategy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\08_reliability\\failure_model.md`: analysis, convergence, execution, factor, meta\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\09_security\\trust.md`: execution, hierarchy, strategy, trust\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\10_observability\\metrics.md`: constraints, execution, narrative, regime, strategy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\12_orchestration\\execution_phases.md`: constraints, convergence, discovery, execution, factor\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\03_domain\\domain_model.md` and `docs\\memory\\ledger.md`: constraints, hierarchy, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\data_flow.md` and `docs\\memory\\04_architecture\\macro.md`: architecture, cognitive, conflicts, ingestion, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\data_flow.md` and `docs\\memory\\05_components\\component_validation_report.md`: conflicts, questions, resolved\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\data_flow.md` and `docs\\memory\\06_data\\data_contracts.md`: canonical, cognitive, daily, final, india\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\data_flow.md` and `docs\\memory\\07_execution\\runtime.md`: canonical, india, ingestion, lifecycle, pipeline\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\data_flow.md` and `docs\\memory\\08_reliability\\failure_model.md`: india, ingestion, state\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\data_flow.md` and `docs\\memory\\10_observability\\metrics.md`: architecture, ingestion, pipeline, state\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\data_flow.md` and `docs\\memory\\11_deployment\\evolution.md`: canonical, ingestion, process, research, state\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\component_validation_report.md`: component, conflicts, mapping, questions, resolved\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\constraint_engine.yaml`: component, constraints, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\convergence_engine.yaml`: component, convergence, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\dashboard.yaml`: component, dashboard, layer, level, observation\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\factor_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\factor_lens.yaml`: component, discovery, level, opportunity, parallel\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\fundamental_lens.yaml`: component, discovery, level, opportunity, parallel\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\governance.yaml`: component, governance, layer, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\ingestion_events.yaml`: component, foundation, ingestion, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\ingestion_india.yaml`: component, foundation, ingestion, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\ingestion_us.yaml`: component, foundation, ingestion, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\meta_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\momentum_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\narrative_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\narrative_lens.yaml`: component, discovery, level, opportunity, parallel\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\portfolio_intelligence.yaml`: component, intelligence, level, portfolio\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\regime_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\strategy_lens.yaml`: component, discovery, level, opportunity, parallel\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\05_components\\technical_lens.yaml`: component, discovery, level, opportunity, parallel\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\06_data\\data_contracts.md`: cognitive, dashboard, ingestion, legacy, macro\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\07_execution\\runtime.md`: dashboard, global, ingestion, intelligence, legacy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\08_reliability\\failure_model.md`: component, convergence, dashboard, engine, governance\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\09_security\\trust.md`: core, governance, layer, legacy, mapping\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\10_observability\\metrics.md`: architecture, constraints, core, dashboard, definitions\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\11_deployment\\evolution.md`: engine, foundation, global, governance, ingestion\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\12_orchestration\\execution_phases.md`: constraints, convergence, dashboard, discovery, ingestion\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\04_architecture\\macro.md` and `docs\\memory\\governance.md`: constraints, core, governance\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\component_validation_report.md` and `docs\\memory\\08_reliability\\failure_model.md`: component, mapping, summary, validation\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\component_validation_report.md` and `docs\\memory\\10_observability\\metrics.md`: criteria, integrity, mapping, observability, success\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\component_validation_report.md` and `docs\\memory\\11_deployment\\evolution.md`: criteria, mandatory, mapping, summary\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\constraint_engine.yaml` and `docs\\memory\\05_components\\convergence_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\constraint_engine.yaml` and `docs\\memory\\05_components\\factor_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\constraint_engine.yaml` and `docs\\memory\\05_components\\meta_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\constraint_engine.yaml` and `docs\\memory\\05_components\\momentum_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\constraint_engine.yaml` and `docs\\memory\\05_components\\narrative_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\constraint_engine.yaml` and `docs\\memory\\05_components\\regime_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\constraint_engine.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, engine, execution\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\convergence_engine.yaml` and `docs\\memory\\05_components\\factor_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\convergence_engine.yaml` and `docs\\memory\\05_components\\meta_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\convergence_engine.yaml` and `docs\\memory\\05_components\\momentum_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\convergence_engine.yaml` and `docs\\memory\\05_components\\narrative_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\convergence_engine.yaml` and `docs\\memory\\05_components\\regime_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\convergence_engine.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, convergence, engine\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\dashboard.yaml` and `docs\\memory\\05_components\\governance.yaml`: component, cross, cutting, layer, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\dashboard.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, dashboard, layer\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\dashboard.yaml` and `docs\\memory\\12_orchestration\\execution_phases.md`: cross, cutting, dashboard\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_engine.yaml` and `docs\\memory\\05_components\\factor_lens.yaml`: component, factor, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_engine.yaml` and `docs\\memory\\05_components\\meta_engine.yaml`: analysis, component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_engine.yaml` and `docs\\memory\\05_components\\momentum_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_engine.yaml` and `docs\\memory\\05_components\\narrative_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_engine.yaml` and `docs\\memory\\05_components\\regime_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_engine.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: analysis, component, engine, factor\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_lens.yaml` and `docs\\memory\\05_components\\fundamental_lens.yaml`: component, discovery, lens, level, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_lens.yaml` and `docs\\memory\\05_components\\narrative_lens.yaml`: component, discovery, lens, level, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_lens.yaml` and `docs\\memory\\05_components\\strategy_lens.yaml`: component, discovery, lens, level, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_lens.yaml` and `docs\\memory\\05_components\\technical_lens.yaml`: component, discovery, lens, level, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\factor_lens.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, factor, lens\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\fundamental_lens.yaml` and `docs\\memory\\05_components\\narrative_lens.yaml`: component, discovery, lens, level, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\fundamental_lens.yaml` and `docs\\memory\\05_components\\strategy_lens.yaml`: component, discovery, lens, level, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\fundamental_lens.yaml` and `docs\\memory\\05_components\\technical_lens.yaml`: component, discovery, lens, level, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\fundamental_lens.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, fundamental, lens\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\governance.yaml` and `docs\\memory\\05_components\\meta_engine.yaml`: component, level, meta\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\governance.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, governance, layer, meta\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\governance.yaml` and `docs\\memory\\12_orchestration\\execution_phases.md`: cross, cutting, meta\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\ingestion_events.yaml` and `docs\\memory\\05_components\\ingestion_india.yaml`: component, foundation, ingestion, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\ingestion_events.yaml` and `docs\\memory\\05_components\\ingestion_us.yaml`: component, foundation, ingestion, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\ingestion_events.yaml` and `docs\\memory\\06_data\\data_contracts.md`: event, ingestion, pipeline\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\ingestion_india.yaml` and `docs\\memory\\05_components\\ingestion_us.yaml`: component, foundation, ingestion, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\ingestion_india.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, india, ingestion\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\meta_engine.yaml` and `docs\\memory\\05_components\\momentum_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\meta_engine.yaml` and `docs\\memory\\05_components\\narrative_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\meta_engine.yaml` and `docs\\memory\\05_components\\regime_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\meta_engine.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: analysis, component, engine, meta\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\momentum_engine.yaml` and `docs\\memory\\05_components\\narrative_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\momentum_engine.yaml` and `docs\\memory\\05_components\\regime_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\narrative_engine.yaml` and `docs\\memory\\05_components\\narrative_lens.yaml`: component, level, narrative\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\narrative_engine.yaml` and `docs\\memory\\05_components\\regime_engine.yaml`: component, engine, level\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\narrative_engine.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, engine, narrative\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\narrative_lens.yaml` and `docs\\memory\\05_components\\strategy_lens.yaml`: component, discovery, lens, level, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\narrative_lens.yaml` and `docs\\memory\\05_components\\technical_lens.yaml`: component, discovery, lens, level, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\narrative_lens.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, lens, narrative\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\regime_engine.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, engine, regime\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\strategy_lens.yaml` and `docs\\memory\\05_components\\strategy_selector.yaml`: component, level, strategy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\strategy_lens.yaml` and `docs\\memory\\05_components\\technical_lens.yaml`: component, discovery, lens, level, opportunity\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\strategy_lens.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, lens, strategy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\05_components\\strategy_selector.yaml` and `docs\\memory\\08_reliability\\failure_model.md`: component, selector, strategy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\06_data\\data_contracts.md` and `docs\\memory\\07_execution\\runtime.md`: canonical, contract, cross, dashboard, evaluation\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\06_data\\data_contracts.md` and `docs\\memory\\08_reliability\\failure_model.md`: alpha, dashboard, factor, india, ingestion\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\06_data\\data_contracts.md` and `docs\\memory\\09_security\\trust.md`: contract, isolation, legacy, mapping, retention\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\06_data\\data_contracts.md` and `docs\\memory\\10_observability\\metrics.md`: binding, dashboard, ingestion, legacy, mapping\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\06_data\\data_contracts.md` and `docs\\memory\\11_deployment\\evolution.md`: canonical, contracts, evaluation, ingestion, layers\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\06_data\\data_contracts.md` and `docs\\memory\\12_orchestration\\execution_phases.md`: cross, dashboard, factor, ingestion, portfolio\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\06_data\\data_contracts.md` and `docs\\memory\\governance.md`: contract, policy, truth\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\06_data\\data_contracts.md` and `docs\\memory\\ledger.md`: immutability, only, policy, registry, retention\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\07_execution\\runtime.md` and `docs\\memory\\08_reliability\\failure_model.md`: active, batch, dashboard, execution, gate\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\07_execution\\runtime.md` and `docs\\memory\\09_security\\trust.md`: contract, execution, handling, legacy, mapping\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\07_execution\\runtime.md` and `docs\\memory\\10_observability\\metrics.md`: criteria, dashboard, execution, harness, ingestion\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\07_execution\\runtime.md` and `docs\\memory\\11_deployment\\evolution.md`: advancement, canonical, criteria, emergency, evaluation\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\07_execution\\runtime.md` and `docs\\memory\\12_orchestration\\execution_phases.md`: cross, dashboard, execution, ingestion\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\07_execution\\runtime.md` and `docs\\memory\\12_orchestration\\shadow_mode.md`: criteria, global, mode, shadow\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\07_execution\\runtime.md` and `docs\\memory\\DECISION_PROTOCOL.md`: escalation, override, protocol\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\07_execution\\runtime.md` and `docs\\memory\\governance.md`: advancement, automation, contract, escalation, principles\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\07_execution\\runtime.md` and `docs\\memory\\ledger.md`: automation, limits, only, truth\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\08_reliability\\failure_model.md` and `docs\\memory\\09_security\\trust.md`: execution, governance, handling, layer, legacy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\08_reliability\\failure_model.md` and `docs\\memory\\10_observability\\metrics.md`: dashboard, execution, governance, harness, ingestion\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\08_reliability\\failure_model.md` and `docs\\memory\\11_deployment\\evolution.md`: drift, engine, epistemic, gate, governance\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\08_reliability\\failure_model.md` and `docs\\memory\\12_orchestration\\execution_phases.md`: convergence, dashboard, execution, factor, ingestion\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\08_reliability\\failure_model.md` and `docs\\memory\\decisions\\ADR-0004.md`: decision, mode, shadow, validation\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\08_reliability\\failure_model.md` and `docs\\memory\\ledger.md`: epistemic, policy, registry, temporal\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\08_reliability\\failure_model.md` and `docs\\memory\\QUALITY.md`: decision, detection, drift\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\09_security\\trust.md` and `docs\\memory\\10_observability\\metrics.md`: core, execution, forbidden, governance, legacy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\09_security\\trust.md` and `docs\\memory\\11_deployment\\evolution.md`: authority, forbidden, governance, layer, legacy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\09_security\\trust.md` and `docs\\memory\\decisions\\ADR-0011.md`: governance, human, multi\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\09_security\\trust.md` and `docs\\memory\\governance.md`: chat, contract, core, credential, forbidden\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\09_security\\trust.md` and `docs\\memory\\ledger.md`: authority, hierarchy, retention\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\09_security\\trust.md` and `docs\\memory\\QUALITY.md`: authority, contract, safety, separation\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\10_observability\\metrics.md` and `docs\\memory\\11_deployment\\evolution.md`: criteria, forbidden, governance, ingestion, legacy\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\10_observability\\metrics.md` and `docs\\memory\\12_orchestration\\execution_phases.md`: constraints, dashboard, execution, ingestion, narrative\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\10_observability\\metrics.md` and `docs\\memory\\governance.md`: constraints, core, forbidden, governance\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\11_deployment\\evolution.md` and `docs\\memory\\12_orchestration\\shadow_mode.md`: criteria, gates, global, promotion\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\11_deployment\\evolution.md` and `docs\\memory\\DECISION_PROTOCOL.md`: override, protocol, structural\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\11_deployment\\evolution.md` and `docs\\memory\\decisions\\ADR-0005.md`: epistemic, freeze, protocol\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\11_deployment\\evolution.md` and `docs\\memory\\governance.md`: actions, advancement, forbidden, governance, module\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\11_deployment\\evolution.md` and `docs\\memory\\ledger.md`: authority, epistemic, truth\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0002.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0003.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0004.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0005.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0006.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0007.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0008.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0009.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0010.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0011.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0012.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0013.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0014.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0015.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0001.md` and `docs\\memory\\decisions\\ADR-0016.md`: consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0003.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0004.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0005.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0006.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0007.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0008.md`: alternatives, consequences, decision, evidence, execution\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0009.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0010.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0011.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0012.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0002.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0004.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0005.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0006.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0007.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0008.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0009.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0010.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0011.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0012.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, first\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0003.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0005.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0006.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0007.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0008.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0009.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0010.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0011.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0012.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0004.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0006.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0007.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0008.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0009.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0010.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0011.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0012.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0005.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0006.md` and `docs\\memory\\decisions\\ADR-0007.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0006.md` and `docs\\memory\\decisions\\ADR-0008.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0006.md` and `docs\\memory\\decisions\\ADR-0009.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0006.md` and `docs\\memory\\decisions\\ADR-0010.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0006.md` and `docs\\memory\\decisions\\ADR-0011.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0006.md` and `docs\\memory\\decisions\\ADR-0012.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0006.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0006.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0006.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0006.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0007.md` and `docs\\memory\\decisions\\ADR-0008.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0007.md` and `docs\\memory\\decisions\\ADR-0009.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0007.md` and `docs\\memory\\decisions\\ADR-0010.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0007.md` and `docs\\memory\\decisions\\ADR-0011.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0007.md` and `docs\\memory\\decisions\\ADR-0012.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0007.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0007.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0007.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0007.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0008.md` and `docs\\memory\\decisions\\ADR-0009.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0008.md` and `docs\\memory\\decisions\\ADR-0010.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0008.md` and `docs\\memory\\decisions\\ADR-0011.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0008.md` and `docs\\memory\\decisions\\ADR-0012.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0008.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0008.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0008.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0008.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0009.md` and `docs\\memory\\decisions\\ADR-0010.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0009.md` and `docs\\memory\\decisions\\ADR-0011.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0009.md` and `docs\\memory\\decisions\\ADR-0012.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0009.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0009.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0009.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0009.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0010.md` and `docs\\memory\\decisions\\ADR-0011.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0010.md` and `docs\\memory\\decisions\\ADR-0012.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0010.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0010.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0010.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0010.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0011.md` and `docs\\memory\\decisions\\ADR-0012.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0011.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0011.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0011.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0011.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0012.md` and `docs\\memory\\decisions\\ADR-0013.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0012.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0012.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0012.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0013.md` and `docs\\memory\\decisions\\ADR-0014.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0013.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0013.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0014.md` and `docs\\memory\\decisions\\ADR-0015.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0014.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\decisions\\ADR-0015.md` and `docs\\memory\\decisions\\ADR-0016.md`: alternatives, consequences, decision, evidence, rationale\n- \u26a0\ufe0f **WARN**: Heading overlap between `docs\\memory\\governance.md` and `docs\\memory\\ledger.md`: automation, conflict, constraints, policy, resolution\n## Machine Parsability\n\n- \u2705 **PASS**: All markdown memory files contain structured headings\n## Drift Detection\n\n- \u2705 **PASS**: No [TBD] markers found \u2014 all sections appear populated\n## Regeneration Safety\n\n- \u26a0\ufe0f **WARN**: Directory `12_orchestration/` exists but is not referenced in index.md\n- \u26a0\ufe0f **WARN**: Directory `_appendix/` exists but is not referenced in index.md\n\n---\n\n## Summary\n\n| Status | Count |\n| :--- | :--- |\n| \u2705 PASS | 10 |\n| \u26a0\ufe0f WARN | 294 |\n| \u274c FAIL | 0 |\n",
  "DECISION_PROTOCOL.md": "# Decision Protocol\n\n## Tier 1 \u2014 Reversible\nAI may execute directly.\n\nExamples:\n- code changes\n- UI tweaks\n- prompt tuning\n\n## Tier 2 \u2014 Structural\nAI proposes.\nHuman approves.\n\nExamples:\n- component contracts\n- execution model\n- data flow.\n\n## Tier 3 \u2014 Irreversible\nAI provides advisory brief.\nHuman decides.\n\nExamples:\n- vision\n- scope\n- success criteria\n- core architecture.\n\n## Escalation Format\n\nWhen Tier 3 is touched, AI must return:\n\n- Proposed change\n- Why\n- Pros\n- Cons\n- Alternatives\n- Risk level\n- Impacted memory files\n\n## Human Override\n\nHuman may override any rule.\n\nAfter override:\nmemory + ADR must be updated.\n",
  "governance.md": "# Governance\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> This document aggregates all governance rules, approval flows, escalation paths, and policy constraints.\n> **Human Authority is Supreme.** No automation may override a human decision.\n\n---\n\n## 1. Core Principles\n\n| Principle | Description |\n| :--- | :--- |\n| **Human Supremacy** | Humans are the final authority on all specifications, decisions, and overrides. Algorithms advise; humans decide. |\n| **Progressive Trust** | Trust is zero by default and earned through explicit gates (Observation \u2192 Paper \u2192 Production). |\n| **Fail-Closed** | Ambiguity or error results in denial of action (halt/reject), never default permission. |\n| **Separation of Powers** | Intelligence (Truth) is strictly separated from Execution (Action). |\n| **Explicit Intent** | All state changes must be preceded by a recorded intent (Decision, DID, or Command). |\n\n*(Sources: `docs/epistemic/impact_resolution_contract.md`, `docs/memory/09_security/trust.md`)*\n\n---\n\n## 2. Approval Flows\n\n### 2.1 Truth Advancement (The \"Release\" of Time)\n\nTime in the system does not flow automatically. It advances only when validity is proven.\n\n| Gate | Check | Failure Consequence |\n| :--- | :--- | :--- |\n| **1. Ingestion Gate** | Schema, Range, Continuity, Drift | Reject Data, Halt Time (CTT steady) |\n| **2. Intelligence Gate** | Completeness, Epistemic Health, Policy | Halt Time (TE steady), Alert Operator |\n| **3. Synchronization Gate** | US/India Alignment check | Warn Operator (Allow split operation) |\n| **4. Manual Override** | Human Command + Audit Log | **Force Advancement** (Emergency only) |\n\n*(Source: `docs/governance/truth_advancement_gates.md`)*\n\n### 2.2 Research Module Promotion (The \"Release\" of Code)\n\nResearch code must pass 5 strict gates to become Production code.\n\n| Gate | Requirement | Proof |\n| :--- | :--- | :--- |\n| **1. Phase Compatibility** | Project Phase \u2265 Module Activation Phase | Roadmap Check |\n| **2. Observation** | 30 Trading Days error-free | Logs |\n| **3. Paper Trading** | 100 Trades w/ <5% Slippage Variance | Shadow Run Artifacts |\n| **4. Human Approval** | Explicit Sign-off in `ACTIVATION_LOG.md` | Git Commit |\n| **5. Technical Rigor** | >90% Test Coverage + Integration Pass | CI/Test Report |\n\n**Reversibility**: Any production anomaly triggers immediate revert to Research status via Global Kill-Switch.\n\n*(Source: `docs/governance/RESEARCH_MODULE_GOVERNANCE.md`)*\n\n### 2.3 Documentation Impact (The \"Release\" of Truth)\n\nChanges to documentation (Epistemic Truth) follow the DID process.\n\n1.  **Detect Impact**: Identify discrepancies between Reality (Code) and Truth (Docs).\n2.  **Declare DID**: Create a `DID-XXXX` record with `Status: Draft`.\n3.  **Human Resolution**: Operator reviews and applies changes.\n    *   **Applied**: Docs updated. DID Closed.\n    *   **Dismissed**: False positive. DID Closed.\n    *   **Rejected**: Change violated invariants (Veto).\n\n*(Source: `docs/epistemic/impact_resolution_contract.md`)*\n\n---\n\n## 3. Escalation Paths\n\n### 3.1 Conflict Resolution\n\nWhen operators or rules conflict, the system resolves upward.\n\n| Priority | Resolution Rule |\n| :--- | :--- |\n| **Level 1 (Highest)** | **Human Decision** (Real-time override) |\n| **Level 2** | **Project Owner / Quorum** (Decision Ledger Sign-off) |\n| **Level 3** | **Primary Maintainer Veto** (Foundational Docs) |\n| **Level 4** | **\"Freshness\" Rule** (Most recent `main` commit wins) |\n| **Level 5 (Lowest)** | **Automated Default** (Fail-Closed) |\n\n**The Veto**: The original author of a foundational document (Invariant, Intent) holds veto power over changes. Overruling requires Level 2 authority.\n\n### 3.2 Automation Escalation\n\nUnder the **Bounded Automation Contract** (Active Phase 6):\n\n1.  **Monitor Detects Issue**: Logs `[SUGGESTION]` (INFO/WARN).\n2.  **Passive Wait**: Monitor does NOT act.\n3.  **Human Review**: Operator sees suggestion in Audit Log.\n4.  **Human Action**: Operator executes the suggestion (or ignores it).\n\n**Escalation to Action**: A monitor can only self-escalate to action if it has graduated to \"Active Automator\" via a specific Decision Ledger entry.\n\n### 3.3 Kill-Switches\n\nEmergency halts escalate cleanly to prevent cascading damage.\n\n| Reach | Trigger | Reset Authority |\n| :--- | :--- | :--- |\n| **Global** | Drawdown > 10% OR 3+ Integrity Failures | **Human Only** (Manual Restart) |\n| **Family** | Family Drawdown > 3% | **Human Only** |\n| **Strategy** | Strategy Drawdown > 2% | **Human Only** |\n\n*(Source: `docs/capital/kill_switch.md`)*\n\n---\n\n## 4. Policy Constraints (The Laws)\n\n### 4.1 Forbidden Actions (Invariants)\n\nThese actions are architecturally impossible or strictly banned.\n\n1.  **INV-NO-EXECUTION**: No broker API calls for orders. No capital movement.\n2.  **INV-NO-SELF-ACTIVATION**: System cannot promote itself to production.\n3.  **INV-PROXY-CANONICAL**: No data ingestion bypassing the proxy/validation layer.\n4.  **INV-TRUTH-EPOCH-EXPLICIT**: No use of `system_clock` for business logic (\"Now\" is forbidden).\n5.  **INV-HONEST-STAGNATION**: If data is missing/bad, system HALTS. No interpolation/guessing.\n\n### 4.2 Research Constraints\n\nResearch modules must remain in the \"Research World\".\n\n*   **Physical Isolation**: Must reside in `research_modules/`.\n*   **Import Barrier**: Cannot import into `core_modules/`.\n*   **Execution Isolation**: No runtime hooks into the main loop.\n*   **Configuration**: Defaults to `ENABLED=False`.\n\n### 4.3 Credential Policy\n\n*   **Zero Trust**: API keys are treated as toxic waste.\n*   **Storage**: `.env` only (gitignored).\n*   **Memory**: Session tokens strictly in-memory (swapped out on exit).\n*   **Rotation**: Manual rotation by Operator Only.\n\n### 4.4 Chat Interface Contract\n\n*   **Draft Only**: AI Chat can draft commands.\n*   **No Execution**: AI Chat CANNOT execute commands.\n*   **Bridge**: Human must explicitly confirm (`Y/N`) on the CLI bridge.\n*   **No Hidden Chains**: One command = One action.\n\n*(Source: `docs/epistemic/chat_execution_contract.md`)*\n",
  "index.md": "# Project Memory Index\n\n> Externalized cognition for humans and AI agents.\n> Every file in this structure captures **intent**, not implementation.\n\n## Structure\n\n| Path | Purpose |\n| :--- | :--- |\n| [QUALITY.md](file:///c:/GIT/TraderFund/docs/memory/QUALITY.md) | Quality contract and invariants for project memory |\n| [00_vision/vision.md](file:///c:/GIT/TraderFund/docs/memory/00_vision/vision.md) | Why this project exists. Core philosophy and anti-patterns |\n| [01_scope/boundaries.md](file:///c:/GIT/TraderFund/docs/memory/01_scope/boundaries.md) | What is in and out of scope. The Three Worlds model |\n| [02_success/success_criteria.md](file:///c:/GIT/TraderFund/docs/memory/02_success/success_criteria.md) | Measurable conditions that define progress and completion |\n| [03_domain/domain_model.md](file:///c:/GIT/TraderFund/docs/memory/03_domain/domain_model.md) | Core domain concepts, terminology, and relationships |\n| [04_architecture/macro.md](file:///c:/GIT/TraderFund/docs/memory/04_architecture/macro.md) | High-level architectural principles and cognitive ordering |\n| [05_components/](file:///c:/GIT/TraderFund/docs/memory/05_components/) | YAML definitions for each major system component |\n| [06_data/data_contracts.md](file:///c:/GIT/TraderFund/docs/memory/06_data/data_contracts.md) | Data schemas, lineage rules, and temporal truth model |\n| [07_execution/runtime.md](file:///c:/GIT/TraderFund/docs/memory/07_execution/runtime.md) | How the system runs: orchestration, scheduling, pipelines |\n| [08_reliability/failure_model.md](file:///c:/GIT/TraderFund/docs/memory/08_reliability/failure_model.md) | Known failure modes, circuit breakers, and recovery paths |\n| [09_security/trust.md](file:///c:/GIT/TraderFund/docs/memory/09_security/trust.md) | Trust boundaries, execution gates, and safety invariants |\n| [10_observability/metrics.md](file:///c:/GIT/TraderFund/docs/memory/10_observability/metrics.md) | What is measured, logged, and surfaced to operators |\n| [11_deployment/evolution.md](file:///c:/GIT/TraderFund/docs/memory/11_deployment/evolution.md) | Phase model, promotion gates, and evolution rules |\n| [governance.md](file:///c:/GIT/TraderFund/docs/memory/governance.md) | Aggregated governance rules and flows |\n| [ledger.md](file:///c:/GIT/TraderFund/docs/memory/ledger.md) | The system's epistemic memory structure |\n| [decisions/README.md](file:///c:/GIT/TraderFund/docs/memory/decisions/README.md) | Immutable record of all architectural decisions (ADRs) |\n",
  "ledger.md": "# Ledger\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> This document defines the system's \"Epistemic Memory\" structure.\n> **The Past Is Immutable.** The Future Is Governed.\n\n---\n\n## 1. Epistemic Authority Hierarchy\n\nThe global hierarchy of truth is strictly defined. Lower layers cannot override higher layers.\n\n| Authority Level | Source | Mutable? | Purpose |\n| :--- | :--- | :--- | :--- |\n| **1. Human Command** | Real-time Decision | **Yes** | Ultimate override. \"Stop everything.\" |\n| **2. Decision Ledger** | `decisions.md` | **No** (Append-Only) | Architectural intent. \"Why we separate US/India.\" |\n| **3. Invariants** | `architectural_invariants.md` | **No** (Permanent) | Laws of physics. \"No live execution.\" |\n| **4. Constraints** | `active_constraints.md` | **Yes** (Governed) | Temporary rules. \"Phase 1 limits.\" |\n| **5. Assumptions** | `assumption_changes.md` | **Yes** (Tracked) | Working theories. \"API allows 5 req/min.\" |\n| **6. Evolution Log** | `evolution_log.md` | **No** (Append-Only) | History of what happened. \"Tick 1045 processed.\" |\n\n*(Source: `docs/epistemic/ledger/decisions.md`)*\n\n---\n\n## 2. Ledger Registry\n\n| Ledger | Path | Content | Format |\n| :--- | :--- | :--- | :--- |\n| **Decision Ledger** | `docs/epistemic/ledger/decisions.md` | Irreversible architectural choices (D-series, EV-series). | Markdown (ADR ref) |\n| **Evolution Log** | `docs/epistemic/ledger/evolution_log.md` | Chronological system states (ticks, regime shifts). | JSONL / Markdown |\n| **Phase Lock** | `docs/phase_locks/*.md` | Artifact hashes proving a phase is complete/frozen. | Markdown + SHA256 |\n| **Activation Log** | `docs/governance/ACTIVATION_LOG.md` | Module promotions (Research -> Production). | Markdown Table |\n| **Impact Ledger** | `docs/epistemic/ledger/impact_ledger.md` | Documentation changes (DIDs) and their resolution. | Markdown List |\n| **Assumption Log** | `docs/epistemic/ledger/assumption_changes.md` | Invalidated assumptions and new learnings. | Markdown Table |\n\n---\n\n## 3. Ledger Rules\n\n### 3.1 Immutability\n*   **The Past is Frozen**: Once an entry is committed to a ledger (Decision, Evolution, Activation), it **CANNOT BE DELETED OR MODIFIED**.\n*   **Correction**: Errors are corrected by appending a new entry that references and supersedes the old one (e.g., `D005 SUPERSEDES D002`).\n*   **Audit**: Deletion of ledger entries is a critical security violation.\n\n### 3.2 Explicit Supersession\n*   **No Implicit Changes**: A new decision cannot implicitly weaken an old one. It must explicitly state \"Supersedes D-XXX\".\n*   **Traceability**: The chain of supersession must be unbroken.\n\n### 3.3 Append-Only\n*   All operational logs (Evolution, Audit) are strictly append-only.\n*   Retries result in new entries, not overwrites.\n\n### 3.4 Temporal Scoping (Truth Epochs)\n*   **Version Lock**: Every `Truth Epoch` (snapshot of reality) is scoped to the `Proxy Set Version` that generated it.\n*   **Invalidation**: Changing the definition of \"The Market\" (Proxy Set) invalidates all prior Truth Epochs for future decision-making. (History is preserved, but validity ends).\n\n---\n\n## 4. Policy Constraints (Memory)\n\n### 4.1 Data Retention\n*   **Epistemic Artifacts**: **PERMANENT**.\n    *   Scope: Narratives, Decisions, Ledgers.\n    *   Constraint: Must reconstruct context of every decision ever made.\n*   **Audit Logs**: **Active (90 Days)** -> Archive (1 Year) -> Delete.\n    *   Scope: Operational JSON logs.\n    *   Rationale: Debugging vs compliance.\n*   **Raw Input**: **Active (1 Year)** -> Cold Storage.\n    *   Rationale: Re-ingestible, but kept for proof of \"what we saw\".\n\n### 4.2 Automation Limits\n*   **No Auto-Write**: Automation scripts (e.g., `drift_detector.py`) CANNOT write to the Decision Ledger.\n*   **Draft Only**: Automation can propose a `Draft DID` or `Draft Decision`, but a HUMAN must commit it.\n*   **Read-Only Metrics**: Dashboards read ledgers; they do not write to them.\n\n### 4.3 Conflict Resolution (Ledger Level)\n*   **Fork Prevention**: If multiple valid ledgers exist (e.g., git merge conflict), the **Human Maintainer** must manually reconcile and sign the unified state.\n*   **Freshness**: In absence of manual resolution, the most recent `main` branch commit is Truth.\n\n*(Sources: `docs/epistemic/truth_epoch_scoping.md`, `docs/epistemic/data_retention_policy.md`)*\n",
  "QUALITY.md": "# Memory Quality Contract\n\n## Purpose\n\nProject memory is **externalized cognition** shared between humans and AI agents. It is the single persistent substrate that carries intent, decisions, constraints, and non-goals across sessions, contributors, and tools. Without high-quality memory, every conversation starts from zero. Code can be regenerated; lost intent cannot.\n\n---\n\n## Invariants\n\n### 1. Authority Invariant\nEvery document has exactly one authoritative owner (human or role). No two documents may authoritatively define the same concern.\n> **PASS/FAIL:** _Can you point to exactly one file that owns this concern, and does it name its authority?_\n\n### 2. Explicit Exclusion Invariant\nWhat the system will **not** do is as important as what it will do. Non-goals must be written, not implied.\n> [!NOTE] AUDIT: Defines quality requirement for Scope; actual Scope is owned by boundaries.md.\n> **PASS/FAIL:** _Are non-goals explicitly listed, or must a reader infer them?_\n\n### 3. Decision Traceability Invariant\nEvery significant decision is recorded with its rationale and date. Decisions are never silently overwritten.\n> **PASS/FAIL:** _Can you trace why a particular design choice was made and when?_\n\n### 4. Intent vs Implementation Separation\n**Why** something exists (intent) must be separated from **how** it is built (code). Intent documents survive rewrites; code does not survive lost intent.\n> **PASS/FAIL:** _If all code were deleted, could the system be rebuilt from memory alone?_\n\n### 5. Machine Parsability Invariant\nMemory artifacts must be structured enough for automated tools and LLMs to consume without ambiguity. Use consistent formats, headings, and naming conventions.\n> **PASS/FAIL:** _Can a script or LLM reliably extract key facts from this document without human guidance?_\n\n### 6. Drift Detection Invariant\nWhen memory and reality diverge, the divergence must be detectable. Stale, contradictory, or orphaned documents are memory corruption.\n> **PASS/FAIL:** _Is there a way to detect that this document no longer reflects the true system state?_\n\n### 7. Update Locality Invariant\nChanging a fact should require updating exactly one place. If a change requires edits in multiple files, the structure is wrong.\n> **PASS/FAIL:** _Does updating this fact require touching more than one document?_\n\n### 8. Regeneration Safety Invariant\nAny generated or derived artifact must be safely reproducible from authoritative memory. Deleting generated outputs must not cause information loss.\n> **PASS/FAIL:** _If this file were deleted, could it be fully regenerated from other memory artifacts?_\n\n---\n\n## Quality Checklist\n\n- [ ] Single source of truth per concern\n- [ ] Non-goals written\n- [ ] Decisions recorded\n- [ ] Intent separated from code\n- [ ] Machine readable structure\n- [ ] No contradictions\n- [ ] Obvious update paths\n- [ ] Regenerable from memory\n\n---\n\n## Rules\n\n1. **LLMs may NEVER modify** vision, scope, success criteria, or recorded decisions.\n2. **Humans are the final authority** on specifications, priorities, and constraints.\n3. **Memory is more important than code.** Code implements; memory defines. Protect memory first.\n",
  "00_vision/vision.md": "# Vision\n\n## Why This Project Exists\n\nTraderFund is a **regime-aware market intelligence system** designed to reduce emotionally driven and context-blind investment decisions. It exists to replace opaque \"black box\" investing with disciplined, observable, and scientifically grounded market understanding \u2014 enforcing strict data lineage, glass-box reasoning, and explicit uncertainty at every layer.\n\nThe goal is not prediction.\nThe goal is **situational clarity under uncertainty**.\n\n## Core Philosophy: The 13-Level Cognitive Hierarchy\n\nAll analysis follows a strict, non-negotiable hierarchy.\nLower levels may refine insight but can never override higher levels.\n\n**0. Purpose (Human Outcome)**\nReduce emotional trading and structural misalignment through clear situational awareness.\n\n**1. Regime (Market Reality)**\nRisk-on/off, liquidity states. Defines the market world. *(The Gatekeeper)*\n\n**2. Narrative (Change Explanation)**\nCausal reconstruction of what changed and why it matters. *(The Context)*\n\n**3. Meta-Analysis (Trust Filter)**\nSignal decay and strategy validity. Determines which tools are reliable. *(The Filter)*\n\n**4. Factor Analysis (Reward Map)**\nMomentum, Value, Quality, Volatility. Identifies rewarded and punished characteristics. *(The Map)*\n\n**5. Strategy Selection (Conditional Playbooks)**\nActivates playbooks based on Regime + Factors. *(The Playbook)*\n\n**6. Opportunity Discovery (Multi-Lens Idea Generation)**\nParallel discovery lenses converge to unified candidates:\n-   **Narrative Lens**: Theme-driven ideas (Tariffs, CapEx).\n-   **Factor Lens**: Statistical reward patterns.\n-   **Fundamental Lens**: Valuation and balance-sheet dislocation.\n-   **Technical Lens**: Price action and accumulation.\n-   **Strategy Lens**: Playbook-specific screens.\n*Output: High-conviction ideas (multi-lens convergence) and structured watchlists.*\n\n**7. Convergence & Scoring**\nMerges candidates under regime-dependent weighting into ranked opportunity sets.\n\n**8. Execution Constraints (Capital Preservation)**\nRisk limits, exposure caps, position sizing. *(The Survival)*\n\n**9. Portfolio Intelligence (Diagnostics)**\nEvaluates existing holdings for regime compatibility, narrative decay, and structural misalignment. *(The Diagnostic)*\n\n---\n*(Future Capabilities \u2014 gated by system maturity)*\n**10. Advisory Layer**: Portfolio-aware exposure guidance.\n**11. Simulation**: Paper trading and historical validation.\n**12. Live Execution**: Automated execution (final stage only).\n\n## Product Philosophy\n\n- **Diagnostics Over Commands**: The system diagnoses alignment; humans decide actions.\n- **Glass-Box Observation**: Every output traces to a specific cognitive layer.\n- **Uncertainty as a Feature**: Confidence and risk are explicit.\n- **Human-in-the-Loop**: Final authority always remains with the user.\n- **Conditional Intelligence**: Strategies are Regime + Factor dependent.\n\n## Anti-Patterns\n\n1.  **Level Skipping**: Acting on Technicals without Regime context.\n2.  **Black-Box Decision Engines**: Unexplainable models are forbidden.\n3.  **Future Prediction**: The system characterizes present probability, not forecasts.\n4.  **Hidden Uncertainty**: Confidence must always be visible.\n",
  "01_scope/boundaries.md": "# Scope & Boundaries\n\n## The Three Worlds\n\n> These boundaries are non-negotiable. Violation corrupts the entire system.\n\n| World | Purpose | Characteristics |\n| :--- | :--- | :--- |\n| **Production** | Live capital operations | Stable, conservative, slow-changing, boring by design |\n| **Research** | Experimental validation | Failure-tolerant, isolated, requires governance passage |\n| **Vision** | Conceptual exploration | Non-actionable, awareness-only, strictly no execution wiring |\n\n\n**Critical Rules:**\n- Vision items MUST NOT leak into Production\n- Research items MUST pass governance before Production\n- Production remains boring by design\n\n*Source: `docs/VISION_BACKLOG.md`*\n\n## Current Phase: Research & Validation (Shadow Mode)\n\n*Source: `docs/epistemic/current_phase.md`*\n\n### In Scope (Levels 0-9)\n\n- **Foundation (L1-L3)**:\n    - **Regime**: Volatility, Liquidity, Risk State (Gatekeeper).\n    - **Narrative**: News, Earnings, Macro Events (Context).\n    - **Meta-Analysis**: Signal Trust Scores.\n- **Strategy & Discovery (L4-L7)**:\n    - **Factor**: Momentum, Value, Quality, Volatility factors.\n    - **Strategy**: Playbook matching (e.g., \"Deep Value in Bull Market\").\n    - **Discovery Lenses**:\n        - *Narrative*: Theme-driven ideas.\n        - *Factor*: Statistical reward patterns.\n        - *Fundamental*: Balance Sheet, Valuation, Margins.\n        - *Technical*: Price Action, Breakouts.\n    - **Convergence**: Scoring and Merging into unified candidates.\n- **Constraints (L8-L9)**:\n    - **Execution**: Risk Limits, Position Sizing.\n    - **Portfolio**: Diagnostic checks (\"Fighting Regime\", \"Narrative Risk\").\n- **Output**: Curated Watchlists & Diagnostic Reports (Reasoning First).\n\n\n\n### Out of Scope (Current Phase)\n\n- Automated live execution (no live money orders)\n- Portfolio optimization (covariance matrices, risk parity)\n- Complex derivatives\n- External investor reporting\n\n## Explicit Non-Goals (System-Wide)\n\n- **Live Execution (Level 12)**: No live money orders (Strictly Out of Scope).\n- **Advisory / Simulation (Levels 10-11)**: Future phases, not current focus.\n- **Price Prediction**: Characterize current probability, not forecast future price points.\n- **\"Black Box\"**: No unexplainable logic.\n- **High-Frequency Trading**: Not a microsecond arbitrage system.\n\n\n*Sources: `docs/epistemic/project_intent.md`, `docs/research_product_architecture.md`*\n\n## Primary User & Capital Profile\n- **Capital**: \u2264 \u20b91 Cr (Small-Mid Cap Institutional).\n- **Style**: Research-Lead Discretionary.\n- **Authority**: Human always decides. System advises.\n- **Goal**: Superior risk-adjusted returns through situational clarity.\n- **Constraints**: \n    - No HFT / Latency dependency.\n    - No excessive leverage.\n\n## Time Horizon Bands\n| Band | Typology | Focus |\n| :--- | :--- | :--- |\n| **Tactical** | Days - Weeks | Momentum / Flow / Technicals |\n| **Strategic** | Months - Quarters | Narrative / Earnings / Seasonal |\n| **Structural** | 1 - 5 Years | Valuation / Secular Transformation |\n*Max Horizon: 5 Years.*\n\n## Portfolio Intelligence & Advisory\n- **Scope**: Diagnostic + Advisory Intelligence.\n- **Function**:\n    - Detects regime misalignment (\"Holding Defensive in Risk-On\").\n    - Suggests exposure adjustments (\"Trim Tech\").\n    - Monitors horizons drift (\"Tactical trade became bag-holding\").\n- **Constraint**: No automated execution of rebalancing.\n\n## Research Exit Criteria\nTo graduate from Research to Production Candidate:\n1.  **Regime Stability**: Strategy performs predictably across 2+ distinct regimes.\n2.  **Lens Consensus**: High-conviction ideas consistently outperform baseline.\n3.  **Drawdown Control**: Max DD < defined threshold in simulation.\n\n\n*Source: `docs/us_market_engine_design.md`*\n",
  "02_success/success_criteria.md": "# Success Criteria\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> This document defines behavioral completion conditions. It answers \"When do I trust this system?\".\n\n---\n\n## 1. Regime Layer Success (L1)\n\n*Criteria for trusting the \"Game We Are Playing\" assessment*\n\n- **Stability**: Regime classification remains stable for \u22653 consecutive sessions unless driven by explicit high-impact narrative events.\n- **Explainability**: Every regime transition is causally linked to specific factor movements or narrative clusters.\n- **Accuracy**: False regime flips (flip-flops within 2 days without price follow-through) occur in < 5% of trading days.\n- **Fail-Safe**: System defaults to \"Undefined/High Volatility\" (cash preservation) when inputs are ambiguous.\n\n## 2. Opportunity Discovery Success (L6-L7)\n\n*Criteria for trusting candidate generation and ranking*\n\n- **Factor Alignment**: \u226560% of High-Conviction Ideas exhibit positive directional alignment with the dominant Factor Regime within 10 trading sessions.\n- **Confluence Requirement**: High-Conviction status REQUIRES confirmation from \u22653 independent lenses.\n- **Lens Isolation**: Candidates surfaced by a single lens are strictly labeled \"Watchlist\" or \"Low Confidence\".\n- **Sizing Safety**: No candidate is recommended for entry without a corresponding stop-loss or invalidation level.\n- **Score Dispersion**: High-Conviction Ideas must exhibit minimum variance \u2265 0.24 across candidates. Flat distributions are invalid.\n- **Score Dispersion Enforcement**:\n    For all High-Conviction Ideas (L7 Convergence):\n    The Convergence Engine must enforce:\n    Variance(final_score_distribution) >= 0.15\n    # Strict enforcement required for L7 convergence validity (Critical/Blocking/Debug/SmallContext/Final/BrowserFix).\n    If dispersion < 0.15:\n    - Raise DISPERSION_COLLAPSE flag\n    - Downgrade all affected candidates to WATCHLIST\n    - Emit observability metric: score_dispersion_warning = True\n\n## 3. Portfolio Intelligence Success (L8-L9)\n\n*Criteria for trusting risk management and diagnostics*\n\n- **Predictive Diagnostics**: \"Regime Conflict\" flags appear prior to 80% of major drawdowns (>5%) in historical replay.\n- **Narrative Sensitivity**: \"Narrative Decay\" flags appear within 3 sessions of material negative news events.\n- **Horizon Integrity**: All candidates are explicitly labeled with time horizons; operational mismatches (e.g., holding a Scalp for 2 weeks) are flagged immediately.\n- **Constraint Hardening**: No position ever exceeds `MAX_POSITION_SIZE` in simulation, regardless of conviction.\n\n## 4. Phase Exit Criteria (Shadow Mode)\n\n*Defines milestones for moving to the next evolutionary phase*\n\n- **Stability**: Zero \"Orphans\" (data gaps) and zero critical crashes for 2 weeks sustained.\n- **Validation**: Consistent generation of \"A\" or \"B\" grade signals in Shadow Mode for 30 days.\n- **Idempotency**: Live signals match Historical Replay signals 100% for the same data period.\n- **Regime Robustness**: Strategy performs predictably (matches expectation) across 2+ distinct market regimes.\n\n*Source: `docs/epistemic/current_phase.md`*\n\n## 5. Dashboard & Observability Success\n\n*Criteria for the \"Glass Box\" Observer*\n\n- **Latency**: System state updates are visible on Dashboard within 5 seconds of pipeline completion.\n- **Traceability**: Every displayed metric links to its source file/lineage.\n- **Completeness**: No \"Unknown\" or \"Null\" states displayed for active universe symbols; missing data is explicitly flagged as \"Stale\" or \"Insufficient\".\n- **Alert Visibility**: Critical flags (Red/Orange) utilize distinct visual prominence from standard data headers.\n\n---\n\n## Appendix: Signal Quality Grading\n\n| Grade | Meaning | Criterion |\n| :--- | :--- | :--- |\n| **A** | High Quality | Validated by T+5 (>2%) AND T+15 (>5%) performance |\n| **B** | Acceptable | Validated by T+5 (>1%) OR T+15 (>3%) |\n| **C** | Marginal | Flat or slightly negative; inconclusive |\n| **D** | Failure | Stop-loss hit or significant adverse excursion |\n\n*Source: `README.md`*\n<!-- shadow-run-test: 2026-02-11T03:33 -->\n\n- **Test Invariant**: `TEST_ROUTER = true`\n",
  "03_domain/domain_model.md": "# Domain Model\n\n## Cognitive Hierarchy Concepts\n\n### Level 0: Purpose\n- **Situational Awareness**: The existential goal. Clarity over prediction.\n\n### Level 1: Regime (Market Reality)\n- **Characterizes**: Volatility, Trend, Liquidity.\n- **Output**: Risk-On / Risk-Off / Transition / Stress.\n- **Function**: Supervisory gate for all downstream layers.\n\n### Level 2: Narrative (Change Explanation)\n- **Causal explanation**: Reconstructs market change (e.g., Policy, Geopolitics).\n- **Attributes**:\n    - `stage`: Born / Reinforced / Resolved\n    - `confidence`: Probability of impact\n    - `scope`: Market / Sector / Asset\n    - `horizon`: Duration of effect\n\n### Level 3: Meta-Analysis (Trust Filter)\n- **Signal reliability**: Evaluation of tool effectiveness in current regime.\n- **Output**:\n    - `validity_scores`: Is this signal trustworthy?\n    - `confidence_modifiers`: Adjusting conviction.\n\n### Level 4: Factor Analysis (Reward Map)\n- **FactorSignal**:\n    - `strength`: Magnitude of factor return.\n    - `direction`: Long or Short bias.\n    - `stability`: Persistence of factor.\n    - `horizon`: Relevance timeframe.\n\n### Level 5: Strategy Selection (Playbook)\n- **Conditional playbooks**: Activated by Regime + Factors (e.g., \"Deep Value Playbook\").\n\n### Level 6: Opportunity Discovery (Parallel Lenses)\n- **Parallel Idea Generation**: Each lens produces an `OpportunityCandidate`.\n- **Primary Lenses**:\n    1.  **Narrative Lens**: Theme-driven (Geopolitics, Macro).\n    2.  **Factor Lens**: Statistical reward patterns.\n    3.  **Fundamental Lens**: Valuation dislocation.\n    4.  **Technical Lens**: Price action setups.\n    5.  **Strategy Lens**: Playbook screens.\n- **OpportunityCandidate**:\n    - `symbol`: Ticker.\n    - `source_lenses`: Which lenses triggered?\n    - `horizon`: Tactical/Strategic.\n    - `preliminary_scores`: Initial signal strength.\n\n### Level 7: Convergence & Scoring\n- **CandidateAssessment**:\n    - `narrative_score`: Alignment with themes.\n    - `factor_score`: Alignment with rewarded styles.\n    - `fundamental_score`: Structural quality.\n    - `technical_score`: Timing efficiency.\n    - `regime_alignment`: Gating multiplier.\n    - `horizon`: Unification of timeframes.\n- **Output**:\n    - `HighConvictionIdeas`: Multi-lens convergence.\n    - `Watchlist`: Single-lens candidates requiring monitoring.\n\n### Level 8: Execution Constraints\n- **ExecutionEnvelope**:\n    - `max_position_size`: Hard cap per asset.\n    - `exposure_caps`: Sector/Factor limits.\n    - `drawdown_limits`: Stop-loss thresholds.\n    - `risk_budget`: Total allowable VaR.\n\n### Level 9: Portfolio Intelligence\n- **PortfolioDiagnostic**:\n    - `RegimeConflict`: Holding risk-off assets in risk-on regime?\n    - `NarrativeDecay`: Holding assets whose story has ended?\n    - `FactorMismatch`: Fighting the tape?\n    - `HorizonMismatch`: Trading short-term signals with long-term capital?\n    - `ConcentrationRisk`: Too much exposure to one driver.\n- **Output**: Red / Orange / Yellow / Green flags (Advisory Intelligence).\n\n## Shared Concepts\n\n### TimeHorizon\n- **UltraShort**: Intraday / Hours.\n- **Short**: Days - Weeks.\n- **Medium**: Months - Quarters.\n- **Long**: 1 - 5 Years.\n\n\n\n\n## Relationships\n\n```\n```\nRegime (L1) \u2192 Meta (L3) \u2192 Factor (L4) \u2192 Strategy Selection (L5)\nRegime (L1) \u2192 Opportunity Discovery (L6)\nRegime (L1) \u2192 Convergence & Scoring (L7)\n\n[Narrative, Factor, Fundamental, Technical, Strategy] \u2192 Opportunity Candidates (L6)\n\nCandidates \u2192 Convergence & Scoring (L7) \u2192 Ranked Pool\n\nRanked Pool + ExecutionEnvelope (L8) + PortfolioDiagnostics (L9) \u2192 Actionable Watchlists\n```\n\n\n\n\n\n## Terminology Conventions\n\n- **Glass-Box**: Opposite of black-box; all logic observable and explainable\n- **Shadow Mode**: System runs but does not execute real trades\n- **Clinical Review**: Human post-trade analysis of generated signals\n- **Orphan**: A data gap \u2014 missing expected data in a time series\n- **Genesis**: The signal generation and narrative creation process\n",
  "04_architecture/data_flow.md": "# Data Flow & Pipeline Architecture\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> **Conflict Handling**: Where legacy source docs conflict with Domain Model, mark OPEN_CONFLICT.\n\n---\n\n## End-to-End Pipeline\n\n*(Original Diagram: `docs/memory/_appendix/data_flow_code.md`)*\n\n1. **Ingestion (L0)**: US/India Market Data \u2192 Canonical Store (Immutable Parquet)\n2. **Regime Engine (L1)**: Trend \u00b7 Volatility \u00b7 Liquidity \u00b7 Event Pressure\n3. **Narrative Engine (L2)**: Events \u2192 Stories (Born \u2192 Reinforced \u2192 Resolved)\n4. **Meta Engine (L3)**: Trust Scores (Signal Validity, Staleness)\n5. **Factor Engine (L4)**: Factor State (Reward Map)\n6. **Strategy Selector (L5)**: Active Strategy Set (Gated by Regime/Factor)\n7. **Opportunity Discovery (L6)**: Parallel Lenses (Narrative, Factor, Fundamental, Technical, Strategy) \u2192 Candidates\n8. **Convergence Engine (L7)**: Candidate Ranking \u00b7 Unified Score (HighConviction/Watchlist)\n9. **Constraint Engine (L8)**: Position Sizing \u00b7 Risk Limits \u00b7 Drawdown Checks\n10. **Portfolio Intelligence (L9)**: Diagnostics \u00b7 Flags \u00b7 Sizing Suggestions\n11. **Output**: Dashboard \u00b7 Reports \u00b7 Human Operator\n\n---\n\n## Ingestion Pipelines (L0)\n\n### US Pipeline\n\n*(Source: us_market_engine_design.md)*\n\n1. **Alpha Vantage API**\n2. **Symbol Master** (Filter: Stock, NYSE/NASDAQ)\n3. **Raw Ingestor** (Rate limited REST)\n4. **Normalizer** (UTC, Split Adj)\n5. **Curator** (Quality Checks \u2192 Parquet)\n\n**Schedule**:\n- `US_Symbol_Refresh`: Weekly (Monday)\n- `US_Daily_Close_Fetch`: Daily (17:00 ET) \u2014 `outputsize=compact`\n- `US_Backfill_Worker`: Manual trigger \u2014 `outputsize=full`\n\n### India Pipeline\n\n*(Source: INDIA_WEBSOCKET_ARCHITECTURE.md)*\n\n1. **SmartAPI WebSocket v2** (LTP Mode)\n2. **IndiaWebSocketClient** (Connection Mgmt)\n3. **CandleAggregator** (Tick \u2192 1m Candle)\n4. **MomentumEngine** (VWAP, HOD, RVOL)\n5. **ObservationLogger** (Signal Logging)\n\n**Schedule**:\n- Market Open (09:00 IST): Scheduled Task \u2192 `start_india_momentum.ps1`\n- Market Close (15:45 IST): Scheduled Task \u2192 `stop_india_momentum.ps1`\n- Rollback to REST available if WebSocket is unstable.\n\n### Pipeline Invariants\n\n| Rule | Enforcement |\n| :--- | :--- |\n| Raw data never mutated | Corrections as new versions only |\n| India vs US physically separate | No shared state, no cross-imports |\n| All timestamps event-time based | Processing time ignored in logic |\n| Idempotent re-runs | Same input \u2192 identical output |\n\n---\n\n## Cognitive Processing Flow (L1-L5)\n\n### Direction of Data Flow\n\n*(Source: layer_interaction_contract.md)*\n\n- **ALLOWED**: L1 \u2192 L2 \u2192 L3 \u2192 L4 \u2192 L5 (Downward Only)\n- **FORBIDDEN**: L5 \u2192 L1 (Reverse Dependency)\n- **FORBIDDEN**: L1 \u2192 L4 (Layer Skipping)\n\n### Communication Mechanism\n\nLayers communicate via **immutable state snapshots**:\n\n- `RegimeState` \u2192 frozen after creation; downstream receives copies\n- `FactorPermission` \u2192 binary grant flags; absence = denial (fail-closed)\n- `ContextualSignal` \u2192 wraps raw signal + regime context + factor permission\n\n### Prohibited Bypasses\n\n| Ban | Rule | Rationale |\n| :--- | :--- | :--- |\n| BAN-1 | Signals must NOT infer regime directly | Regime classification is L1's exclusive responsibility |\n| BAN-2 | Strategies must NOT query macro state directly | Macro flows through Regime; direct access is a bypass |\n| BAN-3 | Execution must NOT evaluate signal confidence | Confidence evaluation belongs to Meta-Analysis (L3) |\n| BAN-4 | No layer may mutate upstream state | Upstream state is immutable from downstream perspective |\n\n### Feedback Channels (Exception)\n\nFeedback flows **upward to DESIGN**, not to STATE:\n\n| Channel | Direction | Purpose |\n| :--- | :--- | :--- |\n| Performance Attribution | L9 \u2192 Design | Did the system produce useful diagnostics? |\n| Regret Analysis | L8 \u2192 Design | Did constraint decisions preserve capital? |\n| Drift Detection | L9 \u2192 Design | Is the system behaving as designed? |\n\n**Critical distinction**: Feedback influences future DESIGN (human review, parameter tuning). Feedback does NOT influence current STATE (no real-time adaptation).\n\n---\n\n## Data Object Lifecycle\n\n### 1. Raw Data (Bronze)\n\n| Property | Value |\n| :--- | :--- |\n| Source | External APIs (AlphaVantage, SmartAPI) |\n| State | Unprocessed JSON/CSV |\n| Store | `data/raw/{market}/{date}/{source}/` |\n| Retention | 30 days (debugging/replay) |\n| Mutation | NEVER |\n\n### 2. Canonical Data (Silver)\n\n| Property | Value |\n| :--- | :--- |\n| Source | Ingestion Engine (L0) |\n| State | Cleaned, time-aligned, ticker-mapped Parquet |\n| Store | `data/analytics/{market}/prices/{freq}/` |\n| Retention | Indefinite (Source of Truth) |\n| Schema | `timestamp(UTC), symbol, OHLCV, adj_close, split_coef` |\n\n### 3. Cognitive State (Gold)\n\n| Property | Value |\n| :--- | :--- |\n| Source | Cognitive Core (L1-L5) |\n| State | `RegimeState`, `NarrativeObject`, `FactorState` |\n| Store | `data/state/` and `docs/intelligence/` |\n| Lifecycle | Refreshed per evaluation cycle |\n| Invariant | Frozen after creation; copies only downstream |\n\n### 4. Opportunity Candidate (Transient)\n\n| Property | Value |\n| :--- | :--- |\n| Source | Any Discovery Lens (L6) |\n| State | `{symbol, source_lens, score, rationale, horizon}` |\n| Lifecycle | Created in L6, scored in L7, discarded after convergence |\n| Persistence | Ephemeral unless promoted to Watchlist |\n\n### 5. Watchlist Item (Final Output)\n\n| Property | Value |\n| :--- | :--- |\n| Source | Portfolio Intelligence (L9) |\n| State | `{symbol, unified_score, regime_alignment, flags[], sizing_suggestion}` |\n| Store | `data/output/watchlist_{date}.json` |\n| Consumer | Dashboard \u2192 Human Operator |\n\n---\n\n## Research Output Types\n\n*(Source: research_product_architecture.md)*\n\n| Report | Frequency | Content | Audience |\n| :--- | :--- | :--- | :--- |\n| **Daily Brief** (\"The Pulse\") | Daily (Market Close) | Top 3 Active Narratives, Significant Signals, Reliability Check | Traders |\n| **Weekly Synthesis** (\"The Context\") | Weekly (Sunday) | Narrative Lifecycle Review, Correlation Analysis, Emerging Themes | Portfolio Managers |\n| **Thematic Deep Dive** (\"The Alpha Note\") | Ad-hoc (Alpha Discovery trigger) | Specific Hypothesis, Statistical Evidence, Historical Validation | Quants, Researchers |\n| **Cross-Market Flash** (\"The Bridge\") | Event-driven | Inter-market Spillover Alert, Quantified Lag/Correlation | All |\n\n**Confidence Semantics**:\n- Signal Confidence (base) \u2192 Narrative Confidence (aggregated + decay) \u2192 Report Confidence (weighted average)\n- Visual: High (80-100) = Bold, Medium (50-79) = Standard, Low (<50) = Translucent + Warning\n\n---\n\n## Process Flow (Daily Cycle)\n\n*(Original Detail: `docs/memory/_appendix/data_flow_code.md`)*\n\n1. **WAKE UP**: Scheduled Task triggers\n2. **INGEST (L0)**: Fetch US/India data \u2192 Canonical Store\n3. **CONTEXTUALIZE (L1-L3)**: Update Regime, Narrative, Trust Scores\n4. **ANALYZE (L4-L5)**: Update Factors, Select Strategies\n5. **DISCOVER (L6)**: Run Parallel Lenses \u2192 Candidates\n6. **CONVERGE (L7)**: Merge & Rank Candidates\n7. **CONSTRAIN (L8)**: Apply Risk Limits\n8. **DIAGNOSE (L9)**: Run Portfolio Diagnostics\n9. **PUBLISH**: Watchlist, Reports, Dashboard\n10. **HUMAN DECIDES**: Final Authority\n\n---\n\n## Resolved Conflicts\n\n| ID | Conflict | Resolution | Date |\n| :--- | :--- | :--- | :--- |\n| **RC-4** | US Pipeline has no Fundamental Data ingestion. | **AlphaVantage FUNDAMENTAL_DATA endpoint** identified. Implementation deferred. Fundamental Lens returns `INSUFFICIENT_DATA` until wired. | 2026-02-10 |\n| **RC-5** | Indicator Engine described as separate layer. | **CLOSED.** Indicators are an internal detail of Technical Lens (L6). | 2026-02-10 |\n| **RC-6** | Cross-Market Alpha Discovery unmapped. | **Mapped to Factor Lens (L6).** Statistical reward patterns, not narratives. | 2026-02-10 |\n\n## Resolved Questions\n\n| ID | Question | Resolution | Date |\n| :--- | :--- | :--- | :--- |\n| **RQ-5** (was OQ-5) | MomentumEngine integration \u2014 standalone or Technical Lens feeder? | **MomentumEngine feeds into Technical Lens (L6)** as signal source. Outputs signals only, not ideas. Remains a scanner. | 2026-02-10 |\n| **RQ-6** (was OQ-6) | Event ingestion \u2014 separate L0 sub-pipeline? | **Yes.** Markets (OHLCV) and Events (News/Macro) are distinct L0 streams. Events converge at Narrative Engine (L2). New component: `ingestion_events.yaml`. | 2026-02-10 |\n| **RQ-7** (was OQ-7) | Cognitive State retention policy. | Aligned with `data_retention_policy.md`: Regime/Narrative/Factor state \u2192 **PERMANENT** (epistemic). Trust scores \u2192 **1 year active \u2192 archive**. Transient candidates \u2192 **Volatile** (regenerable). | 2026-02-10 |\n",
  "04_architecture/macro.md": "# System Architecture (Macro)\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> **Conflict Handling**: Where legacy source docs conflict with Domain Model, mark OPEN_CONFLICT.\n\n---\n\n## System Identity\n\nTraderFund is a **regime-aware market intelligence platform** operating in **Observer Mode**.\nIt generates research artifacts, not orders. Final authority always remains with the human.\n\n---\n\n## High-Level Component Map\n\n*(Original Diagram: `docs/memory/_appendix/macro_code.md`)*\n\n1. **Ingestion Layer (L0)**: US Pipeline (REST) + India Pipeline (WS)\n2. **Cognitive Core (L1-L5)**: Regime \u00b7 Narrative \u00b7 Meta \u00b7 Factor \u00b7 Strategy\n3. **Opportunity Discovery (L6)**: Parallel Lenses (Narrative, Factor, Fundamental, Technical, Strategy)\n4. **Convergence Engine (L7)**: Candidate Assessment \u00b7 Unified Score\n5. **Execution Constraints (L8)**: Bounds \u00b7 Risk Budget\n6. **Portfolio Intelligence (L9)**: Diagnostics \u00b7 Flags \u00b7 Regime Conflict\n7. **Dashboard (UI)**: Glass-Box Observation (Regime, Narrative, Signals)\n8. **Human Operator**: Final Authority\n\n---\n\n## Component Definitions\n\n### 1. Ingestion Layer (L0 \u2014 Foundation)\n\n| Sub-Component | Market | Mode | Data |\n| :--- | :--- | :--- | :--- |\n| `US_Pipeline` | US | REST Batch (AlphaVantage) | OHLCV Daily + Intraday |\n| `India_Pipeline` | India | WebSocket (SmartAPI) + REST Historic | Tick \u2192 1m Candles |\n| `Canonical_Store` | Both | Parquet (symbol/date partitioned) | Time-aligned, UTC |\n\n**Invariants**:\n- Pipelines are physically separate with no shared state.\n- Raw data is never mutated (corrections are new versions).\n- All logic proceeds on `event_time`, not processing time.\n\n### 2. Cognitive Core (L1-L5)\n\n| Engine | Level | Question | Output |\n| :--- | :--- | :--- | :--- |\n| `Regime_Engine` | L1 | \"What game are we playing?\" | Risk-On / Risk-Off / Transition / Stress |\n| `Narrative_Engine` | L2 | \"Why is this happening?\" | Structured Narratives (Born \u2192 Reinforced \u2192 Resolved) |\n| `Meta_Engine` | L3 | \"Can we trust this signal?\" | Validity Scores, Confidence Modifiers |\n| `Factor_Engine` | L4 | \"What is being rewarded?\" | Factor Strength, Direction, Stability |\n| `Strategy_Selector` | L5 | \"Which playbook fits?\" | Active Strategy Set (Regime + Factor gated) |\n\n**Regime Engine Dimensions** *(Source: Regime_Engine_Overview.md)*:\n- Trend (directional persistence)\n- Volatility (amplitude of variance)\n- Liquidity (execution efficiency)\n- Event Pressure (external catalysts)\n\n**Layer Interaction Rules** *(Source: layer_interaction_contract.md)*:\n- Data flows strictly downward through the hierarchy.\n- No layer may skip its upstream constraints.\n- No downstream layer may mutate upstream state.\n- Signals MUST carry regime context; proposals MUST carry factor permissions.\n\n### 3. Opportunity Discovery (L6 \u2014 Parallel Lenses)\n\n| Lens | Input | Scans For |\n| :--- | :--- | :--- |\n| `Narrative_Lens` | Narratives, Macro Events, Geopolitics | Theme-driven dislocations |\n| `Factor_Lens` | Factor Scores | Statistically rewarded patterns |\n| `Fundamental_Lens` | Balance Sheet, Valuation | Valuation / solvency anomalies |\n| `Technical_Lens` | Price, Volume, Indicators | Breakouts, accumulation, support |\n| `Strategy_Lens` | Active Playbooks | Playbook-specific screen criteria |\n\n**Output**: `OpportunityCandidate` objects with source tags.\n\n### 4. Convergence Engine (L7)\n\n- Merges candidates from all lenses into a unified pool.\n- Applies regime-dependent weighting to lens scores.\n- Produces `HighConvictionIdeas` (\u22653 lenses) and `Watchlist` (1-2 lenses).\n\n### 5. Constraints & Portfolio Intelligence (L8-L9)\n\n- **L8 (Constraints)**: Hard risk limits \u2014 position sizing, exposure caps, drawdown thresholds.\n- **L9 (Portfolio Intelligence)**: Diagnostic + Advisory \u2014 regime conflict, narrative decay, factor mismatch, horizon drift, concentration risk.\n- **Output**: Flagged watchlist items with Red/Orange/Yellow/Green severity.\n\n### 6. Dashboard (UI \u2014 Observation Layer)\n\n- Glass-Box Observer: every output traces to a specific cognitive layer.\n- Displays: Regime State, Active Narratives, Opportunity Candidates, Portfolio Flags.\n- No execution capability. Diagnostics Over Commands.\n\n---\n\n## Architectural Invariants\n\n*(Source: architectural_invariants.md)*\n\n1.  **Event Time Integrity**: All logic proceeds on `event_time`. Replays yield identical state.\n2.  **No Lookahead**: Core abstractions physically prevent access to future data.\n3.  **Immutability of Raw Data**: Raw data is never mutated. Corrections are new versions.\n4.  **Market Separation**: India vs US pipelines are physically distinct.\n5.  **Signal-Execution Separation**: Engines emit signals; they do not know about capital.\n6.  **Idempotency**: Re-running on same input produces identical output.\n7.  **Glass-Box Observability**: Every threshold is configurable and observable.\n8.  **Cognitive Ordering**: Regime \u2192 Narrative \u2192 Meta \u2192 Factor \u2192 Strategy \u2192 Discovery \u2192 Convergence. Strictly enforced.\n9.  **Layer Bypass Prohibition**: No layer may skip upstream constraints.\n\n### Global Governance Rules\n\n10. **Layer Authority Rule**: `domain_model.md` numbering and definitions are canonical. Layer numbering in legacy documents is non-authoritative and must not be referenced for reasoning.\n11. **No Silent Degradation Rule**: Missing inputs must surface explicit `INSUFFICIENT_DATA` states. No component may silently proceed with partial data without flagging degradation.\n12. **No Layer Inflation Rule**: No new cognitive layer may be introduced without displacing an existing one. The 13-Level hierarchy is a closed set.\n\n---\n\n## Legacy Architecture Mapping\n\n| Legacy Concept | Legacy Location | Current 13-Level Mapping | Status |\n| :--- | :--- | :--- | :--- |\n| Three-Ring Model (Truth/Adapter/Intel) | `system_landscape.md` | Replaced by L0-L9 hierarchy | **SUPERSEDED** |\n| 14-Layer Stack (L1-L14) | `structure_stack_vision.md` | Compressed to 13-Level (L0-L12) | **SUPERSEDED** |\n| Reality/Time/Object/Feature Layers | Structure Stack L1-L4 | Folded into Ingestion (L0) | **MAPPED** |\n| Event Layer (L5 old) | Structure Stack L5 | Folded into Narrative (L2) | **MAPPED** |\n| Regime Layer (L6 old) | Structure Stack L6 | Regime (L1) \u2014 promoted | **MAPPED** |\n| Narrative Layer (L7 old) | Structure Stack L7 | Narrative (L2) \u2014 promoted | **MAPPED** |\n| Signal Layer (L8 old) | Structure Stack L8 | Folded into Discovery Lenses (L6) | **MAPPED** |\n| Belief Layer (L9 old) | Structure Stack L9 | Split: Meta-Analysis (L3) + Convergence (L7) | **MAPPED** |\n| Strategy Layer (L10 old) | Structure Stack L10 | Strategy Selection (L5) | **MAPPED** |\n| Optimization Layer (L11 old) | Structure Stack L11 | Replaced by Constraints (L8) + Portfolio Intel (L9) | **REPLACED** |\n| Execution Layer (L12 old) | Structure Stack L12 | **DEFERRED** \u2014 Future (L12) | **OUT OF SCOPE** |\n| Settlement/Audit (L13-L14 old) | Structure Stack L13-L14 | **DEFERRED** \u2014 Future | **OUT OF SCOPE** |\n| Latent Layers (Macro, Flow, Vol Geometry) | `latent_structural_layers.md` | Sub-dimensions of Regime (L1) + Technical Lens (L6). See Resolved Items. | **LATENT_MAPPED** |\n\n---\n\n## Resolved Conflicts\n\n| ID | Description | Resolution | Date |\n| :--- | :--- | :--- | :--- |\n| **RC-1** (was OC-1) | Legacy `layer_interaction_contract.md` uses L6=Regime, L7=Narrative. | **Domain Model prevails.** Legacy contract is SUPERSEDED. Legacy numbering is non-authoritative (Rule 10). | 2026-02-10 |\n| **RC-2** (was OC-2) | Legacy `strategy_layer_policy.md` references \"Belief Layer (L9)\". | **Domain Model prevails.** Belief \u2192 Meta-Analysis (L3). Strategy Selector (L5) consumes Meta-Analysis (L3). | 2026-02-10 |\n| **RC-3** (was OC-3) | Regime\u2192Narrative adapter not wired in code. | **Implementation gap, not design flaw.** Architecture is correct (L1\u2192L2 mandatory). Code marked `NOT_WIRED` in `narrative_engine.yaml`. Invariant added: Narrative must never execute without regime context. | 2026-02-10 |\n| **RC-4** (was OC-4) | No fundamental data ingestion for Fundamental Lens (L6). | **AlphaVantage FUNDAMENTAL_DATA endpoint** identified (Income Statement, Balance Sheet, Cash Flow). Implementation deferred. Lens returns `INSUFFICIENT_DATA` until wired. | 2026-02-10 |\n| **RC-5** (was OC-5) | Indicator Engine described as separate layer. | **CLOSED.** Indicator computation is an internal detail of Technical Lens (L6), not a separate cognitive level. | 2026-02-10 |\n| **RC-6** (was OC-6) | Cross-Market Alpha Discovery (Granger causality, lead-lag) unmapped. | **Mapped to Factor Lens (L6).** Cross-market correlation patterns are statistical reward structures, not narratives. | 2026-02-10 |\n\n## Resolved Questions\n\n| ID | Question | Resolution | Date |\n| :--- | :--- | :--- | :--- |\n| **RQ-1** (was OQ-1) | Latent Layers mapping (Macro, Flow, Vol Geometry). | Sub-dimensions of existing levels (NOT new levels): Macro/Liquidity \u2192 Regime (L1), Flow/Microstructure \u2192 Technical Lens (L6), Vol Geometry \u2192 Regime (L1). Status: `LATENT_MAPPED`, implementation deferred. | 2026-02-10 |\n| **RQ-2** (was OQ-2) | Fundamental data source for Fundamental Lens. | **AlphaVantage FUNDAMENTAL_DATA endpoint.** Merged with RC-4. | 2026-02-10 |\n| **RQ-3** (was OQ-3) | Convergence weighting algorithm. | **Baseline prior defined** (equal-weight 20% per lens, regime-dependent multipliers). This is a baseline prior, not a learned truth. Requires calibration via research. See `convergence_engine.yaml`. | 2026-02-10 |\n| **RQ-4** (was OQ-4) | Cross-Market Alpha Discovery mapping. | Merged with RC-6. \u2192 Factor Lens (L6). | 2026-02-10 |\n",
  "05_components/component_health_contract.md": "# Component Health Contract\n# Authority: Canonical \u2014 All components MUST implement this interface.\n# Created: 2026-02-11\n\n## Purpose\n\nEvery component in the cognitive hierarchy MUST expose a uniform health interface.\nThis contract ensures that degradation, failure, and recovery are observable, traceable,\nand mechanically detectable \u2014 not inferred from silence.\n\n---\n\n## Required Health Fields\n\nEvery component MUST expose the following fields:\n\n| Field | Type | Description |\n|:---|:---|:---|\n| `health_status` | `OK \\| DEGRADED \\| FAILED` | Current operational state of the component. |\n| `last_success_timestamp` | `ISO-8601 UTC` | Timestamp of the last successful execution cycle. |\n| `failure_count` | `int (\u2265 0)` | Consecutive failure count since last OK state. |\n| `degraded_reason` | `string \\| null` | Human-readable reason if status is DEGRADED. Null when OK. |\n\n---\n\n## State Definitions\n\n### OK\n\nThe component completed its most recent execution cycle without errors.\nAll invariants hold. Outputs are valid and within expected latency.\n\n### DEGRADED\n\nThe component is operational but one or more of the following conditions apply:\n\n- **Partial Input**: One or more upstream inputs are stale, incomplete, or missing.\n- **Latency Breach**: Execution time exceeds the component's declared SLA.\n- **Confidence Drop**: Output confidence scores fall below the declared minimum threshold.\n- **Upstream Degradation**: A direct upstream component reports DEGRADED or FAILED.\n\nWhen DEGRADED, the component MUST:\n1. Continue producing output (best-effort).\n2. Set `degraded_reason` to a non-null descriptive string.\n3. Tag all outputs with `degraded: true` metadata.\n\n### FAILED\n\nThe component cannot produce valid output. One or more of the following conditions apply:\n\n- **Critical Input Missing**: A mandatory upstream input is unavailable.\n- **Invariant Violation**: A declared invariant is breached.\n- **Unrecoverable Error**: An exception or crash prevents execution.\n- **Consecutive Failure Threshold**: `failure_count` exceeds the component's declared `max_consecutive_failures` (default: 3).\n\nWhen FAILED, the component MUST:\n1. Stop producing output (Fail-Closed).\n2. Emit a `COMPONENT_FAILED` event to the observability bus.\n3. Increment `failure_count`.\n\n---\n\n## Recovery Detection\n\nA component transitions from FAILED \u2192 OK when:\n\n1. All mandatory upstream inputs are available and fresh.\n2. The component completes a full execution cycle without error.\n3. All declared invariants hold.\n4. `failure_count` resets to 0.\n\nA component transitions from DEGRADED \u2192 OK when:\n\n1. All conditions that caused DEGRADED are resolved.\n2. `degraded_reason` is set back to null.\n\nRecovery MUST be logged with the same visibility as failure.\n\n---\n\n## Required Observability Signals\n\nEvery component MUST emit:\n\n| Signal | Type | Frequency |\n|:---|:---|:---|\n| `health.status` | Gauge (`OK=0, DEGRADED=1, FAILED=2`) | Every execution cycle |\n| `health.last_success` | Timestamp | On each OK cycle |\n| `health.failure_count` | Counter | On each failure |\n| `health.degraded_reason` | String event | On DEGRADED entry/change |\n| `health.recovery` | Event | On transition from DEGRADED/FAILED \u2192 OK |\n| `health.latency_ms` | Histogram | Every execution cycle |\n\n---\n\n## Integration with Existing Component YAML\n\nEach component YAML in `docs/memory/05_components/` MUST include:\n\n```yaml\nhealth_contract: docs/memory/05_components/component_health_contract.md\n\nhealth_fields:\n  - health_status\n  - last_success_timestamp\n  - failure_count\n  - degraded_reason\n\nhealth_observability:\n  - health.status\n  - health.last_success\n  - health.failure_count\n  - health.degraded_reason\n  - health.recovery\n  - health.latency_ms\n\nhealth_invariants:\n  - Health status must be evaluated every execution cycle.\n  - FAILED status must trigger Fail-Closed behavior.\n  - Recovery must be logged with equal visibility to failure.\n  - degraded_reason must be non-null when status is DEGRADED.\n```\n\n---\n\n## Non-Goals\n\n- This contract does NOT define component-specific invariants (those remain in each YAML).\n- This contract does NOT define alerting thresholds (those belong in observability configuration).\n- This contract does NOT replace failure_modes (those are component-specific scenarios).\n\n---\n\n*Authority: Canonical. All components MUST comply.*\n\n## Reference Implementation\n\nFor a canonical example of this contract in action, see:\n- **Source**: `src/layers/macro_layer.py` (Class `MacroLayer`, `ComponentHealth`)\n- **Tests**: `tests/test_macro_layer.py`\n\n",
  "05_components/component_validation_report.md": "# Component Validation Report\n\n## Executive Summary\nAll 19 component definitions in `docs/memory/05_components/` have been audited and updated to ensure 100% alignment with the `Domain Model`, `Macro Architecture`, and `Success Criteria`.\n\n## Resolved Validations\n\n### 1. Mandatory Fields Presence\n- **Status**: \u2705 PASS\n- **Remediation**: Added `upstream_inputs`, `downstream_outputs`, `observability`, and `success_criteria_refs` to all YAML files.\n\n### 2. Domain Entity Alignment\n- **Status**: \u2705 PASS\n- **Remediation**: Standardized terminology to match `domain_model.md`. Generic references replaced with canonical entities (e.g., `RegimeState`, `NarrativeObject`, `CandidateAssessment`).\n\n### 3. Hierarchical Integrity\n- **Status**: \u2705 PASS\n- **Remediation**: Updated `forbidden` sections to explicitly prevent layer-skipping (e.g., L6 lenses bypassing L4 permissions).\n\n### 4. Success Criteria Mapping\n- **Status**: \u2705 PASS\n- **Remediation**: Linked every component to its corresponding behavioral condition in `docs/memory/02_success/success_criteria.md`.\n\n---\n\n## Identified Conflicts & Open Questions\n\n| ID | Type | Conflict Description | Resolution / Status |\n| :--- | :--- | :--- | :--- |\n| **RC-3** | Conflict | **Narrative Engine (L2)** requires **Regime Engine (L1)** context but is not yet wired in implementation. | **Architecture Enforced**: Invariant added to `narrative_engine.yaml` forbidding execution without L1 context. |\n| **RC-4** | Gap | **Fundamental Lens (L6)** lacks active data ingestion for financial statements. | **Deffered**: Component returns `INSUFFICIENT_DATA` until AlphaVantage endpoint is wired. |\n| **OC-1** | Question | **Momentum Engine** (Legacy Scanner) overlaps with **Technical Lens (L6)** signals. | **Resolved**: Momentum Engine downgraded to \"Support Service\" (Scanner Feed); Technical Lens is the cognitive authority for discovery. |\n\n## Observability & Success Refs Coverage\n\n| Component | Observability | Success Criteria Ref |\n| :--- | :--- | :--- |\n| **L0 Ingestion** | Pipeline Health, Quality Score | Gate 1 (Ingestion) |\n| **L1 Regime** | Transition Logs, Confidence | L1 (Regime) |\n| **L2 Narrative** | Lifecycle, Source Attribution | L1 (Explainability) |\n| **L3 Meta** | Trust Distribution, Conflicts | L1 (Regime Context) |\n| **L4 Factor** | Permission Logs, Strength | L1 (Regime Context) |\n| **L5 Strategy** | Lifecycle Trace, Registry Hits | Phase Exit Criteria |\n| **L6 Lenses** | Candidate Volume, Rationale | L6-L7 (Discovery) |\n| **L7 Convergence** | Convergence Distribution | L6-L7 (Discovery) |\n| **L8 Constraints** | Rejection Rate, Budget | L8-L9 (Portfolio) |\n| **L9 Portfolio** | Flag Frequency, Severity | L8-L9 (Portfolio) |\n| **Dashboard** | Session Analytics, Latency | Dashboard Success |\n\n## Conclusion\nThe component library is now structurally sound and epistemically honest. All \"TBD\" and \"Missing\" gaps have been filled using current project memory. No new infrastructure or logic was invented.\n",
  "06_data/data_contracts.md": "# Data Contracts\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> **Conflict Handling**: Where legacy source docs conflict with Domain Model, mark OPEN_CONFLICT.\n\n---\n\n## 1. Source Systems\n\n### 1.1 Alpha Vantage (US Market)\n\n| Property | Value |\n| :--- | :--- |\n| **Owner** | Ingestion US (L0) |\n| **Base URL** | `https://www.alphavantage.co/query` |\n| **Auth** | API Key-based (stateless) |\n| **Protocol** | REST (HTTPS) |\n| **Rate Limits** | Token-bucket: `MAX_CALLS_PER_MINUTE`, `MAX_CALLS_PER_DAY` |\n| **Markets Served** | US (NYSE, NASDAQ) |\n| **Domain Entities** | Canonical Data (L0), RegimeState inputs (L1), FactorSignal inputs (L4) |\n\n**Endpoints Used**:\n\n| Endpoint | Purpose | Mapped Domain Entity | Refresh Cadence |\n| :--- | :--- | :--- | :--- |\n| `LISTING_STATUS` | Symbol universe (active stocks) | Symbol Master (L0) | Weekly (Monday) |\n| `TIME_SERIES_DAILY_ADJUSTED` | Daily OHLCV + adjustments | Canonical Data (L0) | Daily (17:00 ET) |\n| `TIME_SERIES_INTRADAY` | Intraday OHLCV (5min) | Canonical Data (L0) | Hourly / EOD (when rate permits) |\n| `INCOME_STATEMENT` | Annual/quarterly income | Fundamental Lens input (L6) | Quarterly (deferred \u2014 RC-4) |\n| `BALANCE_SHEET` | Balance sheet data | Fundamental Lens input (L6) | Quarterly (deferred \u2014 RC-4) |\n| `CASH_FLOW` | Cash flow statement | Fundamental Lens input (L6) | Quarterly (deferred \u2014 RC-4) |\n\n**Failure Modes**:\n- Rate limit exceeded (HTTP 429) \u2192 retry with exponential backoff\n- Symbol not found \u2192 log to retry queue, skip\n- API key exhaustion \u2192 rotate to next key in pool\n\n*(Sources: `docs/us_market_engine_design.md`, `docs/contracts/proxy_dependency_contracts.md`)*\n\n---\n\n### 1.2 Angel One SmartAPI (India Market)\n\n| Property | Value |\n| :--- | :--- |\n| **Owner** | Ingestion India (L0) |\n| **WebSocket URL** | `ws://smartapisocket.angelone.in/smart-stream` |\n| **REST Base** | SmartAPI REST endpoints |\n| **Auth** | Session-based (Login/Token) |\n| **Protocol** | WebSocket v2 (LTP Mode, binary ticks) + REST fallback |\n| **Capacity** | Up to 1000 instrument tokens per session |\n| **Markets Served** | India (NSE) |\n| **Domain Entities** | Canonical Data (L0), MomentumEngine signals (Scanner) |\n\n**Data Streams**:\n\n| Stream | Purpose | Mapped Domain Entity | Refresh Cadence |\n| :--- | :--- | :--- | :--- |\n| WebSocket LTP | Real-time tick data (~200 symbols) | Canonical Data (L0) | Continuous (market hours 09:00\u201315:45 IST) |\n| REST Historical | Intraday OHLC backfill | Canonical Data (L0) | On-demand / restart recovery |\n| `instrument_master.json` | Token-to-symbol mapping | Symbol Master (L0) | Daily (pre-market) |\n\n**Failure Modes**:\n- WebSocket disconnect \u2192 auto-reconnect with exponential backoff\n- Binary parse error \u2192 skip tick, log anomaly\n- REST fallback available if WebSocket is unstable\n\n*(Sources: `docs/INDIA_WEBSOCKET_ARCHITECTURE.md`, `docs/contracts/RAW_ANGEL_INTRADAY_SCHEMA.md`)*\n\n---\n\n### 1.3 Event Sources (News / Macro)\n\n| Property | Value |\n| :--- | :--- |\n| **Owner** | Ingestion Events (L0 sub-pipeline) |\n| **Sources** | Financial news APIs, macro event calendars, earnings announcements |\n| **Protocol** | REST / RSS / Push (source-dependent) |\n| **Markets Served** | US, India (cross-market) |\n| **Domain Entities** | NarrativeObject inputs (L2) |\n| **Status** | Implementation deferred (RQ-6) |\n\n**Invariants**:\n- Events timestamped at source publication time, not ingestion time\n- Events are immutable after ingestion\n- Interpretation is Narrative Engine's responsibility, not the ingestion layer's\n\n*(Source: `docs/memory/05_components/ingestion_events.yaml`)*\n\n---\n\n## 2. Data Schemas\n\n### 2.1 US Market OHLCV \u2014 Daily (Canonical)\n\n| Column | Type | Description | Nullable |\n| :--- | :--- | :--- | :--- |\n| `timestamp` | `datetime64[ns, UTC]` | Candle open time (UTC) | NO |\n| `symbol` | `string` | Ticker symbol (e.g., AAPL) | NO |\n| `open` | `float64` | Raw open price | NO |\n| `high` | `float64` | Raw high price | NO |\n| `low` | `float64` | Raw low price | NO |\n| `close` | `float64` | Raw close price | NO |\n| `volume` | `int64` | Session volume | NO |\n| `adj_close` | `float64` | Adjusted close (from AV) | NO |\n| `dividend_amt` | `float64` | Dividend amount | YES (default 0.0) |\n| `split_coef` | `float64` | Split coefficient | YES (default 1.0) |\n\n**Storage**: `data/analytics/us/prices/{frequency}/`\n**Format**: Apache Parquet\n**Timezone**: UTC (strict)\n**Mapped Domain Entity**: Canonical Data (L0)\n\n*(Source: `docs/us_market_engine_design.md`)*\n\n---\n\n### 2.2 India Market \u2014 Raw Intraday OHLC\n\n| Column | Type | Description | Nullable |\n| :--- | :--- | :--- | :--- |\n| `symbol` | `string` | Trading symbol (e.g., INFY) | NO |\n| `exchange` | `string` | Exchange segment (e.g., NSE) | NO |\n| `interval` | `string` | Candle interval (e.g., ONE_MINUTE) | NO |\n| `timestamp` | `ISO8601` | Time of candle (IST, UTC+05:30) | NO |\n| `open` | `float` | Opening price | NO |\n| `high` | `float` | High price | NO |\n| `low` | `float` | Low price | NO |\n| `close` | `float` | Closing price | NO |\n| `volume` | `integer` | Traded volume | NO |\n| `source` | `string` | Fixed: `ANGEL_SMARTAPI` | NO |\n| `ingestion_ts` | `ISO8601` | System persistence timestamp | NO |\n\n**Storage**: `data/raw/api_based/angel/intraday_ohlc/`\n**Format**: JSON Lines (.jsonl)\n**Naming**: `{exchange}_{symbol}_{date}.jsonl`\n**Timezone**: IST (UTC+05:30)\n**Mapped Domain Entity**: Canonical Data (L0)\n\n*(Source: `docs/contracts/RAW_ANGEL_INTRADAY_SCHEMA.md`)*\n\n---\n\n### 2.3 India Market \u2014 Processed Intraday (Canonical)\n\n| Column | Type | Description | Nullable |\n| :--- | :--- | :--- | :--- |\n| `symbol` | `string` | Trading symbol | NO |\n| `exchange` | `string` | Exchange segment | NO |\n| `timestamp` | `Datetime64[ns, UTC+05:30]` | Standardized timezone-aware | NO |\n| `open` | `Float64` | Opening price | NO |\n| `high` | `Float64` | Highest price | NO |\n| `low` | `Float64` | Lowest price | NO |\n| `close` | `Float64` | Closing price | NO |\n| `volume` | `Int64` | Traded volume | NO |\n\n**Storage**: `data/processed/candles/intraday/`\n**Format**: Apache Parquet\n**Naming**: `{exchange}_{symbol}_1m.parquet`\n**Dedup Key**: `(symbol, timestamp)` \u2014 latest `ingestion_ts` wins\n**Sort Order**: `timestamp ASC` (strict)\n**Mapped Domain Entity**: Canonical Data (L0)\n\n**Processing Rules**:\n- Idempotent: same raw input \u2192 same Parquet output\n- Source metadata (`source`, `ingestion_ts`) stripped at processing\n- No strategy-specific fields (no RSI, VWAP \u2014 those belong to Technical Lens L6)\n- Volume must be non-negative\n\n*(Source: `docs/contracts/PROCESSED_INTRADAY_SCHEMA.md`)*\n\n---\n\n### 2.4 India Market \u2014 LTP Snapshots\n\n| Column | Type | Description | Nullable |\n| :--- | :--- | :--- | :--- |\n| `symbol` | `string` | Trading symbol | NO |\n| `exchange` | `string` | Exchange segment | NO |\n| `ltp` | `float` | Last Traded Price | NO |\n| `open` | `float` | Day's open | NO |\n| `high` | `float` | Day's high | NO |\n| `low` | `float` | Day's low | NO |\n| `close` | `float` | Previous day's close | NO |\n| `timestamp` | `ISO8601` | Snapshot time | NO |\n| `source` | `string` | Fixed: `ANGEL_SMARTAPI` | NO |\n| `ingestion_ts` | `ISO8601` | System persistence timestamp | NO |\n\n**Storage**: `data/raw/api_based/angel/ltp_snapshots/`\n**Format**: JSON Lines (.jsonl)\n**Mapped Domain Entity**: Canonical Data (L0)\n\n*(Source: `docs/contracts/RAW_ANGEL_INTRADAY_SCHEMA.md`)*\n\n---\n\n### 2.5 Factor Context (Cognitive State)\n\n| Section | Fields | Type | Mapped Domain Entity |\n| :--- | :--- | :--- | :--- |\n| `momentum` | `level`, `acceleration`, `breadth`, `dispersion`, `persistence`, `time_in_state` | `{state: enum, confidence: float}` | FactorSignal (L4) |\n| `value` | `spread`, `trend`, `dispersion`, `mean_reversion_pressure` | `{state: enum, confidence: float}` | FactorSignal (L4) |\n| `quality` | `signal`, `stability`, `defensiveness`, `drawdown_resilience` | `{state: enum, confidence: float}` | FactorSignal (L4) |\n| `volatility` | `regime`, `dispersion` | `{state: enum, confidence: float}` | FactorSignal (L4) |\n| `meta` | `factor_alignment`, `momentum_quality`, `alpha_environment`, `notes` | `enum / string` | Meta-Analysis (L3) |\n\n**Storage**: `docs/evolution/context/{profile_id}/{window_id}/`\n**Format**: YAML / JSON\n**Refresh**: Per evaluation window\n**Invariant**: Observational only \u2014 describes *what is*, not *what to do*\n\n*(Source: `docs/evolution/context/factor_context_schema.md`)*\n\n---\n\n### 2.6 Regime Input Contract (Minimal Required)\n\n| Symbol | Role | Description | Criticality |\n| :--- | :--- | :--- | :--- |\n| **SPY** | Equity Proxy | S&P 500 ETF | BLOCKING |\n| **QQQ** | Equity Proxy | NASDAQ 100 ETF | BLOCKING |\n| **VIX** | Volatility Proxy | CBOE Volatility Index | BLOCKING |\n| **^TNX** | Rates Proxy | 10-Year Treasury Yield | BLOCKING |\n| **^TYX** | Rates Proxy | 30-Year Treasury Yield | BLOCKING |\n| **HYG** | Credit Proxy | High Yield Corporate Bond ETF | BLOCKING |\n| **LQD** | Credit Proxy | Investment Grade Bond ETF | BLOCKING |\n\n**Mapped Domain Entity**: RegimeState (L1)\n**Minimum History**: \u2265 3 years (756 trading days)\n**Frequency**: Daily bars only (close prices)\n**Temporal Alignment**: Intersection only \u2014 no forward-fill, no interpolation\n**Failure**: Missing symbol OR insufficient history \u2192 `regime = NOT_VIABLE`\n\n*(Source: `docs/epistemic/contracts/minimal_regime_input_contract.md`)*\n\n---\n\n### 2.7 Strategy Registry Entry (Schema)\n\n| Block | Key Fields | Mapped Domain Entity |\n| :--- | :--- | :--- |\n| Identity | `strategy_id`, `name`, `version`, `owner` | Strategy Selection (L5) |\n| Governance | `lifecycle_state`, `created_under_decision` | Strategy Selection (L5) |\n| Dependencies | `required_beliefs`, `required_policies`, `required_factors` | Meta-Analysis (L3), FactorSignal (L4) |\n| Orchestration | `task_graph_ref`, `execution_mode` | Strategy Selection (L5) |\n| Audit | `registration_ledger_entry`, `dids`, `audit_log` | Governance (cross-cutting) |\n\n**Invariant**: No executable logic (functions, imports, thresholds, conditions) permitted in registry entries\n**Lifecycle**: `DRAFT \u2192 ACTIVE \u2192 SUSPENDED \u2192 RETIRED` (terminal, irreversible)\n\n*(Source: `docs/contracts/strategy_registry_schema.md`)*\n\n---\n\n### 2.8 Paper Portfolio (Diagnostic Output)\n\n| Field | Type | Mapped Domain Entity |\n| :--- | :--- | :--- |\n| `strategy_id` | `string` | Strategy Selection (L5) |\n| `activated` | `boolean` | Strategy Selection (L5) |\n| `weight` | `float` | Convergence (L7) |\n| `overlap_score` | `float` | PortfolioDiagnostic (L9) |\n| `diversification_score` | `float` | PortfolioDiagnostic (L9) |\n| `redundancy_clusters` | `list[strategy_id]` | PortfolioDiagnostic (L9) |\n\n**Invariant**: `execution_disabled: true`, `capital_committed: 0.0`\n\n*(Source: `docs/evolution/portfolio/paper_portfolio_schema.md`)*\n\n---\n\n### 2.9 Watchlist Item (Final Output)\n\n| Field | Type | Mapped Domain Entity |\n| :--- | :--- | :--- |\n| `symbol` | `string` | OpportunityCandidate (L6) |\n| `unified_score` | `float` | CandidateAssessment (L7) |\n| `regime_alignment` | `float` | RegimeState (L1) |\n| `flags[]` | `list[string]` | PortfolioDiagnostic (L9) |\n| `severity` | `enum` | PortfolioDiagnostic (L9) |\n| `sizing_suggestion` | `string` | ExecutionEnvelope (L8) |\n\n**Storage**: `data/output/watchlist_{date}.json`\n**Consumer**: Dashboard \u2192 Human Operator\n\n*(Source: `docs/memory/04_architecture/data_flow.md`)*\n\n---\n\n### 2.10 Watcher Diagnostic Schemas\n\n| Watcher | Output File | Key Fields | Mapped Domain Entity |\n| :--- | :--- | :--- | :--- |\n| Momentum Emergence | `momentum_emergence.json` | `state` (NONE/EMERGING_ATTEMPT/CONFIRMING/PERSISTENT), `contributing_factors`, `confidence` | FactorSignal (L4) |\n| Dispersion Breakout | `dispersion_breakout.json` | `state` (NONE/EARLY_BREAKOUT/CONFIRMED_BREAKOUT), `contributing_factors`, `confidence` | FactorSignal (L4) |\n\n**Storage**: `docs/evolution/evaluation/{namespace}/{window_id}/`\n**Invariant**: Diagnostic only \u2014 does not trigger action\n\n*(Sources: `docs/evolution/watchers/momentum_emergence_schema.md`, `docs/evolution/watchers/dispersion_breakout_schema.md`)*\n\n---\n\n## 3. Proxy Sets & Dependencies\n\n### 3.1 US Market Proxy Set\n\n| Category | Symbol | Semantic Role | Mapped Domain Entity | Ingestion Status |\n| :--- | :--- | :--- | :--- | :--- |\n| Equity | **SPY** | Benchmark | RegimeState (L1) | ACTIVE |\n| Equity | **QQQ** | Growth/Tech | RegimeState (L1) | ACTIVE |\n| Equity | **IWM** | Small-Cap / Breadth | RegimeState (L1) | COVERAGE GAP |\n| Equity | **DIA** | Blue Chip / Cyclical | RegimeState (L1) | COVERAGE GAP |\n| Volatility | **VIX** | Fear Gauge | RegimeState (L1) | ACTIVE |\n| Rates | **US02Y** | Fed Policy Anchor | RegimeState (L1) | COVERAGE GAP |\n| Rates | **US10Y** | Valuation Anchor | RegimeState (L1) | ACTIVE |\n| Macro | **DXY** | Dollar / Liquidity | RegimeState (L1) | COVERAGE GAP |\n| Macro | **USOIL** | Inflation / Energy | RegimeState (L1) | COVERAGE GAP |\n\n**Constraint**: If `Benchmark Equity` or `Volatility Gauge` missing \u2192 `RegimeState = UNKNOWN` (Fail Closed)\n\n*(Sources: `docs/contracts/market_proxy_sets.md`, `docs/data/coverage_gap_register.md`)*\n\n---\n\n### 3.2 India Market Proxy Set\n\n| Category | Symbol | Semantic Role | Mapped Domain Entity | Ingestion Status |\n| :--- | :--- | :--- | :--- | :--- |\n| Equity | **NIFTY50** | Benchmark | RegimeState (L1) | NOT INGESTED (P0 Gap) |\n| Equity | **BANKNIFTY** | Financials / Breadth | RegimeState (L1) | NOT INGESTED (P1 Gap) |\n| Equity | **CNXIT** | Tech / Export | FactorSignal (L4) | NOT INGESTED |\n| Equity | **NIFTYSMLCAP100** | Retail Sentiment | FactorSignal (L4) | NOT INGESTED |\n| Volatility | **INDIAVIX** | Fear Gauge | RegimeState (L1) | NOT INGESTED (P1 Gap) |\n| Rates | **IN10Y** | Valuation Anchor | RegimeState (L1) | NOT INGESTED |\n| Macro | **USDINR** | FII Flows / Currency | RegimeState (L1) | NOT INGESTED |\n| Macro | **UKOIL** | Import Bill / Inflation | RegimeState (L1) | NOT INGESTED |\n| Pre-Market | **GIFTNIFTY** | Gap Indicator | RegimeState (L1) | NOT INGESTED |\n\n**Regime Confidence**: LOW \u2014 current India regime uses Reliance as single-stock surrogate (deprecated)\n**Upgrade Criteria**: All canonical proxies ACTIVE + \u2265 `required_history_days` + no stale data (> 2 trading days)\n\n*(Sources: `docs/contracts/market_proxy_sets.md`, `docs/contracts/india_proxy_sets.json`, `docs/data/coverage_gap_register.md`)*\n\n---\n\n### 3.3 Proxy Dependency Binding Rules\n\n| Layer | Required Proxy Roles | Fallback Policy |\n| :--- | :--- | :--- |\n| Regime (L1) | Benchmark Equity, Volatility Gauge | Fail Closed (`UNKNOWN`) |\n| Factor (L4) \u2014 Momentum | Benchmark Equity + Growth Proxy | Use Benchmark Only |\n| Factor (L4) \u2014 Volatility | Volatility Gauge | Computed StdDev |\n| Factor (L4) \u2014 Liquidity | Rates Anchor + Liquidity Proxy | `UNAVAILABLE` |\n| Factor (L4) \u2014 Breadth | Benchmark vs Sector Proxies | `UNAVAILABLE` |\n\n**Invariant**: No layer may access raw data directly (e.g., `SPY.csv`). Must use proxy role abstraction: `get_proxy(market, 'benchmark_equity')`\n\n*(Source: `docs/contracts/proxy_dependency_contracts.md`)*\n\n---\n\n## 4. Data Lineage Rules\n\n### 4.1 Isolation Rules\n\n| Rule | Description |\n| :--- | :--- |\n| **Strategy Code Isolation** | Strategy modules must NOT read from `data/raw/`. Consume only `data/processed/` or `data/analytics/`. |\n| **Ingestion Path Isolation** | API-based (`data/raw/api_based/`) and File-based (`data/raw/file_based/`) remain in separate hierarchies. |\n| **Market Isolation** | India and US data are physically separate. No shared state, no cross-imports. |\n| **Merging Rule** | Merging across sources happens only in the processing layer, never in raw. |\n\n### 4.2 Immutability\n\n| Rule | Description |\n| :--- | :--- |\n| **Raw Immutability** | Once written to `data/raw/`, data is immutable. Append-only growth allowed. |\n| **Correction via Versioning** | Corrections are new versions, not in-place edits. |\n| **Staleness over Fabrication** | Mocking data to fill gaps is STRICTLY PROHIBITED. |\n\n### 4.3 Data Lake Layers\n\n| Layer | Alias | Content | Format | Mutation |\n| :--- | :--- | :--- | :--- | :--- |\n| **Raw** | Bronze | Direct API output, duplicates present | JSONL, CSV | Append-only |\n| **Processed** | Silver | Cleaned, deduped, standardized | Parquet | Overwrite-partition |\n| **Analytics** | Gold | Enriched, quality-checked, indicators | Parquet | Idempotent rebuild |\n\n*(Sources: `docs/contracts/RAW_DATA_LINEAGE_RULES.md`, `docs/epistemic/data_retention_policy.md`)*\n\n---\n\n## 5. Temporal Truth Model\n\n### 5.1 Three Temporal Planes\n\n| Plane | Abbreviation | Definition | Owner | Mapped Domain Entity |\n| :--- | :--- | :--- | :--- | :--- |\n| Raw Data Time | **RDT** | Timestamp of most recent external data | Ingestion (L0) | Canonical Data |\n| Canonical Truth Time | **CTT** | Latest validated, cleaned, accepted timestamp | Validation (L0\u2192L1 boundary) | Canonical Data |\n| Truth Epoch | **TE** | Timestamp of last complete governed evaluation | Governance (cross-cutting) | RegimeState, NarrativeObject |\n\n**Invariant**: `TE \u2264 CTT \u2264 RDT` always. `TE > CTT` is a corrupt state.\n\n### 5.2 Temporal States\n\n| State | Condition | Description |\n| :--- | :--- | :--- |\n| **SYNCHRONIZED** | `RDT == CTT == TE` | System fully up-to-date |\n| **PENDING INGESTION** | `RDT > CTT` | Raw data exists, not yet validated |\n| **PENDING EVALUATION** | `CTT > TE` | Data validated, intelligence not yet run |\n| **STALE / DRIFT** | `CTT >> TE` | System significantly behind |\n| **CORRUPT** | `TE > CTT` | Impossible state \u2014 system integrity violation |\n\n### 5.3 Temporal Rules\n\n| Rule | Enforcement |\n| :--- | :--- |\n| No `datetime.now()` | All temporal logic relative to TE |\n| No \"latest\" without context | Must scope as RDT, CTT, or TE |\n| Explicit advancement only | TE does not auto-advance; requires governance gate |\n| Market-specific streams | `TE_US` and `TE_INDIA` move independently |\n| No mixed-frequency | Daily bars only for regime; no intraday for regime computation |\n\n### 5.4 Temporal Persistence\n\n| Time | Store |\n| :--- | :--- |\n| RDT | File system (raw layer) |\n| CTT | File system (canonical/cleaned layer) |\n| TE | `global_state.json` or `truth_manifest.json` |\n\n*(Source: `docs/governance/temporal_truth_contract.md`)*\n\n---\n\n## 6. Retention & Archival Policy\n\n| Data Category | Scope | Retention | Mapped Domain Entity |\n| :--- | :--- | :--- | :--- |\n| **Epistemic Artifacts** | Narratives, Decisions, Journals | **PERMANENT** (archive after 3 years, never delete) | NarrativeObject (L2), all decision state |\n| **Cognitive State** | RegimeState, FactorState, NarrativeObject | **PERMANENT** (epistemic \u2014 decision context) | RegimeState (L1), FactorSignal (L4) |\n| **Trust Scores** | Meta-Analysis intermediate outputs | **1 year active \u2192 archive** | Meta-Analysis (L3) |\n| **Audit Logs** | JSON logs (`logs/*.json`) | **90 days active \u2192 1 year archive \u2192 delete** | Governance |\n| **Raw Input Data** | Ingested JSON/Parquet (`data/raw/`) | **1 year active \u2192 cold storage** | Canonical Data (L0) |\n| **Canonical Data** | Processed Parquet (`data/analytics/`) | **Indefinite** (Source of Truth) | Canonical Data (L0) |\n| **Derived / Cache** | Intermediate signals (`data/cache/`) | **Volatile** (regenerable) | Transient |\n| **Opportunity Candidates** | L6 lens outputs | **Volatile** (ephemeral unless promoted) | OpportunityCandidate (L6) |\n| **Watchlist Items** | Final output JSON | **Indefinite** (decision record) | CandidateAssessment (L7) |\n\n**Deletion Protocol**: Use of `rm` or `delete` on covered paths requires:\n1. Verification against retention policy\n2. Human approval (via Drift Detector flag or explicit command)\n\n*(Sources: `docs/epistemic/data_retention_policy.md`, `docs/memory/04_architecture/data_flow.md` RQ-7)*\n\n---\n\n## 7. Ingestion Guarantees\n\n### 7.1 US Pipeline\n\n| Guarantee | Description |\n| :--- | :--- |\n| **Append-Only Raw** | Raw JSON files never overwritten |\n| **Idempotent Processing** | Same raw input \u2192 identical Parquet output |\n| **Rate Limit Safety** | Token-bucket limiter; retry queue for failed symbols |\n| **Dedup at Silver** | Dedup by `(symbol, timestamp)`; latest `ingestion_ts` wins |\n| **Quality Checks** | Zero-volume removal, gap detection at Gold layer |\n\n**Schedule**:\n\n| Job | Frequency | Description |\n| :--- | :--- | :--- |\n| `US_Symbol_Refresh` | Weekly (Monday) | Updates `symbols.csv` from `LISTING_STATUS` |\n| `US_Daily_Close_Fetch` | Daily (17:00 ET) | `TIME_SERIES_DAILY_ADJUSTED`, `outputsize=compact` |\n| `US_Backfill_Worker` | Manual trigger | `outputsize=full`, strict rate limiting |\n\n---\n\n### 7.2 India Pipeline\n\n| Guarantee | Description |\n| :--- | :--- |\n| **Append-Only Raw** | JSONL files opened in append mode |\n| **Restart Recovery** | Fetches last 5 minutes on restart; duplicates handled downstream |\n| **WebSocket Reconnect** | Auto-reconnect with exponential backoff |\n| **Minute-Boundary Finalization** | Timer-based candle finalization (not tick-count) |\n\n**Schedule**:\n\n| Job | Frequency | Description |\n| :--- | :--- | :--- |\n| `start_india_momentum.ps1` | Market Open (09:00 IST) | Scheduled Task |\n| `stop_india_momentum.ps1` | Market Close (15:45 IST) | Scheduled Task |\n| REST fallback | On WebSocket instability | Manual switch |\n\n---\n\n### 7.3 Cross-Pipeline Invariants\n\n| Invariant | Description |\n| :--- | :--- |\n| Raw data never mutated | Corrections as new versions only |\n| India vs US physically separate | No shared state, no cross-imports |\n| All timestamps event-time based | Processing time ignored in logic |\n| Idempotent re-runs | Same input \u2192 identical output |\n| No forward-fill across symbols | Only intersection timestamps |\n| No mock data | Gaps are \"Known Knowns\"; mocking is PROHIBITED |\n\n---\n\n## 8. Dashboard API Contract (Read-Only)\n\n| Endpoint | Method | Purpose | Mapped Domain Entity |\n| :--- | :--- | :--- | :--- |\n| `/api/system/status` | GET | System state, last TE, governance status | Governance |\n| `/api/layers/health` | GET | Layer freshness (OK/STALE/ERROR) | All layers |\n| `/api/market/snapshot` | GET | Regime, liquidity, dispersion, momentum | RegimeState (L1), FactorSignal (L4) |\n| `/api/watchers/timeline` | GET | Historical watcher states | FactorSignal (L4) |\n| `/api/strategies/eligibility` | GET | Strategy gating status | Strategy Selection (L5) |\n| `/api/meta/summary` | GET | Meta-analysis findings | Meta-Analysis (L3) |\n| `/api/system/activation_conditions` | GET | Static epistemic rules | Governance |\n\n**Invariants**:\n- All endpoints are **read-only** (no mutations)\n- Provenance visible: exact tickers used in proxy roles displayed\n- Stale proxies cause corresponding UI components to grey out\n- No execution controls exposed\n\n*(Source: `docs/dashboard/api_schema.md`)*\n\n---\n\n## 9. Coverage Gaps (Known)\n\n### 9.1 US Market\n\n| Symbol | Priority | Impact | Remediation |\n| :--- | :--- | :--- | :--- |\n| **IWM** | P2 | No breadth/domestic economy validation | Ingest via AlphaVantage |\n| **DIA** | P3 | No industrial/cyclical rotation signal | Ingest via AlphaVantage |\n| **US02Y** | P2 | Lower fidelity on Fed rate expectations | Ingest yield series |\n| **DXY** | P2 | No direct FX headwinds signal | Ingest DXY or UUP ETF |\n| **USOIL** | P2 | No inflation/energy input | Ingest WTI/USO |\n| **Fundamental Data** | P2 | Fundamental Lens returns `INSUFFICIENT_DATA` | AlphaVantage FUNDAMENTAL_DATA (RC-4) |\n\n### 9.2 India Market\n\n| Symbol | Priority | Impact | Remediation |\n| :--- | :--- | :--- | :--- |\n| **NIFTY50** | **P0 CRITICAL** | Reliance as proxy is mathematically unsound | NSE Index Data feed required |\n| **BANKNIFTY** | P1 | Banking sector (35% of market) invisible | Ingest Bank Nifty Index |\n| **INDIAVIX** | P1 | No authentic fear metric for India | Ingest India VIX |\n| **USDINR** | P2 | Currency risk unmodelled | Ingest USDINR pair |\n| **NIFTYSMLCAP100** | P2 | Retail sentiment invisible | Ingest Smallcap 100 |\n\n**Regime Confidence Impact**:\n- **US**: HIGH (SPY/QQQ/VIX/10Y cover ~80% of signal variance)\n- **India**: LOW (single-stock surrogate; treat India regime as \"stock-specific\" until index data is live)\n\n*(Source: `docs/data/coverage_gap_register.md`, `docs/contracts/india_proxy_sets.json`)*\n\n---\n\n## 10. Evaluation Profile Contract\n\n| Field | Constraint | Mapped Domain Entity |\n| :--- | :--- | :--- |\n| `execution.shadow_only` | ALWAYS `true` | Governance |\n| `factor.override` | ALWAYS `null` (FORBIDDEN) | FactorSignal (L4) |\n| `governance.ledger_required` | ALWAYS `true` | Governance |\n| `governance.did_required` | ALWAYS `true` | Governance |\n| `invariants.forbid_real_execution` | ALWAYS `true` | Governance |\n| `invariants.forbid_strategy_mutation` | ALWAYS `true` | Strategy Selection (L5) |\n| `invariants.forbid_regime_fallback` | ALWAYS `true` | RegimeState (L1) |\n\n**Profile Modes**: `historical` (detect regime from data) | `forced_regime` (override with rationale)\n**Windowing**: `single` | `rolling` (with step) | `anchored` (fixed dates)\n\n*(Source: `docs/evolution/evaluation_profiles/schema.md`)*\n\n---\n\n## Legacy Source Mapping\n\n| This Section | Legacy Source Document(s) |\n| :--- | :--- |\n| \u00a71.1 Alpha Vantage | `docs/us_market_engine_design.md` |\n| \u00a71.2 SmartAPI | `docs/INDIA_WEBSOCKET_ARCHITECTURE.md`, `docs/contracts/RAW_ANGEL_INTRADAY_SCHEMA.md` |\n| \u00a71.3 Event Sources | `docs/memory/05_components/ingestion_events.yaml` (RQ-6) |\n| \u00a72.1 US OHLCV | `docs/us_market_engine_design.md` \u00a74 |\n| \u00a72.2 India Raw | `docs/contracts/RAW_ANGEL_INTRADAY_SCHEMA.md` |\n| \u00a72.3 India Processed | `docs/contracts/PROCESSED_INTRADAY_SCHEMA.md` |\n| \u00a72.5 Factor Context | `docs/evolution/context/factor_context_schema.md` |\n| \u00a72.6 Regime Input | `docs/epistemic/contracts/minimal_regime_input_contract.md` |\n| \u00a72.7 Strategy Registry | `docs/contracts/strategy_registry_schema.md` |\n| \u00a72.8 Paper Portfolio | `docs/evolution/portfolio/paper_portfolio_schema.md` |\n| \u00a72.10 Watchers | `docs/evolution/watchers/*.md` |\n| \u00a73 Proxy Sets | `docs/contracts/market_proxy_sets.md`, `docs/contracts/proxy_dependency_contracts.md`, `docs/contracts/india_proxy_sets.json` |\n| \u00a74 Lineage | `docs/contracts/RAW_DATA_LINEAGE_RULES.md` |\n| \u00a75 Temporal Truth | `docs/governance/temporal_truth_contract.md` |\n| \u00a76 Retention | `docs/epistemic/data_retention_policy.md` |\n| \u00a78 Dashboard API | `docs/dashboard/api_schema.md` |\n| \u00a79 Coverage Gaps | `docs/data/coverage_gap_register.md` |\n| \u00a710 Eval Profiles | `docs/evolution/evaluation_profiles/schema.md` |\n",
  "07_execution/runtime.md": "# Runtime & Execution Model\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> This document describes runtime *intent* \u2014 how the system is designed to behave at execution time.\n> No implementation details. No scripts. No code.\n\n---\n\n## 1. Orchestration Principles\n\nThe system is a **human-operated, locally-hosted intelligence platform**. There is no autonomous trading, no cloud-managed orchestrator, and no event-driven microservice fabric. The runtime model is deliberately simple and observable.\n\n**Core Principle**: The system observes, analyzes, and suggests. It does not act autonomously.\n\n| Principle | Description |\n| :--- | :--- |\n| **Local-First** | All processing runs on a single Windows machine. No cloud dependencies for core logic. |\n| **Batch-Primary** | US pipeline is batch-scheduled. India pipeline is streaming during market hours only. |\n| **Shadow-Only Execution** | No real market orders. All execution paths terminate at logging, not at a broker endpoint. |\n| **Human-Triggered Advancement** | System time (Truth Epoch) does not auto-advance. Requires explicit governance gate passage. |\n| **Idempotent Re-runs** | Any pipeline stage can be re-run on the same input with identical results. |\n\n*(Sources: `docs/contracts/execution_harness_contract.md`, `docs/epistemic/bounded_automation_contract.md`)*\n\n---\n\n## 2. Runtime Modes\n\n### 2.1 Batch Mode (US Market)\n\nThe US pipeline operates as a sequence of scheduled batch jobs. Each job runs to completion, produces artifacts, and exits. There is no long-running process during non-market hours.\n\n**Characteristics**:\n- REST API polling (Alpha Vantage)\n- Discrete job boundaries (one job = one data-fetch cycle)\n- Strict rate limiting (token-bucket: calls/minute, calls/day)\n- Failed symbols logged to retry queue for secondary pass\n- Append-only raw storage; idempotent Silver/Gold rebuilds\n\n**Scheduling Intent**:\n\n| Job | Frequency | Trigger | Purpose |\n| :--- | :--- | :--- | :--- |\n| Symbol Refresh | Weekly (Monday) | Scheduled Task | Update US symbol universe from `LISTING_STATUS` |\n| Daily Close Fetch | Daily (~17:00 ET) | Scheduled Task | Fetch `TIME_SERIES_DAILY_ADJUSTED` (compact) |\n| Intraday Catchup | Hourly (market hours) | Scheduled Task | Fetch `TIME_SERIES_INTRADAY` (5min), rate-permitting |\n| Backfill Worker | Manual trigger | Operator | Full-history fetch (`outputsize=full`), strict rate limiting |\n\n**Execution Sequence** (per daily cycle):\n1. Ingestion job fetches raw data \u2192 `data/raw/us/`\n2. Normalization produces staged Parquet \u2192 `data/staging/us/`\n3. Curation applies quality checks \u2192 `data/analytics/us/`\n4. CTT (Canonical Truth Time) updated upon successful validation\n5. TE (Truth Epoch) advancement requires separate governance gate\n\n*(Sources: `docs/us_market_engine_design.md`, `docs/governance/truth_advancement_gates.md`)*\n\n---\n\n### 2.2 Streaming Mode (India Market)\n\nThe India pipeline operates as a long-running process during market hours only. It receives real-time ticks via WebSocket and aggregates them into 1-minute OHLCV candles.\n\n**Characteristics**:\n- Single WebSocket connection, ~200 instrument tokens subscribed\n- Binary tick protocol (SmartAPI v2, LTP mode)\n- In-memory state per symbol (SymbolState: price, volume, VWAP, HOD candle accumulation)\n- Timer-based minute-boundary candle finalization (not tick-count)\n- Candles persisted to Parquet on each finalization\n- Momentum signal computation follows each candle batch\n\n**Lifecycle Intent**:\n\n| Phase | Time (IST) | Trigger | Behavior |\n| :--- | :--- | :--- | :--- |\n| **Start** | 09:00 | Scheduled Task | Authenticate, connect WebSocket, subscribe |\n| **Market Open** | 09:15 | First ticks arrive | Begin tick aggregation and candle finalization |\n| **Intraday** | 09:15\u201315:30 | Continuous | Tick \u2192 SymbolState \u2192 Candle \u2192 Signal pipeline |\n| **Close** | 15:45 | Scheduled Task | Unsubscribe, disconnect, finalize remaining candles, run EOD review |\n\n**Connection Resilience**:\n- Auto-reconnect with exponential backoff on WebSocket disconnect\n- REST fallback available if WebSocket is unstable\n- Restart recovery: fetches last 5 minutes of data (overlap handled by downstream dedup)\n\n**Capacity**:\n- Max tokens per session: 1000 (current: ~200, headroom: ~800)\n- Max concurrent connections: 3 per client code\n- Subscription modes: LTP (1), QUOTE (2), SNAP_QUOTE (3) \u2014 currently using LTP\n\n*(Sources: `docs/INDIA_WEBSOCKET_ARCHITECTURE.md`, `docs/contracts/RAW_ANGEL_INTRADAY_SCHEMA.md`)*\n\n---\n\n### 2.3 Evaluation Mode (EV-TICK)\n\nThe evaluation pipeline is a discrete, governed advancement cycle that processes validated data through the cognitive hierarchy. It is the mechanism by which the system \"thinks\" \u2014 advancing from raw observation to structured intelligence.\n\n**Characteristics**:\n- Triggered manually or via scheduled task\n- Each tick produces a discrete window ID (`TICK-<timestamp>`)\n- Strictly passive: no strategy execution, no capital allocation\n- Diagnostic watchers run read-only analysis\n- Every tick is logged to the evolution ledger\n\n**EV-TICK Cycle**:\n1. **Time Advancement**: Generate window ID, snapshot current CTT\n2. **Data Ingestion Check**: Verify all required symbols have data at CTT\n3. **Regime Context**: Compute or load regime state for the window\n4. **Factor Context**: Compute observational factor state\n5. **Watcher Diagnostics**: Run all passive watchers:\n   - Momentum Emergence Watcher\n   - Liquidity Compression Watcher\n   - Expansion Transition Watcher\n   - Dispersion Breakout Watcher\n6. **Artifact Persistence**: Write per-tick artifacts to `docs/evolution/ticks/`\n7. **Ledger Entry**: Log tick outcome to `docs/epistemic/ledger/evolution_log.md`\n\n**Safety Invariants**:\n- No import or invocation of `StrategyRunner` or `OrderManager`\n- No access to `CapitalState`\n- No feedback loop to parameters\n- Watchers are strictly read-only\n\n*(Sources: `docs/impact/2026-01-27__evolution__ev_tick.md`, `docs/evolution/evaluation_profiles/schema.md`)*\n\n---\n\n### 2.4 Shadow Execution Mode\n\nShadow mode is the system's mechanism for testing execution logic without real-world consequences. All execution paths terminate at a log sink, never at a broker endpoint.\n\n**Intent**: Prove that the decision pipeline generates correct, auditable outputs under real data conditions without risking capital.\n\n**Characteristics**:\n- `ShadowExecutionSink` replaces real broker API client\n- All decisions logged with full provenance (regime, factor, signal context)\n- Strategy activation matrices produced per market\n- Decision trace logs persisted as Parquet\n\n**Shadow Run Artifacts**:\n\n| Artifact | Format | Purpose |\n| :--- | :--- | :--- |\n| Strategy Activation Matrix | CSV | Which strategies triggered under what conditions |\n| Decision Trace Log | Parquet | Full decision chain with context snapshot |\n| Shadow Run Log | Markdown | Human-readable run summary with findings |\n\n**Shadow Run Sequence**:\n1. Load regime context for target market (US or India)\n2. Execute bulk evaluator (all strategies against current context)\n3. Execute decision replay (simulate downstream decision logic)\n4. Persist artifacts per-market under shadow run ID\n5. Verify safety invariants: no real execution, no broker calls, no capital state mutation\n\n**Enforcement State Model**:\n\n| State | Description | Impact |\n| :--- | :--- | :--- |\n| **SHADOW** | Logging only, no blocking | Regime does not affect any external system |\n| **ENFORCED** | Live strategy gating active | Regime state gates strategy eligibility (future) |\n\n*(Sources: `docs/irr/shadow_reality_run_log.md`, `docs/Regime_Dashboard_Runbook.md`)*\n\n---\n\n## 3. Execution Harness\n\nThe Execution Harness is the runtime orchestrator that transforms epistemic state into coordinated action. It is a **scheduler and enforcer**, not a decision-maker.\n\n### 3.1 Harness Responsibilities\n\n| Does | Does NOT |\n| :--- | :--- |\n| Consume epistemic state (regime, factors, beliefs) | Generate beliefs or infer regime |\n| Build and resolve task dependency graph (DAG) | Optimize strategies or override permissions |\n| Execute tasks in topological order | Cache or reuse stale state across cycles |\n| Enforce invariants and audit every action | Make market judgments or access raw data |\n\n### 3.2 Task Graph Model\n\nTasks are atomic units of work organized as a Directed Acyclic Graph (DAG). The harness resolves dependencies and executes in topological order.\n\n**Task Outcomes**:\n\n| Outcome | Meaning | Harness Response |\n| :--- | :--- | :--- |\n| `SUCCESS` | Task completed, output produced | Continue to dependent tasks |\n| `SKIPPED` | Preconditions not met, no error | Log skip reason, continue |\n| `FAILED` | Error during execution | Log error, evaluate failure policy |\n\n**Precondition Checks** (before every task):\n1. All required state objects present and valid\n2. All required permissions granted\n3. All dependency tasks completed successfully\n4. Input state not stale (within `MAX_STALENESS` window)\n5. Skill implementation registered and valid\n\n### 3.3 Minimal Task Graph (V1)\n\n```\nT1: VALIDATE STATE  \u2192  T2: CHECK REGIME  \u2192  T3: FILTER BELIEFS  \u2192  T4: EMIT ACTIONS\n```\n\n| Task | Purpose | Gate |\n| :--- | :--- | :--- |\n| **T1: Validate State** | Verify all required state present, not stale | `regime_state == None` \u2192 HALT |\n| **T2: Check Regime** | Evaluate regime gate | `EVENT_LOCK` or low confidence \u2192 SKIP |\n| **T3: Filter Beliefs** | Apply factor permission constraints | Remove blocked beliefs |\n| **T4: Emit Actions** | Output to audit log (shadow) or orders (future) | Shadow mode: log only |\n\n### 3.4 Harness State Machine\n\n```\nIDLE \u2192 VALIDATE \u2192 BUILD GRAPH \u2192 EXECUTE LOOP \u2192 FINALIZE \u2192 IDLE\n                    \u2193 (invalid)                    \u2193 (task fail)\n                  LOG + HALT              HANDLE FAILURE \u2192 EXECUTE LOOP\n```\n\n**Failure Handling**:\n\n| Failure Type | Policy |\n| :--- | :--- |\n| Single non-critical task fails | Mark `FAILED`, continue independent tasks |\n| Critical-path task fails | Mark cycle `DEGRADED`, log prominently |\n| Harness-level error | HALT \u2014 require human intervention |\n| Timeout exceeded | Terminate task, mark `FAILED`, continue |\n\n### 3.5 Harness Prohibitions\n\n| Prohibited | Correct Source |\n| :--- | :--- |\n| Infer regime from features | Receive from Regime (L1) |\n| Override factor permissions | Receive from Factor Analysis (L4) |\n| Generate beliefs from signals | Receive from Meta-Analysis (L3) |\n| Cache state across cycles | Require fresh state per cycle |\n| Reorder tasks for performance | Ordering is semantically meaningful |\n| Batch executions across cycles | Each cycle is atomic with fresh state |\n\n*(Source: `docs/contracts/execution_harness_contract.md`)*\n\n---\n\n## 4. Truth Epoch Advancement\n\nThe system's temporal heartbeat is governed by a three-gate advancement protocol. Time does not flow automatically.\n\n### 4.1 Gate 1: Ingestion Gate (Raw \u2192 Canonical)\n\n**Trigger**: Ingestion pipeline completion\n**Outcome**: CTT (Canonical Truth Time) advancement\n\n| Check | Description | Failure |\n| :--- | :--- | :--- |\n| Schema validity | All required columns present and typed | Reject ingestion |\n| Temporal continuity | No unexpected gaps | Reject ingestion |\n| Data integrity | No NaN/Inf, High \u2265 Low, Volume \u2265 0 | Reject ingestion |\n| Drift check | Price change < circuit breaker threshold | Manual review required |\n\n### 4.2 Gate 2: Intelligence Gate (Canonical \u2192 Evaluation)\n\n**Trigger**: Intelligence / decision engine run\n**Outcome**: TE (Truth Epoch) advancement\n\n| Check | Description | Failure |\n| :--- | :--- | :--- |\n| Data completeness | All required symbols at CTT \u2265 target TE | System halt |\n| Epistemic health | No critical audit alerts, inspection mode inactive | System halt |\n| Policy compliance | Strategy eligibility checks pass | System halt |\n\n### 4.3 Gate 3: Global Synchronization (Cross-Market)\n\n| Check | Description | Failure |\n| :--- | :--- | :--- |\n| Market alignment | `abs(TE_US - TE_INDIA) \u2264 1 Day` | Warn operator, allow independent operation |\n\n### 4.4 Emergency Override\n\nManual TE advancement or rollback is permitted only with:\n- Stringent justification logged in audit\n- Explicit CLI confirmation flag\n- Operator attribution recorded\n\n### 4.5 Truth Epoch Definition\n\nEach Truth Epoch is bound to the Proxy Set version that generated it.\n\n| Rule | Description |\n| :--- | :--- |\n| **Version Lock** | Every `truth_epoch.json` includes the `proxy_set_version` used |\n| **Invalidation on Change** | Proxy Set definition change invalidates prior TE for forward use |\n| **Historical Preservation** | Old definitions and epochs preserved in evolution log |\n\n*(Sources: `docs/governance/truth_advancement_gates.md`, `docs/epistemic/truth_epoch_scoping.md`)*\n\n---\n\n## 5. Automation Limits\n\n### 5.1 Current Phase: Passive Automation Only\n\nThe system operates under a **Bounded Automation Contract**. Monitors may observe and suggest but must never act.\n\n| Constraint | Description |\n| :--- | :--- |\n| **Read-Only** | Monitors read filesystem only; never write to business data paths |\n| **No Side Effects** | No alert muting, file deletion, or external API calls |\n| **Suggestion Logging** | Only valid output: `[SUGGESTION]` log entry (INFO/WARN) |\n| **Idempotent** | Running a monitor 100x has identical state to running 1x |\n\n### 5.2 Escalation Protocol\n\nWhen a monitor detects a critical state (drift, stalling, failure):\n1. Log a high-priority suggestion\n2. Rely on human operator (via Audit Log Viewer) to see and act\n\n### 5.3 Graduation Criteria (Passive \u2192 Active)\n\nA passive monitor may graduate to an active automator only when:\n1. Passive mode sustained > 1 week with 100% suggestion accuracy\n2. Specific Decision Ledger entry authorizes the upgrade\n3. Bounded Automation Contract updated to allow the exception\n\n*(Source: `docs/epistemic/bounded_automation_contract.md`)*\n\n---\n\n## 6. Operator Workflow\n\n### 6.1 Start of Day (SOD)\n\n**Trigger**: ~08:30 IST (Market Open \u2212 45 minutes)\n**Owner**: Operator (Human)\n\n| Step | Action |\n| :--- | :--- |\n| 1 | Verify network, API credits, disk space |\n| 2 | Start ingestion process |\n| 3 | Start momentum engine (if applicable) |\n| 4 | Verify logs for immediate errors |\n| 5 | Verify `data/raw/` is populating |\n| 6 | Log \"SOD Complete\" in daily journal |\n\n### 6.2 End of Day (EOD)\n\n**Trigger**: ~15:45 IST (Market Close + 15 minutes)\n**Owner**: Operator (Human)\n\n| Step | Action |\n| :--- | :--- |\n| 1 | Gracefully stop ingestion and momentum processes |\n| 2 | Check orphan count (failed processing events) |\n| 3 | Verify decision artifacts for today |\n| 4 | Archive daily data |\n| 5 | Generate change summary |\n| 6 | Log \"EOD Complete\" in daily journal |\n\n### 6.3 Post-Market Intelligence Run\n\n**Trigger**: After EOD data validation complete\n**Owner**: Operator (Human)\n\n| Step | Action |\n| :--- | :--- |\n| 1 | Run narrative engine (per market) |\n| 2 | Run decision engine (per market) |\n| 3 | Review dashboard for regime state |\n| 4 | Review strategy suitability matrix |\n| 5 | Advance TE if all gates pass |\n\n*(Sources: `docs/runbooks/start_of_day.md`, `docs/runbooks/end_of_day.md`)*\n\n---\n\n## 7. Dashboard Runtime Contract\n\nThe dashboard is a **read-only observability surface**. It renders system state for human consumption but has zero authority over execution.\n\n### 7.1 Runtime Components\n\n| Component | Runtime | Port | Role |\n| :--- | :--- | :--- | :--- |\n| Backend API | Python / FastAPI | 8000 | Serves read-only JSON endpoints |\n| Frontend | Vite / React | 5173 | Renders dashboard UI |\n\n### 7.2 Dashboard Behavioral Rules\n\n| Rule | Description |\n| :--- | :--- |\n| Read-only | No mutation endpoints exposed |\n| Staleness visible | Stale data greys out affected UI components |\n| Provenance visible | Exact tickers used in proxy roles displayed |\n| Enforcement state visible | SHADOW vs ENFORCED clearly labeled |\n| No execution controls | Dashboard cannot trigger ingestion, evaluation, or trading |\n\n### 7.3 Dashboard Staleness States\n\n| Status | Meaning | Operator Action |\n| :--- | :--- | :--- |\n| ACTIVE | System healthy, data current | None |\n| LATE | Update delayed | Monitor |\n| STALE | Data not updating | **Do not trust regime** |\n\n*(Sources: `docs/Regime_Dashboard_Runbook.md`, `docs/dashboard/api_schema.md`)*\n\n---\n\n## 8. Skill Registration Model\n\nSkills are registered implementations that the harness invokes. Registration is governed and auditable.\n\n### 8.1 Registration Requirements\n\n| Requirement | Purpose |\n| :--- | :--- |\n| Unique skill ID + version | Identity and traceability |\n| Declared task types | Harness knows what the skill handles |\n| Declared required inputs | Harness validates inputs before invocation |\n| Declared permissions needed | Harness checks factor permissions |\n| Declared side effects | Harness coordinates writes, prevents conflicts |\n| Decision Ledger reference | Governance authorization |\n\n### 8.2 Skill Invariants\n\n| Invariant | Description |\n| :--- | :--- |\n| No upstream inference | Skill does not infer state it should receive |\n| No permission bypass | Skill respects factor layer constraints |\n| All side effects declared | Undeclared writes trigger quarantine |\n| Idempotent | Same input \u2192 same output |\n| Decision-authorized | Decision Ledger entry required for registration |\n\n### 8.3 Skill Lifecycle\n\n```\nREGISTERED \u2192 ACTIVE \u2192 DEPRECATED \u2192 REMOVED\n```\n\n- Each transition requires a Decision Ledger entry\n- `DEPRECATED` skills still invocable but flagged for removal\n- `REMOVED` skills are never invoked\n\n### 8.4 Violation Handling\n\n| Violation | Response |\n| :--- | :--- |\n| Undeclared output | Quarantine skill, halt cycle |\n| Permission bypass | Reject execution, log violation |\n| Layer bypass | Quarantine skill, require review |\n| Timeout | Terminate, mark failed, continue |\n| Repeated violations | Permanent deregistration |\n\n*(Source: `docs/contracts/execution_harness_contract.md`)*\n\n---\n\n## 9. Cross-Pipeline Invariants\n\n| Invariant | Applicability | Description |\n| :--- | :--- | :--- |\n| **Market Separation** | All pipelines | US and India pipelines are physically distinct. No shared state. |\n| **Event Time Integrity** | All processing | All logic proceeds on event time. System clock (`datetime.now()`) is never used for business logic. |\n| **No Lookahead** | All processing | Core abstractions physically prevent access to future data. |\n| **Idempotency** | All stages | Re-running on same input produces identical output. |\n| **Shadow Enforcement** | Execution | No real market interaction until explicit graduation from shadow mode. |\n| **No Autonomous TE Advancement** | Orchestration | Truth Epoch requires human-triggered governance gate passage. |\n| **Append-Only Audit** | All execution | Audit logs are append-only. No deletion, no mutation. |\n| **Proxy Versioning** | Evaluation | Truth Epoch is scoped to the proxy set version that generated it. |\n\n---\n\n## Legacy Source Mapping\n\n| Section | Legacy Source Document(s) |\n| :--- | :--- |\n| \u00a71 Orchestration | `docs/contracts/execution_harness_contract.md`, `docs/epistemic/bounded_automation_contract.md` |\n| \u00a72.1 Batch (US) | `docs/us_market_engine_design.md` \u00a75 |\n| \u00a72.2 Streaming (India) | `docs/INDIA_WEBSOCKET_ARCHITECTURE.md` |\n| \u00a72.3 EV-TICK | `docs/impact/2026-01-27__evolution__ev_tick.md` |\n| \u00a72.4 Shadow Mode | `docs/irr/shadow_reality_run_log.md`, `docs/Regime_Dashboard_Runbook.md` |\n| \u00a73 Harness | `docs/contracts/execution_harness_contract.md` |\n| \u00a74 Truth Advancement | `docs/governance/truth_advancement_gates.md`, `docs/epistemic/truth_epoch_scoping.md` |\n| \u00a75 Automation | `docs/epistemic/bounded_automation_contract.md` |\n| \u00a76 Operator Workflow | `docs/runbooks/start_of_day.md`, `docs/runbooks/end_of_day.md` |\n| \u00a77 Dashboard | `docs/Regime_Dashboard_Runbook.md`, `docs/dashboard/api_schema.md` |\n| \u00a78 Skills | `docs/contracts/execution_harness_contract.md` \u00a77 |\n| \u00a79 Invariants | `docs/epistemic/architectural_invariants.md`, `docs/governance/temporal_truth_contract.md` |\n",
  "08_reliability/failure_model.md": "# Failure Model\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> This document describes failure scenarios, retry behaviors, degradation paths, and fallback behaviors across all system layers.\n> Intent only. No implementation.\n\n---\n\n## 1. Design Approach\n\nThe system is designed to **fail closed** \u2014 when in doubt, do nothing. Uncertainty is amplified, not smoothed. Gaps are declared, not filled. The core invariant is:\n\n> **Staleness over Fabrication. Silence over Hallucination. Halt over Guess.**\n\n| Principle | Description |\n| :--- | :--- |\n| **Fail Closed** | Unknown state \u2192 block all action, not permit default action |\n| **No Silent Degradation** | Every component must flag `INSUFFICIENT_DATA` rather than silently produce reduced-quality output |\n| **Monotonic Suppression** | Downstream layers may only subtract permissions, never add them |\n| **Human Recovery** | All governance-level failures require operator intervention \u2014 no auto-recovery |\n| **Audit Everything** | Every failure, skip, retry, and degradation is logged with full context |\n\n*(Sources: `docs/memory/04_architecture/macro.md`, `docs/epistemic/bounded_automation_contract.md`)*\n\n---\n\n## 2. Temporal Failures\n\n### 2.1 Temporal Drift States\n\n| Failure | Condition | Severity | Detection | Response |\n| :--- | :--- | :--- | :--- | :--- |\n| **Ingestion Drift** | `RDT >> CTT` | WARNING | Temporal orchestrator | Operator alert, investigate data source lag |\n| **Evaluation Pending** | `CTT >> TE` | WARNING | Dashboard staleness indicator | Block new decisions until evaluation runs |\n| **Future Leakage** | `TE > CTT` | **CRITICAL** | Invariant check (`TE \u2264 CTT \u2264 RDT`) | Immediate system halt, manual audit required |\n| **Cross-Market Divergence** | `abs(TE_US - TE_INDIA) > 1 Day` | WARNING | Global synchronization gate | Warn operator; allow independent operation unless explicit dependency |\n| **RDT Undetermined** | Cannot compute Raw Data Time | HIGH | Temporal orchestrator | Log failure, CTT cannot advance, TE frozen |\n\n### 2.2 Temporal Recovery\n\n| Recovery Action | Authority | Mechanism |\n| :--- | :--- | :--- |\n| Advance TE after drift resolution | Operator | Intelligence Gate passage (all checks pass) |\n| Manual TE override (emergency) | Operator (Admin) | CLI with explicit confirmation flag + audit log justification |\n| Rollback TE | Operator (Admin) | CLI with justification + Decision Ledger entry |\n\n*(Sources: `docs/governance/truth_advancement_gates.md`, `docs/irr/failure_log.md` TDR-001/TDR-002/TDR-003)*\n\n---\n\n## 3. Ingestion Layer Failures (L0)\n\n### 3.1 US Market (Alpha Vantage \u2014 REST/Batch)\n\n| Failure | Detection | Retry Policy | Fallback | Severity |\n| :--- | :--- | :--- | :--- | :--- |\n| **API rate limited (HTTP 429)** | Response status code | Exponential backoff; rotate to next API key | Defer symbol to retry queue | LOW |\n| **API key exhaustion** | All keys exhausted in pool | Wait until daily reset | Log, defer entire batch | MEDIUM |\n| **Symbol not found** | API returns empty/error | Log to retry queue, skip symbol | Remove from active universe after 3 consecutive failures | LOW |\n| **Empty response / no data** | Empty payload | No retry (not transient) | Log warning, do NOT overwrite existing data | MEDIUM |\n| **Symbol refresh returns 0** | `LISTING_STATUS` returns empty | No retry | Alert operator; retain previous symbol master | HIGH |\n| **Daily fetch fails > 10% universe** | Batch completion check | Retry failed batch | Alert operator; CTT does NOT advance | HIGH |\n| **Schema validation failure** | Column/type mismatch | No retry (data issue) | Reject data; CTT does NOT advance | HIGH |\n| **Network timeout** | `ConnectionError` / `Timeout` | 3 retries with backoff | Check internet, check vendor status | MEDIUM |\n| **Price drift > circuit breaker** | Drift check in Ingestion Gate | No retry | Manual review required before CTT advance | HIGH |\n\n### 3.2 India Market (SmartAPI \u2014 WebSocket/Streaming)\n\n| Failure | Detection | Retry Policy | Fallback | Severity |\n| :--- | :--- | :--- | :--- | :--- |\n| **WebSocket disconnect** | Connection lost event | Auto-reconnect with exponential backoff | REST fallback available | MEDIUM |\n| **Binary parse error** | Tick decode failure | Skip tick, log anomaly | Continue with remaining ticks | LOW |\n| **Authentication failure** | Login/token error | Re-authenticate (token refresh) | Alert operator if persistent | HIGH |\n| **Instrument master stale** | Cache age > 24h | Re-download on next startup | Use cached version with WARNING | MEDIUM |\n| **Tick gap (missing symbols)** | Health check detects no ticks for symbol | No retry (market-driven) | Log gap, flag symbol as STALE | MEDIUM |\n| **Duplicate ticks on restart** | Restart recovery overlap | No retry needed | Downstream dedup by `(symbol, timestamp)` | LOW |\n\n### 3.3 Ingestion Restart Behavior\n\n| Scenario | Behavior | Safety |\n| :--- | :--- | :--- |\n| **Scheduler restart** | Re-authenticates, re-loads instrument master, resumes polling | Safe \u2014 append-only raw storage |\n| **Duplicate run** | Concurrent writes produce duplicate records in raw JSONL | Intentional \u2014 raw layer (Bronze) is append-only; dedup at Silver |\n| **Market-closed run** | Scheduler logs \"Outside market hours. Sleeping...\" and idles | Safe \u2014 checks time every 60 seconds |\n| **Outside-hours flag** | Bypasses market hours check, fetches data | Safe \u2014 enables testing and manual recovery |\n\n*(Sources: `docs/verification/ingestion_failure_modes.md`, `docs/us_market_engine_design.md`, `docs/INDIA_WEBSOCKET_ARCHITECTURE.md`)*\n\n---\n\n## 4. Regime Layer Failures (L1)\n\n| Failure | Detection | Degradation Path | Response |\n| :--- | :--- | :--- | :--- |\n| **Partial canonical data** | Symbol availability check | Regime degrades to `UNKNOWN` / low confidence | Fail closed \u2014 all downstream blocked |\n| **Missing blocking symbol** | Regime input contract check | `NOT_VIABLE` \u2014 regime computation FORBIDDEN | System halt for regime-dependent layers |\n| **Insufficient history** | Lookback window check (< 756 days) | `NOT_VIABLE` | Block regime; retain previous state with STALE flag |\n| **Temporal misalignment** | Intersection check across symbols | Excluded from computation | Regime computed on reduced symbol set (with confidence penalty) |\n| **Conflicting indicators** | VIX vs trend disagreement | `TRANSITION_UNCERTAIN` classification | Block new entries, wait for confirmation |\n| **Regime flapping** | State changes > N within lookback | Cooldown lock active | Suppress transitions until cooldown expires |\n| **Stale data** | Data age > MAX_STALENESS | False stability risk | Mark regime as STALE; dashboard shows warning |\n| **Data quality violation** | Forward-fill, interpolation, synthetic data detected | `NOT_VIABLE` | Regime computation FORBIDDEN |\n\n**Regime Ingestion Obligations** (all must be satisfied for regime computation):\n\n| Obligation | Description | Failure = |\n| :--- | :--- | :--- |\n| `OBL-RG-ING-SYMBOLS` | All contract symbols ingested | Regime FORBIDDEN |\n| `OBL-RG-ING-HISTORY` | \u2265 756 trading days per symbol | Regime FORBIDDEN |\n| `OBL-RG-ING-ALIGNMENT` | Temporal intersection \u2265 756 days | Symbol excluded |\n| `OBL-RG-ING-QUALITY` | No forward-fill, no interpolation, no synthetic | Regime FORBIDDEN |\n| `OBL-RG-ING-ENFORCEMENT` | All above SATISFIED | Regime FORBIDDEN if ANY unmet |\n\n**Silent Fallback is FORBIDDEN**: If regime runs on incomplete data, that is a `GOVERNANCE VIOLATION`.\n\n*(Sources: `docs/memory/05_components/regime_engine.yaml`, `docs/epistemic/governance/regime_ingestion_obligations.md`, `docs/epistemic/contracts/minimal_regime_input_contract.md`)*\n\n---\n\n## 5. Narrative Layer Failures (L2)\n\n| Failure | Detection | Degradation Path | Response |\n| :--- | :--- | :--- | :--- |\n| **Missing artifact** | Required input not found | Section omitted with explicit message | `\"[Section] could not be generated. Artifact missing: {path}.\"` |\n| **Parse error** | Artifact cannot be decoded | Section omitted with explicit message | `\"[Section] could not be generated. Data format error in {path}.\"` |\n| **Regime UNKNOWN** | Regime state unresolved | Limited narrative (stasis only) | `\"Narrative generation is limited. Regime could not be determined.\"` |\n| **Stale data** | Data beyond staleness threshold | Staleness warning prepended | `\"Warning: Data may be stale. Last computed: {timestamp}.\"` |\n| **Compiler failure** | Cannot produce valid output | Fallback narrative emitted | `\"Narrative generation failed. Reason: {reason}. Manual inspection recommended.\"` |\n| **Event source unavailable** | News API / RSS down | Narratives STALE | Log, retain previous narratives with staleness flag |\n\n**Hallucination Controls** (preventing false output):\n\n| Control | Description |\n| :--- | :--- |\n| Source Binding | Every sentence must cite its input artifact field |\n| No Interpolation | No inferred values, no trend extrapolation, no gap-filling |\n| No Creative Phrasing | Fixed templates only \u2014 no synonyms, no paraphrasing |\n| Uncertainty Amplification | Low confidence \u2192 amplified uncertainty language, not smoothed |\n| Pre-Emission Validation | Grammar, source binding, regime compatibility, prohibited word scan |\n| No Partial Emission | If compiler fails, emit fallback \u2014 never emit partial or guessed narrative |\n\n*(Sources: `docs/narrative/failure_and_hallucination_controls.md`, `docs/memory/05_components/narrative_engine.yaml`)*\n\n---\n\n## 6. Factor & Meta-Analysis Failures (L3\u2013L4)\n\n### 6.1 Factor Engine (L4)\n\n| Failure | Detection | Degradation Path | Response |\n| :--- | :--- | :--- | :--- |\n| **Insufficient data for computation** | Lookback check | Degrade to `UNKNOWN` | Flag as `INSUFFICIENT_DATA`; downstream receives explicit null |\n| **Factor state UNKNOWN** | Computation yields indeterminate result | Lens degrades to `INSUFFICIENT_DATA` | No silent default \u2014 explicitly declared |\n| **Proxy data missing** | Benchmark/growth proxy unavailable | Use reduced proxy set (if benchmark available) | Log; if benchmark missing \u2192 `UNAVAILABLE` |\n| **Cross-market binding error** | Wrong market context loaded | Fail closed | Log anomaly; e.g., \"No benchmark binding for US\" when processing India |\n\n### 6.2 Factor Lens (L4 \u2192 L6)\n\n| Failure | Detection | Degradation Path | Response |\n| :--- | :--- | :--- | :--- |\n| **Factor state unavailable** | Input check | Lens returns `INSUFFICIENT_DATA` | Downstream receives explicit null, not a guess |\n| **Insufficient sector coverage** | Coverage check | Relative comparison impossible | Flag limitation in output |\n| **Cross-market pattern data missing** | Lead-lag data unavailable | Cross-market alerts suppressed | Log; single-market analysis continues |\n\n### 6.3 Fundamental Lens (L6)\n\n| Failure | Detection | Degradation Path | Response |\n| :--- | :--- | :--- | :--- |\n| **Data source unavailable** | API check | Returns `INSUFFICIENT_DATA` | No silent degradation (governance rule) |\n| **Stale financial data** | Data age > reporting period | Flag as `STALE` | Downstream informed of data age |\n| **Insufficient sector coverage** | Coverage check | Relative comparison impossible | Flag limitation |\n\n### 6.4 Meta Engine (L3)\n\n| Failure | Detection | Degradation Path | Response |\n| :--- | :--- | :--- | :--- |\n| **All signals stale** | Staleness detection (beyond horizon) | Trust scores decayed to zero | No actionable output; explicit \"all stale\" flag |\n| **Conflicting signal sources** | Conflict detection | Conflict flagged with attribution | Both sides preserved in output; operator decides |\n| **Empty input** | No signals received | No meta-analysis produced | Clean exit logged |\n\n*(Sources: `docs/memory/05_components/factor_engine.yaml`, `docs/memory/05_components/factor_lens.yaml`, `docs/memory/05_components/fundamental_lens.yaml`, `docs/memory/05_components/meta_engine.yaml`)*\n\n---\n\n## 7. Strategy & Convergence Failures (L5\u2013L7)\n\n### 7.1 Strategy Selector (L5)\n\n| Failure | Detection | Degradation Path | Response |\n| :--- | :--- | :--- | :--- |\n| **No strategies eligible** | All filtered by regime/factor gates | Empty activation set | Clean exit \u2014 \"No strategies compatible with current regime\" |\n| **Staleness threshold exceeded** | Belief freshness check | Strategy auto-suspended | Suspended until beliefs refresh |\n| **Registry corruption** | Schema validation failure | Strategy rejected at load | Log, skip strategy, continue with remainder |\n\n### 7.2 Convergence Engine (L7)\n\n| Failure | Detection | Degradation Path | Response |\n| :--- | :--- | :--- | :--- |\n| **Regime state unavailable** | Input check | Degrade to equal-weight scoring | Flag as `INSUFFICIENT_DATA` |\n| **Single lens dominance** | Weight check | Constrained scoring | Flag imbalance in output |\n| **Zero candidates** | All candidates filtered | No convergence output | Clean exit logged |\n\n*(Sources: `docs/memory/05_components/strategy_selector.yaml`, `docs/memory/05_components/convergence_engine.yaml`)*\n\n---\n\n## 8. Execution Harness Failures\n\n### 8.1 State Validation Failures\n\n| Condition | Harness Behavior | Recovery |\n| :--- | :--- | :--- |\n| `regime_state` is None | **HALT** \u2014 Cannot execute without regime | Operator must run regime pipeline |\n| `regime_state.confidence < MIN_THRESHOLD` | **DEGRADE** \u2014 Execute with reduced scope | Log warning; narrower task graph |\n| `factor_permission` is None (not implemented) | **ASSUME PERMISSIVE** \u2014 Log bypass | Continue with warning |\n| `beliefs` is empty | **SKIP** \u2014 Nothing to execute | Clean exit logged |\n| Any state older than `MAX_STALENESS` | **REJECT** \u2014 Refuse to execute | Operator must refresh data |\n\n### 8.2 Task Graph Failures\n\n| Failure Type | Policy | Impact |\n| :--- | :--- | :--- |\n| Single non-critical task fails | Mark task `FAILED`, continue independent tasks | Partial cycle completion |\n| Critical-path task fails | Mark entire cycle `DEGRADED` | Log prominently; dependent tasks skipped |\n| Circular dependency detected | **REJECT** at graph construction | Cycle does not start |\n| Harness-level error | **HALT** \u2014 Stop all execution | Require human intervention |\n| Timeout exceeded | Terminate task, mark `FAILED` | Continue with remaining tasks |\n\n### 8.3 Skill Violations\n\n| Violation | Response | Escalation |\n| :--- | :--- | :--- |\n| Undeclared output (side effect) | Quarantine skill, halt cycle | `SKILL_VIOLATION` audit event |\n| Permission bypass attempt | Reject execution, log violation | Continue cycle |\n| Layer bypass detected | Quarantine skill, log violation | Require review |\n| Repeated violations (\u2265 3) | Permanent skill deregistration | Decision Ledger entry required |\n\n*(Source: `docs/contracts/execution_harness_contract.md`)*\n\n---\n\n## 9. Circuit Breakers & Policy Failures\n\n### 9.1 Decision Policy (Governance Gate)\n\nThe Decision Policy asks: **\"Is the system allowed to consider action?\"**\n\n| Condition | Policy Output | Effect |\n| :--- | :--- | :--- |\n| `ProxyStatus == DEGRADED` | `OBSERVE_ONLY` | All action blocked \u2014 \"Epistemic Foundation Insufficient\" |\n| `Regime == UNCERTAIN` | `OBSERVE_ONLY` | No transactional actions |\n| `Regime == BEARISH` | `ALLOW_SHORT_ENTRY` or `OBSERVE_ONLY` | Long entries blocked |\n| `Liquidity == TIGHT/CRISIS` | Block `LONG_ENTRY`, `SHORT_ENTRY` | Position hold only (tighter stops) |\n| `Breadth == DIVERGENT` | `ALLOW_LONG_ENTRY (Conditional)` | High-quality only restriction |\n\n### 9.2 Fragility Policy (Systemic Circuit Breaker)\n\nThe Fragility Policy asks: **\"Is the environment safe?\"** It has **subtractive power only** \u2014 can revoke permissions, never grant.\n\n| Stress State | Revoked Permissions | Trigger Signals |\n| :--- | :--- | :--- |\n| **NORMAL** | None | All signals nominal |\n| **EVALUATING** | `BLOCK_NEW_ENTRY` | Insufficient data (startup) |\n| **ELEVATED_STRESS** | `BLOCK_LEVERAGE`, `BLOCK_AGGRESSIVE_ENTRY` | VIX spike, rate spike, volume evaporation |\n| **SYSTEMIC_STRESS** | `BLOCK_ALL_ENTRIES`, `FORCE_DEFENSIVE_HOLD` | Multiple signals firing, critical liquidity shock |\n| **TRANSITION_UNCERTAIN** | `BLOCK_ALL_ENTRIES` | Recent regime flip (< 5 days) |\n\n**Permission Final Formula**: `Final = DecisionPolicy.Permissions \u2212 FragilityPolicy.Revocations`\n\n**Market Scope**:\n- **US**: Full fragility evaluation enabled\n- **India**: Hard-coded `NOT_EVALUATED` (Reason: `DEGRADED_PROXY`) \u2014 handled by Decision Policy `OBSERVE_ONLY`\n\n### 9.3 EVENT_LOCK\n\n| Trigger | Effect | Duration | Recovery |\n| :--- | :--- | :--- | :--- |\n| Extreme volatility event | Temporary halt of all new entries | Until event subsides | Explicit operator re-enable |\n\n*(Sources: `docs/contracts/decision_policy_contract.md`, `docs/contracts/fragility_policy_contract.md`)*\n\n---\n\n## 10. Degraded State Registry\n\nDegraded states are explicitly declared, documented, and scoped. The system may operate in degraded mode only with full transparency.\n\n### 10.1 Active Degraded States\n\n| ID | Market | Description | Substitution | Epistemic Risk | Authorized Phase |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| **DEG-IN-001** | India | Missing broad index (NIFTY50, BANKNIFTY) | `NSE_RELIANCE` as single-stock surrogate | Idiosyncratic risk conflated with systemic risk | Phase 10\u201311 only |\n| **DEG-US-001** | US | Missing Small Cap (IWM), Industrials (DIA) | None (SPY + QQQ only) | Blindness to small-cap rotation and breadth divergences | All phases (acceptable approximation) |\n\n### 10.2 Degraded State Handling Rules\n\n| Condition | UI Effect | Confidence Effect | Strategy Effect |\n| :--- | :--- | :--- | :--- |\n| `Status == DEGRADED` | \"\u26a0\ufe0f PROXY LIMITED\" badge | Confidence capped at `MEDIUM` (0.5) | Tighter constraints (higher margin of safety) |\n| `Status == CANONICAL (with warnings)` | Secondary warning | No cap | Unchanged |\n\n### 10.3 Surrogate Authorization\n\n| Market | Index | Authorized Surrogate | Label Requirement |\n| :--- | :--- | :--- | :--- |\n| India | NIFTY | `NSE_RELIANCE` | Must display as \"SURROGATE\" in UI |\n| India | BANKNIFTY | `NSE_HDFCBANK` | Must display as \"SURROGATE\" in UI |\n| India | CNXIT | `NSE_INFY` | Must display as \"SURROGATE\" in UI |\n\n*(Sources: `docs/data/degraded_state_registry.md`, `docs/data/data_source_governance.md`)*\n\n---\n\n## 11. Dashboard & UI Failures\n\n| Failure | Detection | Fallback | User-Facing Message |\n| :--- | :--- | :--- | :--- |\n| **Backend unavailable** | API connection failure | Show last known state, grey out all derived displays | \"Unable to connect to data layer. Showing last known state.\" |\n| **Artifact missing** | 404 on policy/context endpoint | Show OFFLINE badge | \"Policy artifact not found. System OFFLINE.\" |\n| **Parse error** | JSON decode error | Show generic error card | \"Data format error. Contact system administrator.\" |\n| **Stale data** | Staleness threshold exceeded | Grey out affected panels | \"STALE (Xm since last update) \u2014 DO NOT TRUST REGIME\" |\n| **Epoch divergence** | Multiple TE sources disagree | Surface both with conflict indicator | \"Temporal truth source inconsistency detected.\" |\n| **Synthetic displayed as real** | Invariant violation (`HG-007`) | Immediate rollback | Never display synthetic data as real |\n\n**Dashboard Hard Guardrails** (inviolable):\n\n| Guardrail | Description |\n| :--- | :--- |\n| No execution buttons | `INV-NO-EXECUTION` |\n| No position size display | `INV-NO-CAPITAL` |\n| No auto-trade toggles | `INV-NO-SELF-ACTIVATION` |\n| No recommendation language | Observatory principle |\n| No portfolio value / PnL | No capital implication |\n| Degraded states MORE visible | `OBL-HONEST-STAGNATION` |\n\n*(Sources: `docs/dashboard/ui_guardrails.md`, `docs/dashboard/stress_inspection_mode_spec.md`)*\n\n---\n\n## 12. Shadow Mode Failures\n\n| Failure | Detection | Response | Severity |\n| :--- | :--- | :--- | :--- |\n| **Governance Leakage** | Shadow run emits action strings (e.g., \"BUY\") in weak/unknown context | Log as `GOVERNANCE_LEAKAGE`; does not affect real systems | HIGH (epistemic) |\n| **Honest Stagnation** | Shadow run executes under `Unknown` regime | Expected behavior \u2014 system correctly refuses | LOW (informational) |\n| **Temporal Drift carry-over** | Shadow run inherits drifted TE from IRR environment | Log; no temporal closure in shadow | MEDIUM |\n| **Schema mismatch** | Core policy reads `regime` field, tick context writes `regime_code` | Resolves to `UNKNOWN` / `HALTED` | HIGH |\n| **Cross-market binding leakage** | India processing references US benchmark bindings | Log anomaly; should not cross | HIGH |\n\n**Shadow Safety Verification** (mandatory after every shadow run):\n1. No real execution was performed\n2. No broker endpoint was called\n3. No capital state file was modified\n4. All action outputs went to `ShadowExecutionSink` only\n\n*(Sources: `docs/irr/shadow_reality_run_log.md`, `docs/irr/failure_log.md`)*\n\n---\n\n## 13. IRR Failure Taxonomy (Observed)\n\nIntegration Reality Runs (IRR) have revealed five canonical failure classes:\n\n| Class | Name | Description | Phase-7 Gate |\n| :--- | :--- | :--- | :--- |\n| **F1** | Temporal Drift Accumulation | Unbounded `CTT > TE` drift weakens trust in evaluated reality | **P0 BLOCKER** |\n| **F2** | Regime Instability Under Partial Updates | Same-day produces path-dependent regime truth | **P0 BLOCKER** |\n| **F3** | Narrative Over-Resolution in Stagnation | Action-like outputs in stagnation imply unjustified decisiveness | **P2 CONDITIONAL** |\n| **F4** | UI Epistemic Leakage | Dashboard surfaces conflicting epoch references | **P0 BLOCKER** |\n| **F5** | Suppression Dominance Opacity | Cannot distinguish intentional suppression from pipeline breakage | **P1 BLOCKER** |\n\n**Remediation Priority**:\n\n| Priority | Classes | Rationale |\n| :--- | :--- | :--- |\n| **P0** | F1, F2, F4 | Core truth-time integrity, deterministic regime, UI truth disclosure |\n| **P1** | F5 | Suppression explainability for operator trust |\n| **P2** | F3 | Narrative conservatism after foundational stabilization |\n\n**Required before any controlled Truth Advancement**: All P0 classes resolved and verified.\n\n*(Source: `docs/governance/irr_failure_remediation_map.md`)*\n\n---\n\n## 14. Epistemic Drift Detection\n\nThe system tracks six classes of epistemic drift \u2014 structural or conceptual changes that may silently corrupt system integrity:\n\n| Drift Class | Definition | Detection | Severity |\n| :--- | :--- | :--- | :--- |\n| **Ontological** | New concepts introduced without declaration | Concept registry validation | WARNING / FAIL |\n| **Causal** | Layers acting as causes instead of constraints | Dependency direction audit | FAIL |\n| **Boundary** | Layer assuming responsibilities of another layer | Responsibility matrix check | FAIL |\n| **Permission** | Signals/execution bypassing policy layers | Permission chain validation | **CRITICAL** |\n| **Temporal** | Fast layers mutating slow beliefs | Temporal integrity audit | FAIL |\n| **Latent \u2192 Active** | Latent layers silently activated without authorization | Activation declaration check | **CRITICAL** |\n\n**Drift Severity Levels**:\n\n| Level | Meaning | Action |\n| :--- | :--- | :--- |\n| INFO | Minor discrepancy | Log only |\n| WARNING | Potential drift, review recommended | Log + flag for review |\n| FAIL | Confirmed drift | Block deployment + require resolution |\n| **CRITICAL** | Safety violation | Immediate halt + Decision Ledger entry required |\n\n*(Source: `docs/contracts/epistemic_drift_validator_specification.md`)*\n\n---\n\n## 15. Component Failure Summary (All Layers)\n\n| Component | Layer | Key Failure | Degradation Response |\n| :--- | :--- | :--- | :--- |\n| **Ingestion US** | L0 | API rate limit, empty data | Retry queue, defer; do NOT overwrite |\n| **Ingestion India** | L0 | WebSocket disconnect, parse error | Auto-reconnect; skip bad ticks |\n| **Ingestion Events** | L0 | Source unavailable, stale events | Log; narratives stale |\n| **Regime Engine** | L1 | Partial data, conflicting indicators | `UNKNOWN` / `NOT_VIABLE` |\n| **Narrative Engine** | L2 | Missing artifact, regime unknown | Fallback narrative or limited stasis output |\n| **Meta Engine** | L3 | All signals stale | Trust scores decayed to zero |\n| **Factor Engine** | L4 | Insufficient data | `UNKNOWN`; explicit null downstream |\n| **Factor Lens** | L4\u2192L6 | Factor state unavailable | `INSUFFICIENT_DATA` |\n| **Fundamental Lens** | L6 | Data source unavailable | `INSUFFICIENT_DATA` (no silent degradation) |\n| **Technical Lens** | L6 | Insufficient candle history | Indicator unavailable; flag gap |\n| **Momentum Engine** | Scanner | Insufficient history, late candles | Stale signals flagged |\n| **Strategy Selector** | L5 | No eligible strategies | Empty activation set (clean exit) |\n| **Convergence Engine** | L7 | Regime unavailable | Equal-weight fallback, flagged `INSUFFICIENT_DATA` |\n| **Portfolio Intelligence** | L9 | Regime stale | All items flagged as potentially misaligned |\n| **Governance** | Cross | Obligation index stale | All obligations marked `UNKNOWN` |\n| **Dashboard** | UI | Backend unavailable, stale data | Last known state + grey out + staleness warning |\n\n---\n\n## 16. Troubleshooting Quick Reference\n\n| Symptom | Likely Cause | First Action |\n| :--- | :--- | :--- |\n| `ConnectionError` / `Timeout` in logs | API connectivity | Check internet \u2192 check vendor status \u2192 restart ingestion |\n| Raw events incoming, no narratives | Pipeline blockage | Check `run_narrative.py` logs \u2192 verify vector store \u2192 check freeze flag |\n| Narratives exist, no decisions | Decision gap | Check `run_decision.py` logs \u2192 verify confidence > 0.8 \u2192 check constraint validator |\n| JSON decode errors / invalid timestamps | Data corruption | Isolate corrupt file to `data/quarantine/` \u2192 run constraint validator \u2192 document in evolution log |\n| Dashboard shows STALE | Data not updating | Check if market is open \u2192 check runner logs \u2192 do not rely on stale regime |\n| Regime stuck at UNKNOWN | Partial canonical data | Check regime input contract symbols \u2192 verify history depth \u2192 run ingestion |\n\n*(Source: `docs/runbooks/troubleshooting.md`)*\n\n---\n\n## Legacy Source Mapping\n\n| Section | Legacy Source Document(s) |\n| :--- | :--- |\n| \u00a72 Temporal | `docs/governance/truth_advancement_gates.md`, `docs/irr/failure_log.md` |\n| \u00a73 Ingestion | `docs/verification/ingestion_failure_modes.md`, `docs/us_market_engine_design.md`, `docs/INDIA_WEBSOCKET_ARCHITECTURE.md` |\n| \u00a74 Regime | `docs/memory/05_components/regime_engine.yaml`, `docs/epistemic/governance/regime_ingestion_obligations.md` |\n| \u00a75 Narrative | `docs/narrative/failure_and_hallucination_controls.md` |\n| \u00a76 Factor/Meta | Component YAMLs (factor_engine, factor_lens, fundamental_lens, meta_engine) |\n| \u00a77 Strategy/Convergence | Component YAMLs (strategy_selector, convergence_engine) |\n| \u00a78 Harness | `docs/contracts/execution_harness_contract.md` |\n| \u00a79 Circuit Breakers | `docs/contracts/decision_policy_contract.md`, `docs/contracts/fragility_policy_contract.md` |\n| \u00a710 Degraded States | `docs/data/degraded_state_registry.md`, `docs/data/data_source_governance.md` |\n| \u00a711 Dashboard | `docs/dashboard/ui_guardrails.md`, `docs/dashboard/stress_inspection_mode_spec.md` |\n| \u00a712 Shadow | `docs/irr/shadow_reality_run_log.md`, `docs/irr/failure_log.md` |\n| \u00a713 IRR Taxonomy | `docs/governance/irr_failure_remediation_map.md` |\n| \u00a714 Drift | `docs/contracts/epistemic_drift_validator_specification.md` |\n| \u00a716 Troubleshooting | `docs/runbooks/troubleshooting.md` |\n",
  "09_security/trust.md": "# Trust & Security Model\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> This document describes trust boundaries, access assumptions, credential handling, and user separation.\n> Intent only. No implementation.\n\n---\n\n## 1. Core Trust Principles\n\nThe system operates on a principle of **progressive trust** \u2014 nothing is trusted by default; trust is earned through observation, validation, and governance gates.\n\n| Principle | Description |\n| :--- | :--- |\n| **Trust is Earned, Not Assumed** | Research modules, strategies, and data sources must prove themselves before promotion |\n| **Capital Preservation Supremacy** | Capital protection always overrides feature velocity |\n| **Human Authority is Final** | Humans are the supreme authority on all specifications and decisions |\n| **Fail Closed** | Unknown trust state \u2192 deny access, not grant default access |\n| **Audit Everything** | All actions, decisions, and state transitions are logged with provenance |\n\n*(Sources: `docs/governance/RESEARCH_MODULE_GOVERNANCE.md`, `docs/epistemic/bounded_automation_contract.md`)*\n\n---\n\n## 2. Trust Domains\n\n### 2.1 Execution Trust\n\n| Property | Current State | Invariant |\n| :--- | :--- | :--- |\n| Live Execution | **FORBIDDEN** | `INV-NO-EXECUTION` \u2014 System does not execute trades |\n| Capital Movement | **FORBIDDEN** | `INV-NO-CAPITAL` \u2014 System does not move money |\n| Self-Promotion | **FORBIDDEN** | `INV-NO-SELF-ACTIVATION` \u2014 System cannot promote itself to production |\n| Execution Requires | Explicit human sign-off AND governance gate passage | Non-negotiable |\n\n### 2.2 Data Trust\n\n| Data Source | Trust Level | Treatment |\n| :--- | :--- | :--- |\n| **External API responses** (Alpha Vantage, Angel One) | **UNTRUSTED** | Must be validated (schema, range, continuity) before canonical acceptance |\n| **Raw data layer (Bronze)** | **UNTRUSTED** | Append-only; may contain duplicates, gaps, or errors |\n| **Canonical data store (Silver)** | **TRUSTED within system** | Validated, deduplicated, schema-conforming |\n| **Derived analytics (Gold)** | **Conditionally trusted** | Trust depends on upstream canonical completeness |\n| **Synthetic / Surrogate data** | **LABELED DISTRUST** | Must be explicitly marked (\"SURROGATE\" / \"SYNTHETIC\") in all surfaces |\n\n**Temporal Trust Rule**: The system only \"knows\" about time up to the declared Truth Epoch (TE). Time beyond TE is epistemically invisible.\n\n### 2.3 Module Trust (Research \u2192 Production Path)\n\nResearch modules exist in an isolated sandbox and must earn their way to production through a multi-gate process:\n\n| Gate | Requirement | Purpose |\n| :--- | :--- | :--- |\n| **Observation** | 30 trading days error-free in Research state | Prove stability |\n| **Paper Trading** | 100 consecutive simulated trades with < 5% slippage variance | Prove accuracy |\n| **Human Approval** | Explicit architectural sign-off in `ACTIVATION_LOG.md` | Prove intent |\n| **Coverage** | \u2265 90% unit test coverage + integration tests pass | Prove reliability |\n| **Single PR** | Promotion via dedicated PR tagged `[PROMOTION]` | Prove traceability |\n\n**Promotion is Reversible**: Anomalous behavior \u2192 immediate revert to Research-Only via global kill-switch.\n\n### 2.4 Strategy Trust\n\n| Trust Level | Description | Allowed Actions |\n| :--- | :--- | :--- |\n| **REGISTERED** | Strategy exists in registry | Metadata only |\n| **EVALUATED** | Strategy has evaluation results | Shadow execution |\n| **SHADOW_ACTIVE** | Strategy produces shadow decisions | Paper trading only |\n| **PRODUCTION** | Strategy is live | NOT AVAILABLE in current phase |\n\nNo strategy may auto-promote itself. All trust transitions require Decision Ledger entries.\n\n*(Sources: `docs/governance/RESEARCH_MODULE_GOVERNANCE.md`, `docs/memory/11_deployment/evolution.md`)*\n\n---\n\n## 3. Safety Invariants\n\nThese invariants are the bedrock security guarantees. Violation of any invariant requires immediate system halt.\n\n| ID | Invariant | Description | Severity |\n| :--- | :--- | :--- | :--- |\n| `INV-NO-EXECUTION` | No Execution | System does not execute trades | **ABSOLUTE** |\n| `INV-NO-CAPITAL` | No Capital | System does not move money | **ABSOLUTE** |\n| `INV-NO-SELF-ACTIVATION` | No Self-Activation | System cannot promote itself to production | **ABSOLUTE** |\n| `INV-PROXY-CANONICAL` | Proxy Canonical | All market data must come through canonical proxies | **ABSOLUTE** |\n| `INV-TRUTH-EPOCH-EXPLICIT` | Truth Epoch Explicit | TE is never inferred from system clock | **ABSOLUTE** |\n| `INV-NO-TEMPORAL-INFERENCE` | No Temporal Inference | \"now\" and \"today\" are banned concepts | **ABSOLUTE** |\n| `INV-HONEST-STAGNATION` | Honest Stagnation | System admits when it has no new information | **ABSOLUTE** |\n\n*(Sources: `docs/epistemic/architectural_invariants.md`, existing trust.md)*\n\n---\n\n## 4. Access Controls\n\n### 4.1 Physical Isolation\n\n| Boundary | Rule | Rationale |\n| :--- | :--- | :--- |\n| **Research \u2194 Production** | Research modules reside in `research_modules/`; no imports from `core_modules/` | Prevents accidental inclusion in production |\n| **Market \u2194 Market** | US and India data pipelines share no runtime state | `INV-MARKET-SEPARATION` |\n| **Intelligence \u2194 Execution** | Intelligence layer produces beliefs; execution harness consumes but cannot modify them | Separation of concerns |\n| **Dashboard \u2194 System** | Dashboard is read-only; no write path exists from UI to system state | Observatory principle |\n| **Shadow \u2194 Real** | Shadow execution sinks produce artifacts that can never reach real broker endpoints | Capital protection |\n\n### 4.2 Layer Authority Matrix\n\n| Layer | May Read | May Write | May NOT Touch |\n| :--- | :--- | :--- | :--- |\n| **Ingestion (L0)** | External APIs, raw files | Raw data store | Canonical store, analytics |\n| **Regime (L1)** | Canonical data | Regime state | Strategy decisions, execution |\n| **Narrative (L2)** | Regime state, events | Narrative artifacts | Strategies, execution |\n| **Strategy (L5)** | All upstream beliefs | Shadow decision proposals | Broker APIs, capital state |\n| **Dashboard** | All read-only API endpoints | Nothing | Everything writable |\n| **Governance** | Everything | Holds, suppressions, audit logs | Code logic, capital |\n\n### 4.3 Skill Authority Hierarchy\n\nAll system skills operate within a strict precedence:\n\n| Level | Authority | Description |\n| :--- | :--- | :--- |\n| **1 (Supreme)** | Human Decision | Humans decide; skills cannot override |\n| **2** | Append-Only Ledger | Historical truth; skills may append, not modify |\n| **3** | Structural Integrity | Format and consistency enforcement |\n| **4** | Advisory | Recommendations and flags only |\n\n**Skill Security Rules**:\n- No skill may override a document or decision from a higher authority level\n- No skill may escalate its own authority level\n- All unresolvable conflicts escalate to human judgment\n- No skill executes trades, allocates capital, or self-activates\n\n*(Sources: `docs/epistemic/skills/skills_catalog.md`, `docs/dashboard/ui_guardrails.md`)*\n\n---\n\n## 5. Credential Handling\n\n### 5.1 External API Credentials\n\n| Vendor | Authentication Model | Storage | Rotation |\n| :--- | :--- | :--- | :--- |\n| **Alpha Vantage** | API key (stateless) | `.env` file (local, gitignored) | Pool of keys; daily rate limit per key |\n| **Angel One SmartAPI** | Session-based (login \u2192 token) | `.env` file for client ID/PIN/TOTP; session token in memory | Token refreshed on each scheduler restart |\n\n### 5.2 Credential Security Rules\n\n| Rule | Description |\n| :--- | :--- |\n| **No hardcoded credentials** | All API keys and secrets stored in `.env`, never in source code |\n| **`.env` is gitignored** | Environment file excluded from version control |\n| **Drift detection** | Drift Detector compares `.env` against `.env.example` for key presence and type |\n| **Memory-only tokens** | Session tokens (Angel One) held in process memory; discarded on exit |\n| **No credential sharing** | Each operator instance uses its own credential set |\n| **Credential rotation** | API keys rotated when rate limits change; session tokens refreshed on restart |\n\n### 5.3 Forbidden Credential Behaviors\n\n| Behavior | Status |\n| :--- | :--- |\n| Committing `.env` to Git | **FORBIDDEN** |\n| Loading broker trading credentials | **FORBIDDEN** (`INV-NO-EXECUTION`) |\n| Passing credentials across market boundaries | **FORBIDDEN** |\n| Auto-rotating credentials without operator awareness | **FORBIDDEN** |\n| Using credentials in research modules | **FORBIDDEN** |\n\n*(Sources: `docs/INDIA_WEBSOCKET_ARCHITECTURE.md`, `docs/verification/historical_ingestion_verification.md`)*\n\n---\n\n## 6. Operator Model & User Separation\n\n### 6.1 Operator Authority\n\n| Authority | Description |\n| :--- | :--- |\n| **Specifications** | Humans are final authority on all specifications and decisions |\n| **Governance Holds** | Only operators can release governance holds |\n| **Kill Switches** | Operator-accessible at all times; three-tier hierarchy (Global, Family, Strategy) |\n| **Truth Advancement** | Only operators can advance Truth Epoch through gate passage |\n| **Module Promotion** | Only operators can promote research modules to production |\n| **Credential Management** | Only operators manage `.env` and credential rotation |\n\n### 6.2 Kill-Switch Hierarchy\n\n| Level | Reach | Trigger | Reset Authority |\n| :--- | :--- | :--- | :--- |\n| **Global** | ALL system activity | Manual operator command; drawdown > 10%; 3+ consecutive data integrity failures | **Human only** \u2014 diagnose root cause, modify state file, restart services |\n| **Family** | Specific strategy family | Family drawdown > 3%; manual operator command | **Human only** |\n| **Strategy** | Specific strategy ID | Strategy drawdown > 2%; 3 consecutive stop-losses (symbolic) | **Human only** |\n\n**No automated resets are permitted for ANY kill-switch activation.**\n\n### 6.3 Chat Execution Contract (AI Interface Security)\n\nThe chat interface has strict security boundaries:\n\n| Rule | Description |\n| :--- | :--- |\n| **Chat Only Drafts** | Chat may draft commands but has ZERO execution authority |\n| **Human Confirmation** | All chat-drafted commands require explicit yes/no in CLI bridge |\n| **No Silent Execution** | Running any command without user notification is forbidden |\n| **No Auto-Correction** | Cannot modify a command after human has seen it |\n| **No Hidden Chaining** | Cannot silently trigger secondary commands |\n| **No Privilege Escalation** | Cannot use bridge to run commands outside `bin/run-skill` scope |\n\n### 6.4 Multi-Human Governance\n\n| Scenario | Resolution Policy |\n| :--- | :--- |\n| **Conflicting updates to same artifact** | \"Freshness Rule\" \u2014 update from most recent `main` state takes precedence |\n| **Disagreement on foundational documents** | \"Maintainer Veto\" \u2014 original author holds veto power |\n| **Overrule of veto** | Requires Decision Ledger entry signed by quorum or Project Owner |\n| **Operator attribution** | All governance actions attributed to the acting operator |\n\n*(Sources: `docs/epistemic/chat_execution_contract.md`, `docs/epistemic/impact_resolution_contract.md`, `docs/capital/kill_switch.md`)*\n\n---\n\n## 7. Survivability Obligations\n\nThe Scale & Safety Plane defines non-negotiable survivability guarantees that must be satisfied before any execution capability opens:\n\n| Obligation | Description | Status |\n| :--- | :--- | :--- |\n| `OBL-SS-KILLSWITCH` | Global halt mechanism \u2014 reachable from any state, independent of processing | Binding |\n| `OBL-SS-BOUNDS` | Hard execution limits \u2014 MAX_ACTIVE_STRATEGIES, MAX_EXECUTION_FREQUENCY, etc. | Binding |\n| `OBL-SS-DETERMINISM` | Same input \u2192 same output regardless of load; race-free, reproducible | Binding |\n| `OBL-SS-CIRCUIT` | Safe degradation \u2014 non-critical paths shut down first; no cascading failures | Binding |\n| `OBL-SS-AUDIT` | Bounded, governed audit at scale \u2014 no data loss, bounded ledger growth | Binding |\n| `OBL-SS-CLOSURE` | All above SATISFIED before any execution plane opens | Binding |\n\n**Decision Plane Execution Guarantee** (`OBL-DE-NO-EXEC`): The system must provably prevent broker API calls, order placement, capital movement, position modification, and any market interaction. Verification requires static analysis showing no broker imports and no network calls to trading endpoints.\n\n*(Sources: `docs/epistemic/governance/scale_safety_obligations.md`, `docs/epistemic/governance/decision_plane_obligations.md`)*\n\n---\n\n## 8. Data Deletion & Retention Security\n\n| Category | Retention | Deletion Authority |\n| :--- | :--- | :--- |\n| **Epistemic Artifacts** (narratives, decisions, ledgers) | **PERMANENT** | NEVER deleted; may archive after 3 years |\n| **Audit Logs** (JSON logs) | 90 days active \u2192 1 year archive \u2192 delete | Human approval + drift detector flag |\n| **Raw Input Data** | 1 year active \u2192 cold storage | Human approval required |\n| **Derived Data** (cache, intermediates) | Volatile \u2014 regenerable | Standard cleanup |\n\n**Deletion Protocol**: Use of `rm` or `delete` on covered paths requires:\n1. Verification against retention policy\n2. Human approval (via Drift Detector flag or explicit command)\n\n*(Source: `docs/epistemic/data_retention_policy.md`)*\n\n---\n\n## 9. Research Module Security Guardrails\n\n| Guardrail | Description | Rationale |\n| :--- | :--- | :--- |\n| **Physical Isolation** | Must reside in `research_modules/` | Prevents production contamination |\n| **Import Barrier** | No `core_modules/` imports | Production code unaware of research existence |\n| **Execution Isolation** | No runtime hooks or callbacks | Cannot enter main event loop |\n| **Runtime Kill-Switch** | `ACTIVE_PHASE` check on side-effecting methods | `SecurityException` if `PHASE < 6` |\n| **Configuration Guard** | Explicit `ENABLED` flag defaulting to `FALSE` | No accidental activation |\n| **Warning Headers** | Mandatory code headers | Every file: `## RESEARCH ONLY - NOT FOR LIVE TRADING ##` |\n\n**Forbidden Actions (regardless of phase)**:\n- Auto-optimization of production parameters\n- Signal overriding of core engine logic\n- Deploying logic based solely on backtests\n- Multi-wiring (>1 research module to core loop during initial rollout)\n\n*(Source: `docs/governance/RESEARCH_MODULE_GOVERNANCE.md`)*\n\n---\n\n## Legacy Source Mapping\n\n| Section | Legacy Source Document(s) |\n| :--- | :--- |\n| \u00a71 Philosophy | `RESEARCH_MODULE_GOVERNANCE.md`, `bounded_automation_contract.md` |\n| \u00a72 Trust Domains | `RESEARCH_MODULE_GOVERNANCE.md`, `evolution.md`, component YAMLs |\n| \u00a73 Safety Invariants | `architectural_invariants.md` |\n| \u00a74 Access Boundaries | `skills_catalog.md`, `ui_guardrails.md`, `dashboard_truth_contract.md` |\n| \u00a75 Credentials | `INDIA_WEBSOCKET_ARCHITECTURE.md`, `historical_ingestion_verification.md` |\n| \u00a76 Operator Model | `chat_execution_contract.md`, `impact_resolution_contract.md`, `kill_switch.md` |\n| \u00a77 Survivability | `scale_safety_obligations.md`, `decision_plane_obligations.md` |\n| \u00a78 Retention | `data_retention_policy.md` |\n| \u00a79 Research Guardrails | `RESEARCH_MODULE_GOVERNANCE.md` |\n",
  "10_observability/metrics.md": "# Observability & Metrics\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> This document describes logging intent, metrics concepts, dashboard surfaces, and validation checks.\n> Intent only. No implementation.\n\n---\n\n## 1. Core Observability Principle\n\n**Glass-Box**: Every threshold, decision, and magic number is configurable and observable. No hidden logic. The system's internal state machine must be machine-readable and audit-ready at all times.\n\n| Principle | Description |\n| :--- | :--- |\n| **Total Transparency** | Every computation, decision, and state transition is visible |\n| **Structured over Ad-Hoc** | Machine-parseable structured logs, not debug text dumps |\n| **Provenance Always** | Every displayed value traces back to an artifact path and timestamp |\n| **Silence is Forbidden** | Missing data surfaces as explicit \"UNKNOWN\" or \"UNAVAILABLE\", never as blank or zero |\n| **Staleness is Amplified** | Stale data rendered with dominant warning overlays, not muted |\n\n*(Sources: `docs/epistemic/project_intent.md`, `docs/dashboard/dashboard_truth_contract.md`)*\n\n---\n\n## 2. What Is Measured\n\n### 2.1 Signal Validation & Performance\n\nMeasures effectiveness of signals against definitions in `domain_model.md` and grading in `success_criteria.md`.\n\n| Metric | Description | Source |\n| :--- | :--- | :--- |\n| Signal grade distribution | A/B/C/D grades over time | Momentum Engine output |\n| Genesis acceptance ratio | Historical acceptance rate | Strategy Selector |\n| Signal confidence scores | Per-signal confidence with decay | Meta Engine |\n| Trust scores per signal | Validity, confidence modifier, staleness, conflicts | Meta Engine |\n\n**Signal Grade Definitions**:\n\n| Grade | Meaning |\n| :--- | :--- |\n| **A** | High-quality signal, validated by T+5 and T+15 performance |\n| **B** | Acceptable signal, partial validation |\n| **C** | Marginal signal, inconclusive validation |\n| **D** | Failed signal, negative outcome |\n\n### 2.2 Data Pipeline Health\n\n| Metric | Description | Source |\n| :--- | :--- | :--- |\n| Rows ingested per market per run | Volume tracking for each ingestion cycle | Ingestion components |\n| Rows before/after merge | Delta auditing (bronze \u2192 silver) | Data pipeline |\n| API call counts | Per-key, per-endpoint usage | Ingestion US/India |\n| Rate limit utilization | Percentage of daily API budget consumed | Key rotation pool |\n| Orphan count | Data gaps where expected records are missing | Data quality checks |\n| Schema validation pass/fail | Per-batch schema conformance | Ingestion Gate |\n| Price drift magnitude | Deviation from expected range | Circuit breaker check |\n\n### 2.3 Temporal State\n\n| Metric | Description | Display |\n| :--- | :--- | :--- |\n| **RDT** (Raw Data Time) | When raw data was last received | Per-market on dashboard |\n| **CTT** (Canonical Truth Time) | When canonical store was last updated | Per-market on dashboard |\n| **TE** (Truth Epoch) | What the system \"knows\" as truth | Global dashboard header |\n| Drift magnitude | `CTT - TE` in days | Color-coded badge |\n| Drift direction | Which markets are ahead/behind | Per-market indicator |\n\n**Status Badges**:\n\n| Badge | Condition | Color |\n| :--- | :--- | :--- |\n| `[SYNC]` | `TE == RDT` | Green |\n| `[EVAL PENDING]` | `TE < RDT` (within threshold) | Yellow |\n| `[STALE]` | `TE << RDT` (drift > 2 days) | Red |\n| `[HALTED]` | Governance freeze active | Red |\n| `[INSPECTION MODE]` | Simulation/visualization active | Purple |\n\n### 2.4 Regime State\n\n| Metric | Description | Source |\n| :--- | :--- | :--- |\n| Current regime classification | Per-market (BULLISH, BEARISH, NEUTRAL, UNCERTAIN) | Regime Engine |\n| Regime confidence score | 0.0\u20131.0 with confidence band | Regime Engine |\n| Regime transition alerts | State changes logged with before/after | Regime Engine |\n| Regime stability indicator | Flapping detection (transition count in lookback) | Regime Engine |\n| Proxy status | CANONICAL / DEGRADED / NOT_EVALUATED per market | Proxy Set engine |\n\n### 2.5 Governance Integrity & Compliance\n\nTracks real-time activation of limits and gates defined in `failure_model.md`.\n\n| Metric | Description | Source |\n| :--- | :--- | :--- |\n| Active holds | Currently active governance holds with reasons | Governance component |\n| Active suppressions | Policy-driven action blocks with attribution | Decision/Fragility Policy |\n| Gate pass/fail history | Ingestion Gate, Intelligence Gate, Sync Gate results | Truth Advancement Gates |\n| Circuit breaker state | CLOSED / OPEN / HALF-OPEN per breaker | Fragility Policy |\n| Obligation compliance | Per-obligation SATISFIED / UNMET status | Obligation Index |\n| Drift detection alerts | Configuration, structural, epistemic drift reports | Drift Detector |\n\n### 2.6 Execution & Strategy Metrics\n\n| Metric | Description | Source |\n| :--- | :--- | :--- |\n| Strategy activation set | Which strategies are currently eligible | Strategy Selector |\n| Shadow decision count | Decisions produced in shadow mode | Shadow Execution Sink |\n| Decision routing | HITL vs SHADOW distribution | Decision Plane |\n| Task graph completion | Per-cycle task pass/fail/skip status | Execution Harness |\n| Watcher diagnostics | Per-watcher state changes, anomaly flags | EV-TICK |\n\n*(Sources: component YAMLs, `docs/memory/02_success/success_criteria.md`, `docs/dashboard/temporal_truth_surface.md`)*\n\n---\n\n## 3. Logging Architecture\n\n### 3.1 Log Categories\n\n| Category | Location | Format | Retention | Purpose |\n| :--- | :--- | :--- | :--- | :--- |\n| **Structured logs** | `logs/` per-component | JSON (machine-parseable) | 90 days active \u2192 1 year archive | Operational debugging, automated post-mortems |\n| **Audit logs** | `logs/*.json` | JSON with operator attribution | 90 days active \u2192 1 year archive | Governance actions, hold/release events, operator decisions |\n| **Ingestion logs** | Per-run log files | Structured | 90 days active \u2192 1 year archive | Symbol, endpoint, status, records fetched, latency |\n| **Evolution logs** | `docs/epistemic/ledger/evolution_log.md` | Markdown | **PERMANENT** | System lifecycle changes (\"What\" and \"Why\") |\n| **Decision Ledger** | `docs/epistemic/ledger/decisions.md` | Markdown | **PERMANENT** | Authoritative human decisions |\n| **IRR/Shadow logs** | `docs/irr/runtime/` | JSON + Markdown | **PERMANENT** | Reality run observations and failure evidence |\n\n### 3.2 Structured Logging Intent\n\nThe system is transitioning from ad-hoc debug text to structured audit trails:\n\n| Property | Requirement |\n| :--- | :--- |\n| **Machine-parseable** | JSON format with consistent schema per component |\n| **Timestamped** | ISO8601 with timezone on every entry |\n| **Attributed** | Operator identity, skill identity, or component identity on every entry |\n| **Contextual** | Market, TE, regime state context attached to each entry |\n| **Bounded** | `MAX_LEDGER_ENTRIES_PER_HOUR` enforced to prevent unbounded growth |\n| **Provable** | Audit data loss is FORBIDDEN (`OBL-SS-AUDIT`) |\n\n### 3.3 Ingestion-Specific Logging\n\n| Field | Description |\n| :--- | :--- |\n| `symbol` | What instrument was ingested |\n| `endpoint` | Which API endpoint was called |\n| `status` | HTTP status / success indicator |\n| `records_fetched` | Count of records returned |\n| `latency` | Time to complete the request |\n| `key_used` | Which API key (anonymized) was used |\n| `retry_count` | How many retries were attempted |\n\n### 3.4 What is NOT Logged\n\n| Exclusion | Reason |\n| :--- | :--- |\n| API keys / secrets | Security \u2014 never in logs |\n| Raw price data in log entries | Volume \u2014 stored separately in data layer |\n| Performance predictions | Epistemic \u2014 system does not predict |\n| Recommendation language | Invariant \u2014 observatory principle |\n\n*(Sources: `docs/us_market_engine_design.md`, `docs/epistemic/data_retention_policy.md`, `docs/epistemic/governance/scale_safety_obligations.md`)*\n\n---\n\n## 4. Dashboard Surfaces\n\n### 4.1 Dashboard Purpose\n\nThe dashboard is a **truth surface**, not a control panel. It projects the internal state of governance and intelligence layers to human operators.\n\n| It Answers | It Does NOT Answer |\n| :--- | :--- |\n| \"What is true now\" (based on bound TE) | \"What to do\" |\n| \"What state is the system in\" | \"What might happen\" |\n| \"What constraints are active\" | \"How to profit\" |\n\n### 4.2 Dashboard Panels & Surfaces\n\n| Surface | Content | Data Source |\n| :--- | :--- | :--- |\n| **Temporal Truth Banner** | TE, CTT, RDT per market with color-coded badges | `temporal_state_{market}.json` |\n| **Regime State Panel** | Current classification, confidence, stability, proxy status | `regime_context_{market}.json` |\n| **Decision Policy Panel** | Active permissions, blocked actions, reasons | `decision_policy_{market}.json` |\n| **Fragility Policy Panel** | Stress state, active constraints, signal details | `fragility_context_{market}.json` |\n| **Signal Quality Heatmap** | Grade distribution over time | Momentum Engine output |\n| **Governance Hold Panel** | Active holds, suppressions, circuit breaker status | Governance component |\n| **Capital Readiness Panel** | Ceilings, drawdown state, kill-switch status | Capital readiness artifacts |\n| **Watcher Diagnostics** | Per-watcher state changes, EV-TICK cycle status | EV-TICK output |\n| **Narrative Panel** | Current narratives with source binding and confidence | Narrative Engine output |\n\n### 4.3 Widget Binding Rules (Strict)\n\nEvery data-bearing widget must satisfy:\n\n| Rule | Description |\n| :--- | :--- |\n| **Single artifact binding** | Each widget binds to exactly one backend artifact |\n| **Single layer binding** | Each widget binds to exactly one system layer (DATA, INTELLIGENCE, GOVERNANCE) |\n| **Single epoch binding** | Each widget binds to exactly one Truth Epoch |\n| **Trace badge** | Inspectable lineage: `[Data Role] \u2192 [Source Artifact] \u2192 [Upstream Provider]` |\n| **Unbound = invalid** | Unbound widgets must be removed or show error state |\n\n### 4.4 Degradation & Staleness Display\n\n| State | Dashboard Response |\n| :--- | :--- |\n| Data missing | Explicit \"UNKNOWN\" / \"UNAVAILABLE\" \u2014 never blank, never zero |\n| Data stale | Dominant warning overlay: \"STALE (Xm since last update) \u2014 DO NOT TRUST REGIME\" |\n| Process failed | Explicit error message with artifact path |\n| Governance frozen | Banner: \"\ud83d\uded1 TRUTH FROZEN BY GOVERNANCE\" with reason |\n| Inspection mode | Banner: \"INSPECTION MODE: TE-XXXX-XX-XX\" on all components; live bindings hidden |\n| Constraint active (HOLD, OBSERVE_ONLY) | Treated as nominal \u2014 NOT displayed as \"broken\" or \"stopped\" |\n\n### 4.5 Forbidden Dashboard Semantics\n\n| Forbidden Element | Reason |\n| :--- | :--- |\n| Rankings (\"best\" / \"worst\") | Implies judgment |\n| Arbitrary scores (1-10, 0-100) | Hides complexity |\n| Directional arrows | Implies future movement |\n| Green/Red for market direction | Color reserved for system health only |\n| \"ACTIVE\" without context | Must always be qualified (e.g., \"ACTIVE (UNDER CONSTRAINTS)\") |\n| \"You should...\" / \"Buy\" / \"Sell\" | Implies recommendation |\n| \"Opportunity\" / \"Profit\" / \"Target price\" | Implies forecast |\n\n*(Sources: `docs/dashboard/dashboard_truth_contract.md`, `docs/dashboard/temporal_truth_surface.md`, `docs/dashboard/ui_guardrails.md`)*\n\n---\n\n## 5. Alerting\n\n### 5.1 Alerting Strategy\n\nAlerts inform. They never act. Delivery is via dashboard visual badge (polling backend state).\n\n### 5.2 Alert Definitions\n\n| Alert | Trigger | Severity | Color | Purpose |\n| :--- | :--- | :--- | :--- | :--- |\n| **Watcher State Change** | A watcher's state differs between ticks | Warning | \ud83d\udfe1 Yellow | Notify observer of regime shifts |\n| **System State Change** | `system_status.status` transitions (e.g., IDLE \u2192 OBSERVING) | Info | \ud83d\udfe1 Yellow | Awareness of system mode changes |\n| **Data Staleness** | Last EV-TICK timestamp > threshold (e.g., 15 min) | Error | \ud83d\udd34 Red | Investigation required (manual) |\n| **Governance Violation** | `governance_status != CLEAN` | Critical | \ud83d\udd34 Red | HALT (passive \u2014 alert only) |\n| **Temporal Drift** | `CTT >> TE` beyond 2-day threshold | Warning | \ud83d\udfe1 Yellow | Operator should evaluate |\n| **Circuit Breaker Activation** | Fragility policy enters SYSTEMIC_STRESS | Critical | \ud83d\udd34 Red | System in defensive posture |\n\n### 5.3 Alerting Constraints\n\n| Constraint | Description |\n| :--- | :--- |\n| **No auto-action** | Alerts never trigger automated responses |\n| **No external notification** | Current phase: dashboard-only (no email, SMS, webhook) |\n| **Log-based** | All alerts backed by structured log entries |\n| **Bounded** | Alert frequency governed to prevent flooding |\n\n*(Source: `docs/dashboard/alerting_rules.md`)*\n\n---\n\n## 6. Validation Checks\n\n### 6.1 Data Validation\n\n| Check | When | What | Failure Response |\n| :--- | :--- | :--- | :--- |\n| **Schema validation** | On every ingestion batch | Required fields, types, constraints (e.g., `high \u2265 low`) | Reject batch; CTT does NOT advance |\n| **Date continuity** | Post-ingestion | No unexpected gaps (allowing weekends/holidays) | Flag gaps for review |\n| **Volume non-negativity** | Post-ingestion | All volumes \u2265 0 | Reject record |\n| **Price range check** | Post-ingestion | No zero or negative prices; drift within circuit breaker | Quarantine anomalous records |\n| **Duplicate detection** | Silver layer processing | Dedup by `(symbol, timestamp)` | Retain latest, log duplicate |\n| **Append-only verification** | On write | Raw layer always appends, never overwrites | Structural invariant |\n\n### 6.2 Regime Validation\n\n| Check | When | What | Failure Response |\n| :--- | :--- | :--- | :--- |\n| **Symbol completeness** | Pre-computation | All required proxy symbols present | `NOT_VIABLE` \u2014 computation FORBIDDEN |\n| **History depth** | Pre-computation | \u2265 756 trading days per symbol | `NOT_VIABLE` |\n| **Temporal alignment** | Pre-computation | Intersection across symbols \u2265 756 days | Exclude misaligned symbols |\n| **Data quality** | Pre-computation | No forward-fill, no interpolation, no synthetic | `NOT_VIABLE` |\n| **Regime confidence** | Post-computation | Confidence above minimum threshold | Degrade downstream permissions |\n\n### 6.3 Narrative Validation\n\n| Check | When | What | Failure Response |\n| :--- | :--- | :--- | :--- |\n| **Source binding** | Pre-emission | Every sentence has a citation to input artifact | Reject sentence |\n| **Grammar** | Pre-emission | Basic grammatical correctness | Reject sentence |\n| **Regime compatibility** | Pre-emission | Narrative consistent with current regime state | Reject sentence |\n| **Prohibited words** | Pre-emission | No recommendation language, no predictions | Reject sentence |\n| **Confidence check** | Pre-emission | Low confidence \u2192 uncertainty warning appended | Append warning |\n| **Staleness check** | Pre-emission | Data age within threshold | Prepend staleness warning |\n\n### 6.4 Governance Validation\n\n| Check | When | What | Failure Response |\n| :--- | :--- | :--- | :--- |\n| **Invariant check** | Continuous | All safety invariants hold | Immediate halt on violation |\n| **Gate passage** | On advancement request | All gate prerequisites satisfied | Block advancement |\n| **Obligation compliance** | On phase transition | All blocking obligations SATISFIED | Block transition |\n| **Drift detection** | On demand / scheduled | Configuration, structural, epistemic drift | Flag for review or block deployment |\n| **Kill-switch reachability** | System startup | Kill-switch mechanism operational | Block system start |\n\n### 6.5 Execution Harness Validation\n\n| Check | When | What | Failure Response |\n| :--- | :--- | :--- | :--- |\n| **Task graph DAG** | Before execution | No circular dependencies | Reject cycle |\n| **State freshness** | Before task execution | All inputs within `MAX_STALENESS` | Reject stale state |\n| **Skill side-effect declaration** | On skill registration | All outputs declared | Quarantine skill |\n| **Permission chain** | Before action task | FactorPermission validated | Reject unauthorized action |\n| **Shadow-only routing** | On every decision | All decisions route to shadow sink | Block if real endpoint detected |\n\n*(Sources: `docs/verification/historical_ingestion_verification.md`, `docs/narrative/failure_and_hallucination_controls.md`, `docs/epistemic/governance/regime_ingestion_obligations.md`, `docs/contracts/execution_harness_contract.md`)*\n\n---\n\n## 7. Observability Success Criteria\n\n| Criterion | Description | Status |\n| :--- | :--- | :--- |\n| **Glass-box** | All layers fully observable \u2014 no hidden logic | Required |\n| **Zero orphans** | No unexplained data gaps for 2 weeks sustained | Phase exit criterion |\n| **Idempotency** | Live signals match historical replay signals 100% for same data period | Phase exit criterion |\n| **Structured logging** | All components emit JSON-structured logs | In progress |\n| **Dashboard completeness** | All cognitive layers represented on dashboard | In progress |\n| **Audit viewer** | Human-readable view of machine-parseable audit logs | Available (Skill #11) |\n\n*(Source: `docs/memory/02_success/success_criteria.md`)*\n\n---\n\n## Legacy Source Mapping\n\n| Section | Legacy Source Document(s) |\n| :--- | :--- |\n| \u00a71 Principles | `docs/epistemic/project_intent.md`, `docs/dashboard/dashboard_truth_contract.md` |\n| \u00a72 Metrics | Component YAMLs, `docs/memory/02_success/success_criteria.md` |\n| \u00a73 Logging | `docs/us_market_engine_design.md`, `docs/epistemic/data_retention_policy.md`, `docs/epistemic/governance/scale_safety_obligations.md` |\n| \u00a74 Dashboard | `docs/dashboard/dashboard_truth_contract.md`, `docs/dashboard/temporal_truth_surface.md`, `docs/dashboard/ui_guardrails.md` |\n| \u00a75 Alerting | `docs/dashboard/alerting_rules.md` |\n| \u00a76 Validation | `docs/verification/historical_ingestion_verification.md`, `docs/narrative/failure_and_hallucination_controls.md`, `docs/epistemic/governance/regime_ingestion_obligations.md` |\n| \u00a77 Success | `docs/memory/02_success/success_criteria.md` |\n",
  "11_deployment/evolution.md": "# Deployment & Evolution\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> **Conflict Handling**: Where legacy source docs conflict with Domain Model, mark OPEN_CONFLICT.\n\n> This document describes environments, evolution plans, migration paths, and release assumptions.\n> Intent only. No implementation.\n\n---\n\n## 1. Evolution Principles\n\n| Principle | Description |\n| :--- | :--- |\n| **Trust is Earned** | Research insight \u2260 trading authority; every capability must prove itself before promotion |\n| **Freeze by Default** | Default state for all subsystems is FROZEN; unfreeze requires explicit justification and DID |\n| **Boring is Beautiful** | Production remains slow-changing, conservative, and boring by design |\n| **Evolution \u2260 Drift** | Authorized change through governance is evolution; silent unauthorized change is drift |\n| **One-Skill-at-a-Time** | Development focuses on a single skill until authoritative completion; parallel work is forbidden |\n| **Audit Before Scale** | No new capability is added until the previous one is fully verifiable |\n| **Rollback First** | Workflows prioritize recoverability over speed |\n\n*(Sources: `docs/architecture/DWBS.md`, `docs/epistemic/roadmap/dwbs_post_freeze.md`, `docs/VISION_BACKLOG.md`)*\n\n---\n\n## 2. The Three Worlds\n\nThese boundaries are non-negotiable. Violation corrupts the entire system.\n\n| World | Purpose | Characteristics | Transition Rule |\n| :--- | :--- | :--- | :--- |\n| **Production** | Live capital operations | Stable, conservative, slow-changing, boring by design | Only accepts GOVERNANCE-PROMOTED modules |\n| **Research** | Experimental validation | Failure-tolerant, isolated, requires governance passage | Promotes via 5-gate process (see \u00a76.2) |\n| **Vision** | Conceptual exploration | Non-actionable, awareness-only | NEVER leaks into Production or Research code |\n\n**Critical Rules**:\n- Vision items MUST NOT leak into Production\n- Research items MUST pass governance before Production\n- Production remains boring by design\n\n*(Source: `docs/VISION_BACKLOG.md`, `docs/memory/01_scope/boundaries.md`)*\n\n---\n\n## 3. Runtime Environment\n\n### 3.1 Current Deployment Model\n\n| Component | Runtime | Port / Schedule | Notes |\n| :--- | :--- | :--- | :--- |\n| **Backend API** | Python / FastAPI | Port 8000 | Serves dashboard data |\n| **Frontend Dashboard** | Vite / React | Port 5173 | Truth surface (read-only) |\n| **US Data Pipeline** | Python scripts (batch) | Daily scheduled | Alpha Vantage REST |\n| **India Data Pipeline** | Python scripts (batch + WebSocket) | Market hours | Angel One SmartAPI |\n| **Scheduler** | Windows Scheduled Tasks | Active (Daily/Weekly) | Local orchestration |\n| **EV-TICK** | Python CRON job | Configurable interval | Passive system state polling |\n\n### 3.2 Environment Assumptions\n\n| Assumption | Description |\n| :--- | :--- |\n| **Local-first** | All computation runs on a single Windows machine |\n| **No cloud dependencies** | System does not depend on cloud infrastructure for core operations |\n| **No database server** | Data stored in files (Parquet, JSON, JSONL); no RDBMS, no separate DB process |\n| **Single-operator** | System designed for single operator; multi-human governance defined but not enforced at infrastructure level |\n| **No containerization** | Python virtualenv + Node.js; no Docker in current phase |\n| **Network required** | Only for external API calls (Alpha Vantage, Angel One); system operates without network for analysis |\n\n### 3.3 Data Layer Structure\n\n| Layer | Storage | Mutability | Purpose |\n| :--- | :--- | :--- | :--- |\n| **Bronze (Raw)** | `data/raw/` JSONL | Append-only | External API responses, unvalidated |\n| **Silver (Canonical)** | `data/processed/` Parquet | Immutable after validation | Deduplicated, schema-conforming |\n| **Gold (Analytics)** | `data/decisions/`, `data/narratives/` | Immutable once generated | Regime, narrative, factor artifacts |\n| **Epistemic** | `docs/epistemic/ledger/` Markdown | Append-only (permanent) | Decisions, evolution, assumptions |\n| **Audit** | `logs/` JSON | 90-day active lifecycle | Operational telemetry |\n\n*(Sources: `docs/memory/04_architecture/data_flow.md`, `docs/epistemic/data_retention_policy.md`)*\n\n---\n\n## 4. Phase Model \u2014 Foundation Phases (Closed)\n\nThese phases are completed and locked. Modifications require explicit lock-breaking.\n\n### 4.1 Phase 1: API-Based Ingestion\n\n| Property | Value |\n| :--- | :--- |\n| **Status** | \u2705 CLOSED (2026-01-03) |\n| **Scope** | Angel One SmartAPI ingestion for live OHLC and LTP data |\n| **Lock File** | `docs/phase_locks/PHASE_1_INGESTION_LOCK.md` |\n| **Maintenance** | No new ingestion features permitted |\n| **Break Policy** | Justification document + senior engineer review |\n\n### 4.2 Phase 1B: Historical Data Ingestion\n\n| Property | Value |\n| :--- | :--- |\n| **Status** | \u2705 CLOSED (2026-01-03) |\n| **Scope** | Historical daily candle ingestion via Angel One (ON-DEMAND CLI only) |\n| **Lock File** | `docs/phase_locks/PHASE_1B_HISTORICAL_INGESTION_LOCK.md` |\n| **Critical Restriction** | Historical data NEVER influences live momentum engine; NEVER wired into scheduler |\n| **Break Policy** | Phase Unlock Request + justification + isolation guarantee + re-lock after changes |\n\n### 4.3 Phase 2: Processed Data Layer\n\n| Property | Value |\n| :--- | :--- |\n| **Status** | \u2705 CLOSED (2026-01-03) |\n| **Scope** | Deterministic, idempotent JSONL \u2192 Parquet transformation |\n| **Lock File** | `docs/phase_locks/PHASE_2_PROCESSING_LOCK.md` |\n| **Frozen Logic** | No indicators or strategies in this layer |\n| **Enhancement Rule** | New data enhancements MUST occur in downstream Gold/Strategy layer |\n\n### 4.4 Phase 3: Momentum Engine v0\n\n| Property | Value |\n| :--- | :--- |\n| **Status** | \u2705 CLOSED (2026-01-03) |\n| **Scope** | Minimalist momentum (VWAP, HOD proximity, Relative Volume) |\n| **Lock File** | `docs/phase_locks/PHASE_3_MOMENTUM_LOCK.md` |\n| **Frozen Logic** | No new indicators, ML models, or backtesting logic |\n| **Enhancement Rule** | RSI, threshold changes, etc. require explicit lock-breaking |\n\n---\n\n## 5. Phase Model \u2014 Structural Planes (Completed)\n\nThese represent the DWBS-governed structural build, completed sequentially with gate validation.\n\n### 5.1 Plane Summary\n\n| # | Plane | Status | Gate | Key Milestone |\n| :--- | :--- | :--- | :--- | :--- |\n| **1** | Control Plane | \u2705 COMPLETE | Belief + Factor + Strategy policy operational | Epistemic foundation established |\n| **2** | Orchestration Plane | \u2705 COMPLETE | Task abstraction + graph + harness binding | Governed execution infrastructure |\n| **3** | Strategy Plane | \u2705 COMPLETE | Registry + lifecycle + single-strategy mapping | Governed strategy registration |\n| **4** | Structural Activation | \u2705 COMPLETE | Macro + Factor layers activation (latent \u2192 referenced) | Live state production |\n| **5** | Scale & Safety | \u2705 COMPLETE | Kill-switch + bounds + determinism + circuit breakers + audit | **STRUCTURALLY PRODUCTION-READY** |\n| **6** | Decision Plane | \u2705 COMPLETE | Decision spec + HITL + Shadow + Audit | **CHOICE FORMATION AUTHORIZED** (HITL + Shadow) |\n| **7** | Evolution Phase | \u2705 COMPLETE | Bulk eval + replay + paper P&L + diagnostics + rejection | **STRATEGY EVALUATION AUTHORIZED** |\n\n### 5.2 Plane Build Order (Mandatory Sequence)\n\n*(Original Diagram: `docs/memory/_appendix/evolution_code.md`)*\n\n1. **Control Plane**: Belief \u2192 Factor Policy \u2192 Strategy Policy \u2192 Validator Gate\n2. **Orchestration Plane**: Task Abstraction \u2192 Task Graph \u2192 Harness Binding\n3. **Strategy Plane**: Strategy Mapping \u2192 Registry \u2192 Lifecycle\n4. **Structural Activation Plane**: Macro Activation \u2192 Factor Activation\n5. **Scale & Safety Plane**: Multi-Strategy Coexistence \u2192 Failure Modes \u2192 Permission Revocation\n6. **Decision Plane (HITL + Shadow)**: Decision Spec \u2192 HITL Gate \u2192 Shadow Sink \u2192 Decision Audit\n7. **Evolution Phase (Learning & Debugging)**: Bulk Registration \u2192 Replay \u2192 Paper P&L \u2192 Diagnostics \u2192 Rejection Analysis\n\n**Invariant**: Planes are sequentially gated. Cross-plane shortcuts are forbidden.\n\n### 5.3 Post-Plane Evolution Activities (Completed)\n\n| Activity | Scope | Status |\n| :--- | :--- | :--- |\n| Regime Observability Audit | Data sufficiency + alignment + viability | \u2705 COMPLETE |\n| Regime Data Ingestion | 7 symbols, 756+ trading days each | \u2705 SATISFIED |\n| Strategy Universe Finalization | 8 families, 24 strategies, all EVOLUTION_ONLY | \u2705 COMPLETE |\n| Momentum Specialization | 3 Momentum variants (Strict, Accelerating, Persistent) | \u2705 COMPLETE |\n| Governance Layer Implementation | Decision Policy + Fragility + Parity + Narrative + Reality Runs | \u2705 COMPLETE |\n| UI Multifold Expansion (Phase 8) | Full dashboard surfaces, power user controls, provenance | \u2705 COMPLETE |\n\n*(Sources: `docs/architecture/DWBS.md`, `docs/epistemic/ledger/evolution_log.md`)*\n\n---\n\n## 6. Migration Paths\n\n### 6.1 Module Authority Migration\n\nModules migrate through explicit authority classifications:\n\n| Classification | Live Influence | Core Import | Free Modification | Description |\n| :--- | :--- | :--- | :--- | :--- |\n| **PRODUCTION-ACTIVE** | YES | YES | NO | Powers live execution; requires 100% test pass + sign-off |\n| **PRODUCTION-DORMANT** | NO | YES | NO | Core infrastructure, currently bypassed or monitor-only |\n| **RESEARCH-ONLY** | NO | NO | YES | Analytical modules, physically isolated |\n| **EXPERIMENTAL** | NO | NO | YES | Scratchpad logic, unverified ideas |\n| **DEPRECATED** | NO | NO | NO | Legacy code targeted for removal |\n\n**Migration Policy**:\n- Modules in `core_modules/` overlapping with Research MUST migrate to `research_modules/`\n- Upon migration, status changes to RESEARCH-ONLY with technical decoupling from production call stacks\n- No duplicate implementation across production and research (Single Authority Source)\n- Import lockdown: `research_modules` imports into `core_modules` are auto-rejected\n\n**Completed Migrations**:\n\n| Module | From | To | Status |\n| :--- | :--- | :--- | :--- |\n| Backtesting | Various | `research_modules/backtesting/` | \u2705 Complete |\n| Volatility Context | Various | `research_modules/volatility_context/` | \u2705 Complete |\n| News Sentiment | Various | `research_modules/news_sentiment/` | \u2705 Complete |\n| Risk Models | Various | `research_modules/risk_models/` | \u2705 Complete |\n\n**Pending Migrations**:\n\n| Module | Current Location | Target | Reason |\n| :--- | :--- | :--- | :--- |\n| Portfolio Opt | `src/institutional_modules/` | `research_modules/` | Overlaps with Research |\n| Risk Estimation | `src/core_modules/` | `research_modules/` | Placeholder; overlaps with Risk Models |\n| OMS / EMS | `src/institutional_modules/` | `src/core_modules/infra` | Production-Dormant infrastructure |\n| Compliance Engine | `src/institutional_modules/` | `src/core_modules/infra` | Production-Dormant infrastructure |\n| Technical Scanner | `src/pro_modules/` | Deprecate \u2192 merge into Research | Experimental; overlapping |\n\n### 6.2 Research \u2192 Production Promotion Path\n\nA 5-gate sequential promotion process:\n\n| Gate | Requirement | Purpose |\n| :--- | :--- | :--- |\n| **1. Phase Threshold** | Project reaches module's defined Activation Phase | Prevents premature promotion |\n| **2. Observation (30 days)** | Error-free data logging in Research state for 30 trading days | Proves stability |\n| **3. Paper Trading (100 trades)** | 100 consecutive simulated trades with < 5% slippage variance | Proves accuracy |\n| **4. Human Approval** | Explicit sign-off in `ACTIVATION_LOG.md` | Proves intent |\n| **5. Test Coverage (90%)** | Unit + integration tests pass | Proves reliability |\n\n**Promotion Execution**:\n- Single dedicated PR tagged `[PROMOTION]`\n- Import barriers removed only for promoted module\n- Phase lock check (`ACTIVE_PHASE`) removed for promoted module\n\n**Promotion is Reversible**: Anomalous production behavior \u2192 immediate revert to Research-Only via global kill-switch.\n\n### 6.3 Planned Research Module Activation Schedule\n\n| Module | Planned Activation Phase | Current Status |\n| :--- | :--- | :--- |\n| Backtesting Engine | Phase 6+ | RESEARCH-ONLY |\n| Volatility / Market Context | Phase 7+ | RESEARCH-ONLY |\n| Risk Modeling & Position Sizing | Phase 8+ | RESEARCH-ONLY |\n| News & Sentiment Analysis | Phase 9+ | RESEARCH-ONLY |\n\n*(Sources: `docs/governance/MODULE_AUTHORITY_MATRIX.md`, `docs/governance/RESEARCH_MODULE_GOVERNANCE.md`)*\n\n---\n\n## 7. Phase Lock Governance\n\n### 7.1 Phase Lock Concept\n\nPhase Locks are structural freezes that preserve system integrity during mutation phases. They track documents and subsystems that are frozen and may not be modified without governance action.\n\n### 7.2 Locked Contracts (Epistemic Foundation)\n\n| Artifact ID | Name | Owner | Expiration | Exception Policy |\n| :--- | :--- | :--- | :--- | :--- |\n| `CON-001` | `market_proxy_sets.md` | Governance | Indefinite | Requires `SYSTEM_MUTATION` |\n| `CON-002` | `proxy_dependency_contracts.md` | Architecture | Indefinite | Requires `SYSTEM_MUTATION` |\n| `CON-003` | `truth_epoch_scoping.md` | Epistemic | Indefinite | **NEVER** |\n\n### 7.3 Mutable Registries (Operational State)\n\n| Artifact ID | Registry | Owner | Mutability | Trigger |\n| :--- | :--- | :--- | :--- | :--- |\n| `REG-001` | `coverage_gap_register.md` | Data | **Open** | Discovery of new gap |\n| `REG-002` | `data_source_governance.md` | Data | **Open** | New ingestion source |\n| `REG-003` | `degraded_state_registry.md` | Logic | **Open** | Detection of failure mode |\n\n### 7.4 Lock Breaking Protocol\n\nTo modify a locked artifact:\n\n1. Create a Phase Unlock Request document with explicit justification\n2. Identify all downstream impacts (DID)\n3. Obtain senior engineer / architect review\n4. Perform changes with audit trail\n5. Re-lock after changes with updated verification documentation\n6. Log lock break in `phase_lock_registry.md` audit trail\n\n*(Source: `docs/governance/phase_lock_registry.md`)*\n\n---\n\n## 8. Truth Advancement Gates (Release Gates)\n\nTruth Epoch advancement is the system's equivalent of a \"release\" \u2014 it advances what the system considers true. Each advancement passes through explicit gates.\n\n### 8.1 Gate 1: Raw \u2192 Canonical (Ingestion Gate)\n\n| Check | Description |\n| :--- | :--- |\n| Schema validity | All required columns present and typed correctly |\n| Temporal continuity | No gaps greater than `MAX_GAP` (weekend/holiday tolerance) |\n| Data integrity | No NaN/Inf; `High \u2265 Low`; `Volume \u2265 0` |\n| Drift check | Price change within circuit breaker threshold (manual review if exceeded) |\n\n**PASS** \u2192 Append to Canonical Store, update CTT.\n**FAIL** \u2192 Reject ingestion, raise alert, CTT remains at T\u22121.\n\n### 8.2 Gate 2: Canonical \u2192 Evaluation (Intelligence Gate)\n\n| Check | Description |\n| :--- | :--- |\n| Data completeness | All required proxy symbols have CTT \u2265 target TE |\n| Epistemic health | No outstanding critical alerts; Inspection Mode INACTIVE |\n| Policy compliance | Strategy eligibility and risk constraints valid |\n\n**PASS** \u2192 Execute Factor/Strategy/Governance, update TE to match CTT.\n**FAIL** \u2192 System Halt; TE remains at T\u22121; dashboard shows STALE.\n\n### 8.3 Gate 3: Global Synchronization (Sanity Gate)\n\n| Check | Description |\n| :--- | :--- |\n| Cross-market drift | `abs(TE_US \u2212 TE_INDIA) \u2264 1 Day` |\n| Failure | Warn operator; allow independent operation unless explicit dependency |\n\n### 8.4 Gate 4: Manual Override (Emergency Gate)\n\n| Property | Description |\n| :--- | :--- |\n| Authority | Admin / Operator only |\n| Actions | Force TE advancement or rollback |\n| Requirements | Logged justification in audit_log; CLI with explicit confirmation flag |\n\n*(Source: `docs/governance/truth_advancement_gates.md`)*\n\n---\n\n## 9. DWBS Post-Freeze Roadmap (Future Phases)\n\nThese represent potential future work inventory. Inclusion does NOT imply execution.\n\n| Phase | Objective | Status | Exit Condition |\n| :--- | :--- | :--- | :--- |\n| **P1 \u2014 Execution Bridging** | Safe Chat \u2192 CLI bridge | \u2705 Executed | Bridge operational, contract authoritative |\n| **P2 \u2014 Skill Portfolio** | Drift Detector, Pattern Matcher, Constraint Validator | \u2705 Executed | Skills specified and implemented |\n| **P3 \u2014 Workflow Stabilization** | SOD/EOD standardization, troubleshooting runbooks | \u2705 Executed | Operator has paved paths for routine ops |\n| **P4 \u2014 Multi-Human Governance** | Concurrent DID conflict resolution, operator attribution | Defined | System handles multi-user attribution |\n| **P5 \u2014 Observability Hardening** | Structured logging, Audit Log Viewer, retention policy | \u2705 Executed | All system actions irrevocably traceable |\n| **P6 \u2014 Selective Automation** | Bounded automation contract, Monitor Trigger prototype | \u2705 Executed | Strict containment proven |\n| **P7 \u2014 Institutionalization** | Finalize ledgers, freeze Skill Catalog v1.0, archive dev artifacts | Frozen | System requires zero dev maintenance |\n\n### 9.1 Global Control Rules\n\n| Rule | Description |\n| :--- | :--- |\n| **Freeze Discipline** | Default state is FROZEN; unfreeze requires justification + DID |\n| **One-Skill-at-a-Time** | Focus on single skill until authoritative completion |\n| **Audit-Before-Scale** | Previous capability fully verifiable before adding new |\n| **Rollback-First** | Recoverability over speed |\n| **No Autonomy** | No autonomous loops without dedicated, isolated milestone |\n\n*(Source: `docs/epistemic/roadmap/dwbs_post_freeze.md`)*\n\n---\n\n## 10. Release Assumptions\n\n### 10.1 Current Phase Assumptions\n\n| Assumption | Description |\n| :--- | :--- |\n| **Shadow Mode only** | System operates in Research & Validation; no live money |\n| **Local execution** | All pipelines and services run on a single Windows machine |\n| **Single operator** | One human operator; multi-human governance defined but not enforced |\n| **API availability** | Alpha Vantage and Angel One APIs remain accessible with current key pools |\n| **No production execution pathway** | `INV-NO-EXECUTION` and `INV-NO-CAPITAL` are absolute |\n| **Idempotent processing** | Same input \u2192 same output for all pipelines |\n| **Core layers frozen** | Genesis, Regime, Accumulation cognitive layers are structurally frozen |\n\n### 10.2 Phase Exit Criteria (Current \u2192 Next)\n\n| Criterion | Threshold |\n| :--- | :--- |\n| **Stability** | Zero orphans (data gaps) and zero critical crashes for 2 weeks sustained |\n| **Signal Quality** | Consistent A or B grade signals in Shadow Mode |\n| **Idempotency** | Live signals match Historical Replay signals 100% for same data period |\n| **Regime Stability** | Strategy performs predictably across 2+ distinct regimes |\n| **Lens Consensus** | High-conviction ideas consistently outperform baseline |\n| **Drawdown Control** | Max drawdown < defined threshold in simulation |\n\n### 10.3 What Cannot Be Released (Blocked)\n\n| Item | Blocking Condition | Status |\n| :--- | :--- | :--- |\n| **Optimization Phase** | Blocked until Evolution closure and all IRR findings resolved | \ud83d\udd34 BLOCKED |\n| **Execution Plane (D014+)** | Permanently blocked in current architecture | \ud83d\udd34 PERMANENTLY BLOCKED |\n| **Broker connectivity** | Requires all OBL-DE-* satisfied + explicit D014 decision | \ud83d\udd34 BLOCKED |\n| **Auto-optimization** | Forbidden action regardless of phase | \ud83d\udd34 FORBIDDEN |\n| **Signal overriding** | Forbidden action regardless of phase | \ud83d\udd34 FORBIDDEN |\n\n### 10.4 Release Process Assumptions\n\n| Assumption | Description |\n| :--- | :--- |\n| **No CI/CD** | Current deployment is manual; no automated build/deploy pipeline |\n| **Git-based versioning** | All artifacts version-controlled in Git |\n| **PR-based promotion** | Module promotions via dedicated tagged PRs |\n| **DID accompaniment** | Every significant change produces a Documentation Impact Declaration |\n| **Execution Plan required** | Tasks must be whitelisted in an Execution Plan before execution |\n| **Stop-on-failure** | If any task in a plan fails, the entire plan halts |\n| **Human verification** | Mode A tasks require explicit human sign-off in bridge log |\n| **Rollback baseline** | Failed execution reverts to last known frozen state |\n\n*(Sources: `docs/epistemic/current_phase.md`, `docs/memory/02_success/success_criteria.md`, `docs/epistemic/roadmap/execution_plan.md`)*\n\n---\n\n## 11. Evolution Rules\n\n### 11.1 How New Layers May Be Added\n\n1. **Declare** in epistemic documents (`latent_structural_layers.md`)\n2. **Authorize** via Decision Ledger entry (D00X)\n3. **Amend** DWBS to include in Structural Activation Plane\n4. **Update** validator with new layer rules\n\n### 11.2 How Planes May Be Extended\n\n| Extension Type | Process |\n| :--- | :--- |\n| New DWBS items within existing plane | DWBS amendment with justification |\n| New plane (rare) | Full design review |\n| Dependency updates | Explicit re-mapping of build order |\n\n### 11.3 How Deprecations Occur\n\n1. **Decision Ledger entry** authorizing deprecation\n2. **RETIRED status** \u2014 deprecated items move to RETIRED, not deleted\n3. **Validator enforcement** \u2014 deprecated items produce WARNING, then FAIL\n4. **Grace period** \u2014 announced deprecation \u2192 warning \u2192 hard fail\n\n### 11.4 Evolution vs. Drift (Critical Distinction)\n\n| Evolution | Drift |\n| :--- | :--- |\n| Authorized via Decision Ledger | Silent or unauthorized |\n| Documented in DWBS amendment | Not reflected in DWBS |\n| Validator-enforced | Validator-evaded |\n| Announced and reversible | Hidden and persistent |\n\n*(Source: `docs/architecture/DWBS.md` \u00a78)*\n\n---\n\n## 12. Anti-Patterns (Forbidden Evolutionary Actions)\n\n| Anti-Pattern | Why It's Wrong | Prevention Mechanism |\n| :--- | :--- | :--- |\n| \"Quick strategy without registry\" | Ungoverned strategy | Strategy Plane requires registry |\n| \"Infer regime from volatility\" | Strategies cannot infer beliefs | STR-1 invariant |\n| \"Skip factor for MVP\" | Factor bypass is architectural violation | Build order forbids |\n| \"Execute without harness\" | Unbound execution has no audit | Orchestration is prerequisite |\n| \"Activate macro later\" | Regime depends on macro | Structural Activation follows Strategy |\n| \"Hot-patch active strategy\" | Strategy versions are frozen | STR-6 invariant |\n| \"Conflate research with production\" | Governance gates exist for a reason | 5-gate promotion process |\n| \"Optimize for backtests over survival\" | Backtests lie; survival is truth | Observation period mandatory |\n| \"Auto-tune thresholds\" | Constants frozen for a reason | Phase Lock governance |\n| \"Feature without theory\" | Every feature needs \"why\" before \"how\" | Decision Ledger requirement |\n\n*(Sources: `docs/architecture/DWBS.md` \u00a77, `docs/VISION_BACKLOG.md`)*\n\n---\n\n## Legacy Source Mapping\n\n| Section | Legacy Source Document(s) |\n| :--- | :--- |\n| \u00a71 Philosophy | `DWBS.md`, `dwbs_post_freeze.md`, `VISION_BACKLOG.md` |\n| \u00a72 Three Worlds | `VISION_BACKLOG.md`, `boundaries.md` |\n| \u00a73 Environment | `data_flow.md`, `data_retention_policy.md` |\n| \u00a74 Foundation Phases | `PHASE_1_INGESTION_LOCK.md`, `PHASE_1B_HISTORICAL_INGESTION_LOCK.md`, `PHASE_2_PROCESSING_LOCK.md`, `PHASE_3_MOMENTUM_LOCK.md` |\n| \u00a75 Structural Planes | `DWBS.md`, `evolution_log.md` |\n| \u00a76 Migration Paths | `MODULE_AUTHORITY_MATRIX.md`, `RESEARCH_MODULE_GOVERNANCE.md` |\n| \u00a77 Phase Lock | `phase_lock_registry.md` |\n| \u00a78 Truth Gates | `truth_advancement_gates.md` |\n| \u00a79 Roadmap | `dwbs_post_freeze.md`, `execution_plan.md` |\n| \u00a710 Release Assumptions | `current_phase.md`, `success_criteria.md`, `execution_plan.md` |\n| \u00a711 Evolution Rules | `DWBS.md` \u00a78 |\n| \u00a712 Anti-Patterns | `DWBS.md` \u00a77, `VISION_BACKLOG.md` |\n",
  "12_orchestration/execution_phases.md": "# Execution Phases\n\n## Cross-Cutting\n- Component: `Governance`\n- Role: Constitutional policy enforcement across all phases.\n- `OPEN_QUESTION`: Governance is not assigned a single numbered phase in the source contracts; it is modeled as an always-on control plane.\n\n## Phase 0: Ingestion\n- Purpose: Acquire and normalize market/event inputs for downstream cognition.\n- Components:\n  - `Data Ingestion (US)`\n  - `Data Ingestion (India)`\n  - `Event Ingestion`\n- Gating rules:\n  - L0 pipelines must publish usable/stale-explicit data before Phase 1.\n  - Raw/event timestamps must remain source-authored (no silent temporal rewrite).\n  - Missing or stale feeds must surface explicit degraded states (no silent continuation).\n\n## Phase 1: Regime + Narrative\n- Purpose: Establish market reality and causal explanation context.\n- Components:\n  - `Regime Engine`\n  - `Narrative Engine`\n- Gating rules:\n  - `Regime Engine` must complete before `Narrative Engine`.\n  - `Narrative Engine` must not execute without `RegimeState` context.\n  - If regime input quality is insufficient, propagate `UNKNOWN`/`INSUFFICIENT_DATA` explicitly.\n\n## Phase 2: Meta + Factor\n- Purpose: Score trustworthiness, then define rewarded styles and permissions.\n- Components:\n  - `Meta-Analysis Engine`\n  - `Factor Engine`\n- Gating rules:\n  - `Meta-Analysis Engine` requires Phase 1 outputs (`RegimeState`, `NarrativeObjects`).\n  - `Factor Engine` requires trust-filtered context (`Meta-Analysis`) plus regime context.\n  - Factor permissions are fail-closed; denied/unknown permissions block downstream style activation.\n- `OPEN_QUESTION`: `Meta-Analysis Engine` lists `Scanners/Lenses (L6)` as an upstream source, which conflicts with strict L1->L9 ordering; treat this as non-blocking telemetry input until contract clarification.\n\n## Phase 3: Strategy + Discovery\n- Purpose: Activate eligible playbooks, then scan the universe in parallel lenses.\n- Components:\n  - `Strategy Selector`\n  - `Momentum Engine`\n  - `Narrative Lens`\n  - `Factor Lens`\n  - `Fundamental Lens`\n  - `Technical Lens`\n  - `Strategy Lens`\n- Gating rules:\n  - Discovery must never start before strategy selection state is available.\n  - `Strategy Lens` must consume only `ACTIVE` playbooks.\n  - Lens outputs remain candidate-only (no execution instructions).\n  - `Fundamental Lens` may legally return `INSUFFICIENT_DATA` until RC-4 ingestion wiring is complete.\n\n## Phase 4: Convergence\n- Purpose: Merge lens candidates into scored, regime-aware assessments.\n- Components:\n  - `Convergence Engine`\n- Gating rules:\n  - Requires candidate inputs from L6 lenses plus strategy/regime context.\n  - `HighConvictionIdeas` require >=3 independent lens confirmations.\n  - Empty lens pools remain valid and must emit empty outputs explicitly.\n\n## Phase 5: Constraints + Portfolio\n- Purpose: Apply hard limits, then generate portfolio diagnostics.\n- Components:\n  - `Constraint Engine`\n  - `Portfolio Intelligence`\n- Gating rules:\n  - `Constraint Engine` must run before `Portfolio Intelligence`.\n  - `Portfolio Intelligence` is always diagnostic/advisory (no execution authority).\n  - Portfolio stage is the final computational phase before dashboard publication.\n\n## Phase 6: Dashboard\n- Purpose: Read-only glass-box observation of complete system state.\n- Components:\n  - `Dashboard (Observer UI)`\n- Gating rules:\n  - Dashboard is terminal in orchestration order.\n  - Must expose stale/disconnected/insufficient-data conditions explicitly.\n  - No write path to upstream system state is permitted.\n",
  "12_orchestration/retry_policy.md": "# Retry Policy\n\nDerived from `failure_modes` in `docs/memory/05_components/*.yaml`.\n\n| Component | retryable | max_attempts | backoff | fail_behavior |\n| :--- | :--- | :--- | :--- | :--- |\n| `Governance` | yes | 3 | exponential (5s, 10s, 20s) | Enter `Lockdown Mode` (read-only, no updates) if ledger remains unavailable. |\n| `Data Ingestion (US)` | yes | 6 | exponential with jitter (5s..60s) | Reject update and keep prior valid snapshot (`T-1`) on persistent API/schema failure. |\n| `Data Ingestion (India)` | yes | 5 | exponential (1s, 2s, 4s, 8s, 16s) | Mark feed degraded and continue with explicit gap/latency telemetry. |\n| `Event Ingestion` | yes | 4 | exponential (2s, 4s, 8s, 16s) | Halt new event intake; downstream must surface stale external-context state. |\n| `Regime Engine` | yes | 2 | linear (10s, 10s) | Emit `UNKNOWN`/`INSUFFICIENT_DATA`; default to conservative posture (`Risk-Off`). |\n| `Narrative Engine` | yes | 2 | linear (15s, 15s) | Emit stale/unweighted narratives when dependencies fail; no causal invention. |\n| `Meta-Analysis Engine` | no | 0 | n/a | Fail-closed to lowest reliability score when required history is missing. |\n| `Factor Engine` | yes | 2 | exponential (5s, 10s) | Emit `INSUFFICIENT_DATA`; deny permissions by default (fail-closed). |\n| `Strategy Selector` | no | 0 | n/a | Auto-suspend on staleness/regime incompatibility; await human authorization backlog resolution. |\n| `Momentum Engine` | yes | 3 | exponential (1s, 2s, 4s) | Suppress invalid momentum outputs and expose NaN/clock-skew diagnostics. |\n| `Narrative Lens` | no | 0 | n/a | Emit empty candidate pool or low-confidence mapping diagnostics. |\n| `Factor Lens` | yes | 2 | exponential (5s, 10s) | Emit zero candidates when permissions/data quality remain invalid. |\n| `Fundamental Lens` | no | 0 | n/a | Return `INSUFFICIENT_DATA` until fundamental ingestion wiring (RC-4) is active. |\n| `Technical Lens` | no | 0 | n/a | Reset indicators on gap/insufficient lookback and suppress affected setups. |\n| `Strategy Lens` | no | 0 | n/a | Skip dependency-failed or inactive strategies; emit no candidate for skipped branches. |\n| `Convergence Engine` | no | 0 | n/a | Emit empty output/watchlist-only state; never invent candidates. |\n| `Constraint Engine` | yes | 2 | exponential (5s, 10s) | Fail-closed (`Block All`) when portfolio/risk state cannot be fetched. |\n| `Portfolio Intelligence` | no | 0 | n/a | Emit `STALE/AMBIGUOUS` diagnostics and degraded advisory output. |\n| `Dashboard (Observer UI)` | yes | 5 | exponential with jitter (1s..30s) | Show explicit `DISCONNECTED`/stale state; remain read-only. |\n\n## OPEN_QUESTION\n- `Narrative Engine` includes `Regime adapter NOT_WIRED` in failure modes. Retries cannot resolve this structural integration gap; policy above only covers transient dependency failures.\n",
  "12_orchestration/shadow_mode.md": "# Shadow Mode\n\n## Shadow Scope\n\n| Phase | Mode | Suppressed Outputs |\n| :--- | :--- | :--- |\n| Phase 0: Ingestion | live + shadow validation | None (data collection must remain complete). |\n| Phase 1: Regime + Narrative | shadow | Externalized transition/advice channels suppressed; outputs tagged `SHADOW`. |\n| Phase 2: Meta + Factor | shadow | Trust/permission state is computed but not treated as production authority outside orchestration flow. |\n| Phase 3: Strategy + Discovery | shadow | Strategy activation alerts and candidate broadcast outside internal pipeline are suppressed. |\n| Phase 4: Convergence | shadow | `HighConvictionIdeas`/`Watchlist` are not emitted as production-facing intelligence; dashboard display only with shadow tagging. |\n| Phase 5: Constraints + Portfolio | shadow | Human-operator advisory push channels suppressed; diagnostics remain visible in dashboard shadow view. |\n| Phase 6: Dashboard | shadow | All user-facing analytics labeled `SHADOW_MODE`; no recommendation-style escalation. |\n\n## Promotion Criteria\n\nPromotion requires both global shadow exit criteria and phase-specific behavioral criteria from `docs/memory/02_success/success_criteria.md`.\n\n### Global (must pass first)\n- [Phase Exit Criteria (Shadow Mode)](../02_success/success_criteria.md#4-phase-exit-criteria-shadow-mode):\n  - Stability: zero orphans and zero critical crashes for 2 weeks.\n  - Validation: consistent A/B grade signals for 30 days.\n  - Idempotency: live and replay outputs match 100% on same data period.\n  - Regime robustness across at least 2 distinct regimes.\n\n### Phase-specific gates\n- Phase 1 (`Regime Engine`, `Narrative Engine`):\n  - [Regime Layer Success](../02_success/success_criteria.md#1-regime-layer-success-l1)\n- Phase 3-4 (`Strategy Selector`, L6 lenses, `Convergence Engine`):\n  - [Opportunity Discovery Success](../02_success/success_criteria.md#2-opportunity-discovery-success-l6-l7)\n- Phase 5 (`Constraint Engine`, `Portfolio Intelligence`):\n  - [Portfolio Intelligence Success](../02_success/success_criteria.md#3-portfolio-intelligence-success-l8-l9)\n- Phase 6 (`Dashboard (Observer UI)`):\n  - [Dashboard & Observability Success](../02_success/success_criteria.md#5-dashboard--observability-success)\n\n## OPEN_QUESTION\n- Governance enforcement mode in shadow is not explicitly specified in component contracts: should policy holds be fully active or observation-only during shadow promotion runs.\n",
  "decisions/ADR-0001.md": "# ADR-0001: Market Pipeline Isolation\n\n**Status**: Accepted\n**Date**: 2026-01-01\n**Context**: Extracted from architectural invariants and existing design documents.\n\n## Decision\n\nIndia and US market data pipelines are **physically separate** with no shared state, no unified schema, and no code sharing.\n\n## Rationale\n\n- Regulatory and structural differences between markets (timezone, currency, corporate actions, exchange rules) make unified schemas error-prone\n- Physical isolation prevents cross-contamination of data and logic\n- Independent scaling and failure isolation per market\n- Each pipeline can evolve at its own pace without blocking the other\n\n## Consequences\n\n- Some code patterns are duplicated across pipelines (accepted trade-off)\n- Cross-market analysis requires explicit correlation logic in a separate layer\n- Configuration and scheduling are maintained independently per market\n\n## Evidence\n\n- `docs/us_market_engine_design.md` Section 9: \"We intentionally do not merge India and US data into a single table\"\n- `docs/epistemic/architectural_invariants.md` Item 4: \"India vs US: Market pipelines are physically distinct with no shared state\"\n- `README.md`: \"Completely Separate: No code sharing with India market infrastructure\"\n",
  "decisions/ADR-0002.md": "# ADR-0002: Separation of Signal vs Execution\n\n**Status**: Accepted\n**Date**: 2026-01-18\n**Context**: In many trading systems, the signal generation logic (alpha) is tightly coupled with execution logic (orders, sizing, broker limits). This coupling makes it hard to backtest signals purely, or to switch brokers/capital bases without rewriting the strategy.\n\n## Decision\n\nThe Signal Generation layer (e.g., Momentum Engine) is **strictly decoupled** from the Execution layer. Use of a \"Signal\" object is the ONLY interface between them.\n\n## Rationale\n\n- **Purity**: Prevents execution constraints (capital, broker availability, margin) from polluting the mathematical purity of the alpha signal.\n- **Reusability**: Allows reuse of the same signal engine for different capital bases, brokers, or simulation environments (Shadow Mode).\n- **Testability**: Signals can be verified in isolation from complex broker interactions.\n\n## Alternatives\n\n- **Monolithic Strategy**: Strategy class handles both signal math and order placement. Rejected due to tight coupling and testing difficulty.\n- **Callback-based**: Signal engine fires callbacks for execution. Rejected as it obscures the data boundary.\n\n## Consequences\n\n- **Strict Interface**: Must define a rigid `Signal` schema that captures all necessary intent without implementation details.\n- **Latency**: Introduces a small serialization/deserialization step between signal and execution (negligible for this system's frequency).\n- **Complexity**: Requires two distinct engines (Signal Engine, Execution Engine) instead of one.\n\n## Evidence\n\n- `docs/epistemic/ledger/decisions.md`: D002\n- `docs/memory/04_architecture/data_flow.md`\n",
  "decisions/ADR-0003.md": "# ADR-0003: Adoption of Regime-First Cognition\n\n**Status**: Accepted\n**Date**: 2026-01-18\n**Context**: Momentum strategies often fail in chopping (low volatility, mean-reverting) markets. Traditional systems try to run strategies constantly and rely on backtests to filter losing periods. This leads to drift and capital loss.\n\n## Decision\n\nAll strategy execution must be preceded by a **Market Regime Classification** step. Strategies are only valid and active within specific regimes (e.g., TRENDING_UP, VOLATILE_DOWN).\n\n## Rationale\n\n- **Explicit Validity**: Forces explicit recognition of when a strategy *should* work.\n- **Capital Protection**: \"Strategy Drift\" is prevented; capital is protected during unfavorable conditions.\n- **Honesty**: The system admits when it doesn't know what to do (e.g., in an UNDEFINED regime).\n\n## Alternatives\n\n- **Always-Active Strategies**: Run strategies constantly and filter trades post-hoc. Rejected due to drift and high false positive rate.\n- **Adaptive Parameter Tuning**: Let strategies adjust their own hyperparameters based on recent performance. Rejected as \"Black Box ML Decision Engines\" (Forbidden).\n\n## Consequences\n\n- **Dependency**: All strategies now depend heavily on the accuracy and stability of the Regime Engine.\n- **Complexity**: Adds a significant layer of computation (Regime Classification) before any signal can be evaluated.\n- **Stagnation**: In regime transitions or uncertainty, the system may simply sit idle (Honest Stagnation).\n\n## Evidence\n\n- `docs/epistemic/ledger/decisions.md`: D001\n- `docs/memory/04_architecture/data_flow.md`: Layer 1 (Regime) precedes Layer 5 (Strategy)\n",
  "decisions/ADR-0004.md": "# ADR-0004: Shadow-Mode Validation\n\n**Status**: Accepted\n**Date**: 2026-01-18\n**Context**: Backtests are prone to overfitting, data snooping, and failing to capture execution nuances (slippage, latency, broker limits). Relying solely on them is risky. We need a way to prove the system works in the real world without risking capital.\n\n## Decision\n\nThe system validates strategies via a **Shadow Mode** where live data is processed and signals are logged but **NOT EXECUTED**. This is distinct from backtesting and from live trading.\n\n## Rationale\n\n- **Realistic Pipeline**: Proves the *entire* pipeline (Ingestion -> Processing -> Signal -> Decision -> Logging) works in reality.\n- **Operational Drift**: Catches discrepancies between historical data assumptions and live data quirks.\n- **Traceability**: Allows for a verifiable audit trail of decisions made *without* capital at risk.\n\n## Alternatives\n\n- **Backtest Only**: Rely purely on historical performance. Rejected as insufficient for operational verification.\n- **Micro-Lot Trading**: Trade tiny amounts. Rejected as it risks capital and adds complexity (broker fees, minimums).\n- **Paper Trading (Broker)**: Use broker's paper trading API. Rejected as it introduces dependency on broker infrastructure availability, which may differ from production.\n\n## Consequences\n\n- **Overhead**: Requires maintaining a parallel \"Shadow Execution Sink\" alongside potential future real execution paths.\n- **Patience**: Strategies must run in Shadow Mode for a significant period (Observation Phase) before promotion, delaying potential profits.\n\n## Evidence\n\n- `docs/epistemic/ledger/decisions.md`: D003\n- `docs/memory/09_security/trust.md`: \u00a72.3 Module Trust (Research -> Production Path)\n",
  "decisions/ADR-0005.md": "# ADR-0005: Epistemic Freeze Protocol\n\n**Status**: Accepted\n**Date**: 2026-01-24\n**Context**: In complex systems, uncontrolled change (\"drift\") corrupts the architecture. We need a way to govern the evolution of the system's \"Brain\" (Cognitive Layers) to prevent accidental regressions and unauthorized mutations.\n\n## Decision\n\nThe default state for all Cognitive Layers (Regime, Narrative, Factor, Strategy) is **FROZEN**. Any structural work or phase transition requires an explicit **Unfreeze Decision** (D-series decision) accompanied by a **Documented Impact Declaration (DID)**.\n\n## Rationale\n\n- **Drift Prevention**: Forces all significant changes to be explicit, reviewed, and authorized.\n- **Cognitive Consistency**: Prevents \"brain transplants\" where core assumptions change without awareness.\n- **Auditability**: Creates a clear ledger of *when* and *why* the system's thinking changed.\n\n## Alternatives\n\n- **Continuous Evolution**: Code changes happen in PRs as features are ready. Rejected as insufficient governance for high-stakes logic.\n- **Versioned Components**: Each component has a semantic version. Used in conjunction, but insufficient for *system-level* coherence.\n\n## Consequences\n\n- **Friction**: Unlocking a phase or layer requires governance documentation (DID) and a Decision Ledger entry, slowing down casual development.\n- **Process**: Developers must plan changes structurally (DWBS) rather than impulsively.\n- **Clarity**: The state of the system (\"Frozen v1.1\", \"Unfrozen Phase 2\") is always unambiguous.\n\n## Evidence\n\n- `docs/epistemic/ledger/decisions.md`: D004, D005, D006, D007, D008\n- `docs/epistemic/roadmap/dwbs_post_freeze.md`: Freeze Discipline (Global Control Rule 1)\n",
  "decisions/ADR-0006.md": "# ADR-0006: Layered Plane Architecture (DWBS)\n\n**Status**: Accepted\n**Date**: 2026-01-24\n**Context**: Complex distributed systems often suffer from \"dependency hell\" and implicit coupling (Strategies inferring Regime, HFT driving Macro). We need a strict architecture that enforces **Epistemics Precede Execution**.\n\n## Decision\n\nThe system is structured into **Five Structural Planes** (Control, Orchestration, Strategy, Structural Activation, Scale & Safety), each gated by the completion of the previous plane. Cross-plane shortcuts are **FORBIDDEN**.\n\n- **Control Plane**: Establishes epistemic foundations (Beliefs, Policies).\n- **Orchestration Plane**: Enables task-driven execution (Task Graph).\n- **Strategy Plane**: Registers governed strategy intent.\n- **Structural Activation Plane**: Promotes latent layers (Macro, Factor) to operational.\n- **Scale & Safety Plane**: Enables multi-strategy, fault-tolerant operation.\n\n## Rationale\n\n- **Gatekeeping**: Ensures no execution happens without explicit Policy and Belief context.\n- **Visibility**: Exposes hidden dependencies (e.g., Strategy -> Task Graph -> Policy).\n- **Safety**: Prevents premature activation (e.g., HFT before Risk Limits).\n\n## Alternatives\n\n- **Monolithic App**: Single Python process handling everything. Rejected as unscalable/untestable.\n- **Microservices Mesh**: Loose services communicating via queues. Rejected for this phase (too complex for single-node validation).\n- **Component-Based**: Libraries calling each other ad-hoc. Rejected as it allows circular dependencies and implicit state coupling.\n\n## Consequences\n\n- **Rigidity**: Adding a feature usually requires touching multiple planes (Policy -> Task -> Strategy -> Activation).\n- **Order**: Development MUST follow the plane sequence (Control -> Orchestration -> Strategy...).\n- **Explicit Wiring**: All connections between layers must be explicitly defined in Task Graphs and Dependency Maps.\n\n## Evidence\n\n- `docs/architecture/DWBS.md`: The 5 Planes\n- `docs/epistemic/ledger/decisions.md`: D009, D010, D011, D012, D012.5, D013\n",
  "decisions/ADR-0007.md": "# ADR-0007: Immutable Decision Ledger\n\n**Status**: Accepted\n**Date**: 2026-01-22\n**Context**: Critical decisions are often lost in commit messages, chat logs, or developer memory. This leads to drift, regression, and inconsistency over time. We need a way to **permanently record intent and reasoning**.\n\n## Decision\n\nThe **Decision Ledger** (`decisions.md`) is the **Epistemic Authority** for the system. Decisions are:\n\n- **Immutable**: Once recorded, they cannot be deleted or modified (superseded only).\n- **Authoritative**: Override all lower-level docs (e.g., source comments).\n- **Append-Only**: New entries document evolution.\n\n## Rationale\n\n- **Memory**: The system \"remembers\" its own architectural evolution, even across developers/operators.\n- **Traceability**: Decisions can be linked to code changes (DID-driven).\n- **Conflict Resolution**: Resolves ambiguities in requirements or implementation.\n\n## Alternatives\n\n- **Commit Messages**: Rely on Git history. Rejected (too transient, hard to query).\n- **Separate Wiki**: Separate documentation site. Rejected (divergence from code).\n- **Tribal Knowledge**: Ask the developer. Maximum failure.\n\n## Consequences\n\n- **Overhead**: Requires disciplined writing of DIDs and Ledger entries.\n- **Formality**: Adds a step to the development workflow (Decision -> Documentation -> Code).\n- **Clarity**: Everyone knows *why* the system is this way.\n\n## Evidence\n\n- `docs/epistemic/ledger/decisions.md`: Lines 1-24\n- `docs/epistemic/impact_resolution_contract.md`: Conflict Resolution Policy\n- `README.md`: Canonical Documentation pointer\n",
  "decisions/ADR-0008.md": "# ADR-0008: Forbidden Execution (INV-NO-EXECUTION)\n\n**Status**: Accepted (Permanent)\n**Date**: 2026-01-01\n**Context**: Algorithmic trading systems can lose infinite amounts of capital in milliseconds. The primary failure mode is **unintended execution** (bugs, race conditions, erroneous signals). The system must be structurally incapable of this.\n\n## Decision\n\nThe system is architected with a **permanent, verified invariant**: `INV-NO-EXECUTION`.\n\n- **No live broker API keys** are loaded into the strategy logic.\n- **No order placement libraries** are linked into the execution harness.\n- **No capital movement** functions exist in the codebase.\n- **Shadow Mode Only**: All \"execution\" is logged to a file (Shadow Sink), never to an exchange.\n\n## Rationale\n\n- **Safety First**: Infinite downside risk outweighs infinite upside potential.\n- **Verification**: Allows testing logic on live data without risking real money.\n- **Trust Building**: Demonstrates stability and profitability *before* any capital is risked.\n\n## Alternatives\n\n- **Paper Trading API**: Use broker's paper trading. Rejected as it couples the system to broker availability and requires API keys.\n- **Small Pilot**: Trade tiny amounts. Rejected as it violates the invariant and introduces risk.\n- **Circuit Breakers Only**: Allow execution but halt on loss. Rejected as insufficient (software can fail before halt).\n\n## Consequences\n\n- **Deployment**: Getting to production requires a complex, multi-stage \"Promotion\" process (see ADR-0010).\n- **Reality Gap**: Simulation (slippage, fills) is never perfect; real execution will differ.\n- **Frustration**: Operators cannot capitalize on \"obvious\" winning signals immediately.\n\n## Evidence\n\n- `docs/memory/09_security/trust.md`: \u00a73 Safety Invariants\n- `docs/epistemic/governance/decision_plane_obligations.md`: OBL-DE-NO-EXEC\n",
  "decisions/ADR-0009.md": "# ADR-0009: Factor Context Explanation (EV-002)\n\n**Status**: Accepted\n**Date**: 2026-01-26\n**Context**: Rejections are opaque. When a strategy rejects a setup, we need to know *why* in a way that is structured and analyzable, not just \"log: condition X failed\". This requires distinct \"Permissions\" vs \"Explanations\".\n\n## Decision\n\nThe system splits **Suitability** (Factor Context) from **Permissibility** (Regime + Factor Permission).\n\n- **FactorContext**: Provides granular explanation of *why* a strategy rejects or accepts a setup (e.g., \"Momentum > 0.8\").\n- **FactorPermission**: Binary gate (True/False) driven by Regime rules.\n\n**Decision**: Strategies are **permitted to log** Factor Context fields (Suitability) for explanatory purposes. They are **FORBIDDEN** from gating execution on them (Permissibility) without explicit governance approval (EV-INV-004).\n\n## Rationale\n\n- **Explainability**: Allows debugging strategy logic without modifying the core gating rules.\n- **Safety**: Separation of concerns prevents strategies from inventing new gating rules ad-hoc.\n- **Evolution**: Enables data-driven refinement of strategy parameters over time.\n\n## Alternatives\n\n- **Unified Logic**: Strategy returns extensive reason codes. Rejected as conflating logic with reporting.\n- **Log Only**: Just log strings. Rejected as unstructured and non-analyzable.\n- **Auto-Tuning**: Let strategies adjust thresholds. Rejected as \"Black Box ML Decision Engines\".\n\n## Consequences\n\n- **Schema**: Factor Context schema needs to be maintained and versioned (v1.1 extension).\n- **Code**: Strategies must implement `log_context()` separate from `evaluate_signal()`.\n- **Latency**: Small overhead for structured logging.\n\n## Evidence\n\n- `docs/epistemic/ledger/decisions.md`: EV-002 (Factor Context Layer Design), EV-003, EV-004\n- `docs/impact/2026-01-27__evolution__factor_context_v1.2.md`\n",
  "decisions/ADR-0010.md": "# ADR-0010: Progressive Trust Model\n\n**Status**: Accepted\n**Date**: 2026-01-26\n**Context**: Releasing strategies or code to production is risky. A binary \"Production / Research\" flag is insufficient for managing the **lifecycle of trust**. We need a rigorous, reversible process.\n\n## Decision\n\nThe system uses a **Progressive Trust** model. Strategies and Research Modules must earn promotion through a **5-Gate Process**:\n\n1.  **Phase Threshold**: Module reaches defined Activation Phase (Roadmap).\n2.  **Observation**: 30 error-free trading days in Research/Shadow state.\n3.  **Paper Trading**: 100 consecutive trades with slippage < 5%.\n4.  **Human Approval**: Explicit architectural sign-off (D0XX).\n5.  **Test Coverage**: > 90% unit test compliance.\n\n## Rationale\n\n- **Safety**: Prevents premature deployment of unstable or unprofitable strategies.\n- **Traceability**: Each promotion step is a distinct, auditable event (Promotion PR).\n- **Meritocracy**: Strategies are judged on empirical performance, not political pressure.\n\n## Alternatives\n\n- **Developer Prerogative**: Dev \"flips the switch\". Rejected as ungoverned.\n- **Backtest Validation**: Promote if backtest > X. Rejected (overfitting risk).\n- **Continuous Deployment**: Auto-promote if tests pass. Rejected (requires human judgment on strategy quality).\n\n## Consequences\n\n- **Latency**: Strategy lifecycle is slow (months).\n- **Process**: Requires discipline (Act -> Wait -> Observe -> Approve).\n- **Reversibility**: Automated \"demotion\" is explicit (Kill-Switch).\n\n## Evidence\n\n- `docs/memory/09_security/trust.md`: \u00a72.3 Module Trust (Research -> Production Path)\n- `docs/governance/RESEARCH_MODULE_GOVERNANCE.md`: Gate Definitions\n",
  "decisions/ADR-0011.md": "# ADR-0011: Multi-Human Governance\n\n**Status**: Accepted\n**Date**: 2026-01-24\n**Context**: As the system grows, multiple operators/contributors (Developers, PMs, Traders) will interact with it. We need a way to resolve conflicting requirements, prevent \"truth forks\", and attribute actions accurately.\n\n## Decision\n\nThe system implements a **Multi-Human Governance** model:\n\n- **Conflict Resolution**: \"Freshness Rule\" (most recent `main` state wins) + \"Maintainer Veto\" (original author holds foundational veto).\n- **Attribution**: All significant actions (governance override, hold/release, kill-switch, parameter change) are logged with the verified **Operator ID**.\n- **Quorum**: Overruling a veto requires a documented Quorum or Poject Owner sign-off (D0XX).\n\n## Rationale\n\n- **Clarity**: Prevents circular arguments and ambiguous status.\n- **Accountability**: Everyone knows exactly *who* modified the system state and *when*.\n- **Consistency**: \"Truth Forks\" (divergent beliefs about what the system is doing) are prevented by enforcing single-source-of-truth.\n\n## Alternatives\n\n- **Consensus Only**: All must agree. Rejected as deadlock-prone.\n- ** benevolent Dictator**: One person decides everything. Rejected as unscalable.\n- **Timestamp Priority**: Last write wins. Rejected (risks incoherent state).\n\n## Consequences\n\n- **Formalism**: Requires user/role definitions and authentication (simple CLI/Key based for now).\n- **Process**: Conflicts escalate to formal Decision Ledger entries.\n- **Log Volume**: Audit logs grow linearly with operator activity.\n\n## Evidence\n\n- `docs/epistemic/ledger/decisions.md`: D006 (Authorize Phase 4)\n- `docs/epistemic/impact_resolution_contract.md`: Conflict Resolution Policy\n",
  "decisions/ADR-0012.md": "# ADR-0012: Zero-Trust Data Ingestion\n\n**Status**: Accepted\n**Date**: 2026-01-22\n**Context**: External data sources (Alpha Vantage, Angel One) are **UNTRUSTED** by default. They can send bad data (NaN, Infinity, Gaps, incorrect timestamps) that corrupts downstream logic (Regime, Strategies). We need a gatekeeper.\n\n## Decision\n\nThe system implements a **Zero-Trust Data Ingestion** pipeline. All inbound data is processed through **explicit validation gates**:\n\n- **Schema Check**: All fields present and typed correctly.\n- **Range Check**: `High >= Low`, `Volume >= 0`, `Price within acceptable bounds`.\n- **Continuity Check**: No unexpected gaps (weekend/holiday logic).\n- **Drift Check**: Price change < Circuit Breaker threshold.\n\nOnly **Validated** data is promoted to the **Canonical Store** (`processed/`). Raw data (`raw/`) is kept purely for audit/debug but NEVER used directly for decisions.\n\n## Rationale\n\n- **Resilience**: Prevents \"Garbage In, Garbage Out\". Strategies operate on trusted, clean data.\n- **Fail-Fast**: Bad data triggers immediate rejection/alert, not silent corruption.\n- **Auditability**: We know exactly *what* failed (e.g., \"Angel One sent NaN for Reliance Open\").\n\n## Alternatives\n\n- **Trust but Verify**: Load raw data, check later. Rejected (risks downstream corruption).\n- **Manual Clean**: Let humans fix data. Rejected (unscalable).\n- **Assume Good**: Trust the API. Rejected (APIs fail).\n\n## Consequences\n\n- **Latency**: Validation adds a step to the pipeline.\n- **Complexity**: Requires maintaining strict schemas (JSONL -> Parquet) and validation logic.\n- **Staleness**: If validation fails, the system may run on stale data (\"Honest Stagnation\") rather than consume bad data.\n\n## Evidence\n\n- `docs/memory/09_security/trust.md`: \u00a72.2 Data Trust\n- `docs/memory/04_architecture/data_flow.md`: Ingestion Pipeline (L0)\n- `docs/verification/historical_ingestion_verification.md`: Validation Rules\n",
  "decisions/ADR-0013.md": "# ADR-0013: Local-First Filesystem Storage\n\n**Status**: Accepted\n**Date**: 2026-01-01\n**Context**: The system needs a persistence layer for time-series data, cognitive state, and configurations. We must choose between a database server (PostgreSQL/TimescaleDB) or a filesystem-based approach.\n\n## Decision\n\nThe system uses a **Local-First Filesystem Storage** model.\n\n- **Data**: Stored in flat files (Parquet for time-series, JSONL for logs/raw, JSON/Markdown for state).\n- **No RDBMS**: No dependencies on external database processes (Postgres, MySQL, Mongo).\n- **Indexing**: Directory structure (`data/market/freq/symbol.parquet`) acts as the primary index.\n\n## Rationale\n\n- **Simplicity**: \"Boring is Beautiful\". Eliminates the operational complexity of managing DB users, connections, migrations, and backups.\n- **Portability**: The entire system state is a folder. easy to backup, sync, or move.\n- **Auditability**: Files are human-inspectable (Parquet tools, Text editor).\n- **Performance**: Direct file I/O for column-oriented Access (Parquet) is faster than SQL overhead for our specific read patterns (full history load or date-range slice).\n\n## Alternatives\n\n- **TimescaleDB**: Good for time-series but adds a heavy Docker dependency. Rejected for current phase.\n- **SQLite**: Single file DB. Rejected for high-concurrency write limitations (though strictly single-writer helps). Parquet is better for analytics.\n- **Cloud Storage (S3)**: Rejected to maintain \"Local-First\" sovereignty and zero latency.\n\n## Consequences\n\n- **Concurrency**: Writes must be carefully managed (Single Writer Principle) to avoid file corruption.\n- **Querying**: No SQL. Complex queries require loading data into Pandas/Polars.\n- **Integrity**: No Foreign Key constraints enforced by the storage engine; application logic must enforce integrity.\n\n## Evidence\n\n- `docs/memory/11_deployment/evolution.md`: \u00a73.2 Environment Assumptions \"No database server\"\n- `docs/memory/04_architecture/data_flow.md`\n",
  "decisions/ADR-0014.md": "# ADR-0014: Single-Operator Infrastructure\n\n**Status**: Accepted\n**Date**: 2026-01-01\n**Context**: Most trading systems are designed for teams (Devs, Quants, Operators). However, this specific system has finite capacity and a \"Research-Lead Discretionary\" mandate for a **single principal**.\n\n## Decision\n\nThe infrastructure is designed assuming a **Single Human Operator** (with potential future multi-operator governance logic, but single-runtime implementation).\n\n- **Concurrency**: Operations are largely sequential or simple background tasks.\n- **Authentication**: Local-access based (OS login, local `.env`). No complex OAuth/SSO.\n- **State**: Centralized on one machine (the operator's workstation/server).\n\n## Rationale\n\n- **Focus**: Eliminates the overhead of distributed consensus, multi-user locking, and remote access security.\n- **Speed**: \"Local-first\" interactions are instant.\n- **Sovereignty**: The operator *owns* the system physically.\n\n## Alternatives\n\n- **SaaS Model**: Web-based multi-tenant. Rejected (requires cloud trust).\n- **Client-Server**: Remote GUI connecting to backend. Rejected (adds network latency/failure modes).\n- **Cluster**: Kubernetes cluster. Rejected (massive overkill).\n\n## Consequences\n\n- **Scalability**: Scaling to a team requires re-architecting the access layer (API gateway, auth).\n- **Redundancy**: Single point of failure (the machine). Backups are critical.\n- **Bus Factor**: High reliance on one individual (mitigated by \"Boring is Beautiful\" docs).\n\n## Evidence\n\n- `docs/memory/11_deployment/evolution.md`: \u00a73.2 \"Single-operator\"\n- `docs/memory/01_scope/boundaries.md`: \"Authority: Human always decides.\"\n",
  "decisions/ADR-0015.md": "# ADR-0015: Bounded Automation Contract\n\n**Status**: Accepted\n**Date**: 2026-01-24\n**Context**: Automation is dangerous. Unchecked feedback loops can destroy capital or state in seconds. We need a way to introduce automation safey.\n\n## Decision\n\nThe system operates under a **Bounded Automation Contract**.\n\n- **Phase 6 Rule**: Automation is **Passive Only** (Monitor/Suggest).\n- **Prohibitions**: Monitors CANNOT write to business data, mute alerts, delete files, or call external APIs.\n- **Graduation**: Moving from Passive to Active requires strictly defined \"Graduation Criteria\" (Sustained accuracy, specific Governance Authorization).\n\n## Rationale\n\n- **Safety**: \"Suggest, Don't Act\" prevents runaway automation failures.\n- **Trust**: We must observe the \"ghost in the machine\" before giving it keys.\n- **Reversibility**: Passive monitors can be ignored; active automators must be fought.\n\n## Alternatives\n\n- **Full Automation**: Let the bot fix things. Rejected (high risk).\n- **No Automation**: Humans do everything. Rejected (unscalable).\n- **Sandboxed Execution**: Virtual machines. Rejected (too complex for now).\n\n## Consequences\n\n- ** toil**: Humans must still perform the actions suggested by monitors.\n- **Latency**: Response to issues is bounded by human reaction time.\n- **Discipline**: Requires humans to actually look at the logs/suggestions.\n\n## Evidence\n\n- `docs/epistemic/ledger/decisions.md`: D008\n- `docs/epistemic/bounded_automation_contract.md`\n",
  "decisions/ADR-0016.md": "# ADR-0016: Explicit Truth Epoch (Temporal Sovereignty)\n\n**Status**: Accepted\n**Date**: 2026-01-20\n**Context**: Complex systems often race against the clock or suffer from \"lookahead bias\" when backtesting because they rely on `system_clock`. We need time to be a controllable variable.\n\n## Decision\n\nThe system operates on an **Explicit Truth Epoch (TE)** model.\n\n- **Time does not flow**: System time (`datetime.now()`) is never used for business logic.\n- **Epochs are discrete**: Time advances only when a Governance Gate (Ingestion, Intelligence) is passed.\n- **State is immutable**: Past epochs are frozen.\n\n## Rationale\n\n- **Idempotency**: We can re-run \"yesterday\" exactly as it happened, even if today is next week.\n- **Safety**: Prevents lookahead bias (accessing future data).\n- **Control**: Allows pausing the universe to debug a specific state.\n\n## Alternatives\n\n- **System Clock**: Use `datetime.now()`. Rejected (non-deterministic).\n- **Event Driven**: React to ticks. Rejected (too complex for current phase, creates race conditions).\n\n## Consequences\n\n- **Complexity**: Every component must accept `epoch_id` or `as_of_date` as an argument.\n- **Friction**: Ops must explicitly \"advance time\" (run the Daily Cycle).\n- **Storage**: We store state per-epoch (deduplicated where possible).\n\n## Evidence\n\n- `docs/governance/truth_advancement_gates.md`\n- `docs/epistemic/truth_epoch_scoping.md`\n",
  "decisions/README.md": "# Architecture Decision Records (ADRs)\n\n> [!IMPORTANT]\n> **Authoritative Source**: `docs/memory/03_domain/domain_model.md` is CANONICAL.\n> This directory contains the immutable record of architectural decisions.\n\n## What is an ADR?\n\nAn **Architecture Decision Record (ADR)** is a document that captures an important architectural decision made along with its context and consequences.\n\nWe use ADRs to:\n*   **Track Decision History**: Understand why the system is built the way it is.\n*   **Enforce Immutability**: Once accepted, a decision is law until explicitly superseded.\n*   **Prevent Drift**: By documenting the \"Why\", we prevent accidental regression.\n\n**Format**:\n*   **Context**: The problem or tension prompting the decision.\n*   **Decision**: The specific choice made.\n*   **Rationale**: Why this choice was made over alternatives.\n*   **Consequences**: The trade-offs and impacts (positive and negative).\n\n## Index\n\n| ID | Title | Status | Date |\n| :--- | :--- | :--- | :--- |\n| **ADR-0001** | [Market Pipeline Isolation](ADR-0001.md) | Accepted | 2026-01-01 |\n| **ADR-0002** | [Separation of Signal vs Execution](ADR-0002.md) | Accepted | 2026-01-18 |\n| **ADR-0003** | [Adoption of Regime-First Cognition](ADR-0003.md) | Accepted | 2026-01-18 |\n| **ADR-0004** | [Shadow-Mode Validation](ADR-0004.md) | Accepted | 2026-01-18 |\n| **ADR-0005** | [Epistemic Freeze Protocol](ADR-0005.md) | Accepted | 2026-01-24 |\n| **ADR-0006** | [Layered Plane Architecture](ADR-0006.md) | Accepted | 2026-01-24 |\n| **ADR-0007** | [Immutable Decision Ledger](ADR-0007.md) | Accepted | 2026-01-22 |\n| **ADR-0008** | [Forbidden Execution](ADR-0008.md) | Accepted | 2026-01-01 |\n| **ADR-0009** | [Factor Context Explanation](ADR-0009.md) | Accepted | 2026-01-26 |\n| **ADR-0010** | [Progressive Trust Model](ADR-0010.md) | Accepted | 2026-01-26 |\n| **ADR-0011** | [Multi-Human Governance](ADR-0011.md) | Accepted | 2026-01-24 |\n| **ADR-0012** | [Zero-Trust Data Ingestion](ADR-0012.md) | Accepted | 2026-01-22 |\n| **ADR-0013** | [Local-First Filesystem Storage](ADR-0013.md) | Accepted | 2026-01-01 |\n| **ADR-0014** | [Single-Operator Infrastructure](ADR-0014.md) | Accepted | 2026-01-01 |\n| **ADR-0015** | [Bounded Automation Contract](ADR-0015.md) | Accepted | 2026-01-24 |\n| **ADR-0016** | [Explicit Truth Epoch](ADR-0016.md) | Accepted | 2026-01-20 |\n\n## Status Codes\n\n- **Proposed**: Under discussion.\n- **Accepted**: Ratified and implemented.\n- **Deprecated**: Superseded by a later decision.\n- **Rejected**: Discussed but not adopted.\n",
  "_appendix/data_flow_code.md": "# Data Flow Diagrams (Original ASCII)\n\n## End-to-End Pipeline\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  US Market   \u2502    \u2502 India Market \u2502\n\u2502  (AV REST)   \u2502    \u2502  (WS + REST) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502     L0: INGEST    \u2502\n       \u25bc                   \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       CANONICAL STORE           \u2502\n\u2502  Parquet \u00b7 Symbol/Date-Part.    \u2502\n\u2502  Invariant: Immutable Raw       \u2502\n\u2502  Invariant: Event-Time Only     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n               \u25bc  L1: REGIME\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       REGIME ENGINE             \u2502\n\u2502  Trend \u00b7 Volatility \u00b7 Liquidity \u2502\n\u2502  \u00b7 Event Pressure               \u2502\n\u2502  Output: RegimeState            \u2502\n\u2502    {behavior, bias, confidence, \u2502\n\u2502     is_stable}                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502           \u2502\n         \u25bc           \u25bc  L2: NARRATIVE\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       NARRATIVE ENGINE          \u2502\n\u2502  Events \u2192 Clustering \u2192 Stories  \u2502\n\u2502  Lifecycle: Born \u2192 Reinforced   \u2502\n\u2502    \u2192 Mutated \u2192 Resolved         \u2502\n\u2502  Output: NarrativeObject        \u2502\n\u2502    {headline, confidence,       \u2502\n\u2502     lifecycle, related_assets}  \u2502\n\u2502                                 \u2502\n\u2502  MUST receive RegimeState (L1)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc  L3: META-ANALYSIS\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       META ENGINE               \u2502\n\u2502  Assesses trust of signals      \u2502\n\u2502  and narratives                 \u2502\n\u2502  Output: TrustScore             \u2502\n\u2502    {validity, confidence_mod,   \u2502\n\u2502     staleness, conflicts}       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc  L4: FACTOR ANALYSIS\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       FACTOR ENGINE             \u2502\n\u2502  What is being rewarded?        \u2502\n\u2502  Output: FactorState            \u2502\n\u2502    {momentum, value, quality,   \u2502\n\u2502     size \u2014 strength/direction}  \u2502\n\u2502  Issues: FactorPermission       \u2502\n\u2502    {permitted, max_exposure}    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc  L5: STRATEGY SELECTION\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       STRATEGY SELECTOR         \u2502\n\u2502  Gate: Regime + Factor compat.  \u2502\n\u2502  Lifecycle: DRAFT \u2192 ACTIVE \u2192   \u2502\n\u2502    SUSPENDED \u2192 RETIRED          \u2502\n\u2502  Output: ActiveStrategySet      \u2502\n\u2502  Invariant: Human authorization \u2502\n\u2502    required for all transitions \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc  L6: OPPORTUNITY DISCOVERY\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       PARALLEL LENS ENGINE      \u2502\n\u2502                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502Narrative\u2502  \u2502 Factor \u2502        \u2502\n\u2502  \u2502  Lens   \u2502  \u2502  Lens  \u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2502       \u2502          \u2502              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502   CANDIDATE POOL    \u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2502       \u2502          \u2502              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502Fundamt.\u2502  \u2502Techncl.\u2502        \u2502\n\u2502  \u2502  Lens  \u2502  \u2502  Lens  \u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2502       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u2502\n\u2502       \u2502 Strategy \u2502              \u2502\n\u2502       \u2502   Lens   \u2502              \u2502\n\u2502       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2502\n\u2502                                 \u2502\n\u2502  Each Lens Output:              \u2502\n\u2502    OpportunityCandidate         \u2502\n\u2502      {symbol, source_lens,     \u2502\n\u2502       preliminary_score,        \u2502\n\u2502       horizon, rationale}       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc  L7: CONVERGENCE\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       CONVERGENCE ENGINE        \u2502\n\u2502                                 \u2502\n\u2502  Step 1: Collect all candidates \u2502\n\u2502  Step 2: Apply regime-dependent \u2502\n\u2502          weighting per lens     \u2502\n\u2502  Step 3: Calculate UnifiedScore \u2502\n\u2502  Step 4: Classify:              \u2502\n\u2502    \u22653 lenses \u2192 HighConviction   \u2502\n\u2502    1-2 lenses \u2192 Watchlist       \u2502\n\u2502    0 lenses \u2192 Discard           \u2502\n\u2502                                 \u2502\n\u2502  Output: RankedCandidatePool    \u2502\n\u2502    {symbol, unified_score,      \u2502\n\u2502     contributing_lenses,        \u2502\n\u2502     regime_alignment}           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc  L8: CONSTRAINTS\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       CONSTRAINT ENGINE         \u2502\n\u2502                                 \u2502\n\u2502  Check: max_position_size       \u2502\n\u2502  Check: exposure_caps           \u2502\n\u2502  Check: drawdown_limits         \u2502\n\u2502  Check: risk_budget             \u2502\n\u2502                                 \u2502\n\u2502  Pass \u2192 Forward to L9           \u2502\n\u2502  Fail \u2192 Block with reason       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc  L9: PORTFOLIO INTELLIGENCE\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       PORTFOLIO DIAG. ENGINE    \u2502\n\u2502                                 \u2502\n\u2502  Scan: RegimeConflict           \u2502\n\u2502  Scan: NarrativeDecay           \u2502\n\u2502  Scan: FactorMismatch           \u2502\n\u2502  Scan: HorizonMismatch          \u2502\n\u2502  Scan: ConcentrationRisk        \u2502\n\u2502                                 \u2502\n\u2502  Output: FlaggedWatchlist       \u2502\n\u2502    {symbol, total_score,        \u2502\n\u2502     flags[], severity,          \u2502\n\u2502     sizing_suggestion}          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc  OUTPUT\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       DASHBOARD / REPORTS       \u2502\n\u2502                                 \u2502\n\u2502  Watchlist (JSON)               \u2502\n\u2502  Daily Brief (\"The Pulse\")      \u2502\n\u2502  Weekly Synthesis (\"The Context\")\u2502\n\u2502  Thematic Deep Dive (Ad-hoc)    \u2502\n\u2502                                 \u2502\n\u2502  \u2192 HUMAN OPERATOR DECIDES       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n\n## US Pipeline\n\n```\n[Alpha Vantage API]\n       \u2502\n       \u25bc\n[Symbol Master] \u2500\u2500\u2500 Weekly refresh from LISTING_STATUS endpoint\n       \u2502               Filter: assetType=Stock, exchange\u2208[NYSE,NASDAQ]\n       \u25bc\n[Raw Ingestor] \u2500\u2500\u2500\u2500 REST calls: TIME_SERIES_DAILY_ADJUSTED\n       \u2502               Rate limiter: Token bucket, MAX_CALLS_PER_MINUTE\n       \u2502               Output: data/raw/us/{date}/{symbol}.json\n       \u25bc\n[Normalizer] \u2500\u2500\u2500\u2500\u2500\u2500\u2500 Parse JSON, UTC timestamps, type conversions\n       \u2502               Handle: Adjusted Close, Split Coefficients\n       \u2502               Output: data/staging/us/{freq}/{symbol}.parquet\n       \u25bc\n[Curator] \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Quality checks, dedup, gap detection\n                       Output: data/analytics/us/prices/{freq}/\n```\n\n## India Pipeline\n\n```\n[SmartAPI WebSocket v2]\n       \u2502  ws://smartapisocket.angelone.in/smart-stream\n       \u2502  LTP Mode, up to 1000 tokens\n       \u25bc\n[IndiaWebSocketClient] \u2500\u2500 Connection mgmt, auto-reconnect,\n       \u2502                    binary tick parsing, token-to-symbol map\n       \u25bc\n[CandleAggregator] \u2500\u2500\u2500\u2500\u2500\u2500 SymbolState per symbol,\n       \u2502                    tick \u2192 1m candle aggregation,\n       \u2502                    minute-boundary finalization\n       \u2502                    Output: data/processed/candles/intraday/\n       \u25bc\n[MomentumEngine] \u2500\u2500\u2500\u2500\u2500\u2500\u2500 VWAP, HOD proximity, RVOL analysis\n       \u2502                    Output: Signals\n       \u25bc\n[ObservationLogger] \u2500\u2500\u2500\u2500\u2500 Signal logging, EOD review\n```\n\n## Process Flow (Daily Cycle)\n\n```\n1. WAKE UP\n   \u2502  Scheduled Task triggers pipeline\n   \u2502\n2. INGEST (L0)\n   \u2502  US: Fetch latest Daily Close from AlphaVantage\n   \u2502  India: WebSocket auto-connects at market open\n   \u2502  Both: Validate, normalize, store to Canonical\n   \u2502\n3. CONTEXTUALIZE (L1-L3)\n   \u2502  L1: Update RegimeState (Trend, Vol, Liquidity, Events)\n   \u2502  L2: Update NarrativeState (new events \u2192 cluster/reinforce)\n   \u2502  L3: Update Trust Scores (signal validity, staleness)\n   \u2502\n4. ANALYZE (L4-L5)\n   \u2502  L4: Update FactorState (what's being rewarded)\n   \u2502  L5: Select Active Strategies (regime + factor gated)\n   \u2502\n5. DISCOVER (L6) \u2014 PARALLEL\n   \u2502  Run all 5 Lenses concurrently\n   \u2502  Collect OpportunityCandidates\n   \u2502\n6. CONVERGE (L7)\n   \u2502  Merge all candidates\n   \u2502  Apply regime-dependent lens weights\n   \u2502  Calculate UnifiedScore per symbol\n   \u2502  Classify: HighConviction / Watchlist / Discard\n   \u2502\n7. CONSTRAIN (L8)\n   \u2502  Apply risk limits (position size, exposure, drawdown)\n   \u2502  Block non-compliant candidates\n   \u2502\n8. DIAGNOSE (L9)\n   \u2502  Run portfolio diagnostics\n   \u2502  Flag: RegimeConflict, NarrativeDecay, etc.\n   \u2502  Generate severity flags (Red \u2192 Green)\n   \u2502\n9. PUBLISH\n   \u2502  Generate Watchlist JSON\n   \u2502  Generate Daily Brief / Reports\n   \u2502  Update Dashboard\n   \u2502\n10. HUMAN REVIEWS & DECIDES\n```\n",
  "_appendix/evolution_code.md": "# Evolution Phase Build Order (Original)\n\n```\nPhase 1: Control Plane\n  \u2192 Belief Layer \u2192 Factor Policy \u2192 Strategy Policy \u2192 Validator Gate\n  GATE: Control Plane Complete\n\nPhase 2: Orchestration Plane\n  \u2192 Task Abstraction \u2192 Task Graph \u2192 Harness Binding\n  GATE: Orchestration Plane Complete\n\nPhase 3: Strategy Plane\n  \u2192 Strategy Mapping \u2192 Registry \u2192 Lifecycle\n  GATE: Strategy Plane Complete\n\nPhase 4: Structural Activation Plane\n  \u2192 Macro Activation \u2192 Factor Activation\n  GATE: Structural Activation Complete\n\nPhase 5: Scale & Safety Plane\n  \u2192 Multi-Strategy Coexistence \u2192 Failure Modes \u2192 Permission Revocation\n  GATE: Scale & Safety Complete \u2192 STRUCTURALLY PRODUCTION READY\n\nPhase 6: Decision Plane (HITL + Shadow)\n  \u2192 Decision Spec \u2192 HITL Gate \u2192 Shadow Sink \u2192 Decision Audit\n  GATE: Decision Plane Complete \u2192 CHOICE FORMATION AUTHORIZED\n\nPhase 7: Evolution Phase (Learning & Debugging)\n  \u2192 Bulk Registration \u2192 Replay \u2192 Paper P&L \u2192 Diagnostics \u2192 Rejection Analysis\n  GATE: Evolution Phase Complete \u2192 STRATEGY EVALUATION AUTHORIZED\n```\n",
  "_appendix/macro_code.md": "# System Architecture (Macro) - Original Diagram\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              HUMAN OPERATOR             \u2502\n\u2502        (Final Authority, Always)        \u2502\n22: \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502  Diagnostics, Watchlists\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502            DASHBOARD (UI)               \u2502\n\u2502       (Glass-Box Observation)           \u2502\n\u2502  Regime \u2502 Narratives \u2502 Signals \u2502 Flags  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     PORTFOLIO INTELLIGENCE (L9)         \u2502\n\u2502  PortfolioDiagnostic:                   \u2502\n\u2502    RegimeConflict, NarrativeDecay,      \u2502\n\u2502    FactorMismatch, HorizonMismatch,     \u2502\n\u2502    ConcentrationRisk                    \u2502\n\u2502  Output: Red/Orange/Yellow/Green Flags  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     EXECUTION CONSTRAINTS (L8)          \u2502\n\u2502  ExecutionEnvelope:                     \u2502\n\u2502    max_position_size, exposure_caps,    \u2502\n\u2502    drawdown_limits, risk_budget         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     CONVERGENCE ENGINE (L7)             \u2502\u25c4\u2500\u2500\u2500 Regime Gate (L1)\n\u2502  CandidateAssessment:                   \u2502\n\u2502    narrative_score, factor_score,       \u2502\n\u2502    fundamental_score, technical_score,  \u2502\n\u2502    regime_alignment, horizon            \u2502\n\u2502  Output: HighConvictionIdeas, Watchlist \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     OPPORTUNITY DISCOVERY (L6)          \u2502\n\u2502     (Parallel Lenses Engine)            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502Narr. \u2502Factor \u2502Fund.  \u2502Tech. \u2502Strat\u2502  \u2502\n\u2502  \u2502  Lens  \u2502Lens   \u2502Lens   \u2502Lens  \u2502Lens \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502  Output: OpportunityCandidates          \u2502\n\u2502    {symbol, source_lenses, horizon,     \u2502\n\u2502     preliminary_scores}                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     COGNITIVE CORE (L1-L5)              \u2502\n\u2502                                         \u2502\n\u2502  L5: Strategy Selector \u2500 Playbooks      \u2502\n\u2502  L4: Factor Engine \u2500\u2500\u2500 Reward Map       \u2502\n\u2502  L3: Meta Engine \u2500\u2500\u2500\u2500\u2500\u2500 Trust Filter    \u2502\n\u2502  L2: Narrative Engine \u2500 Context         \u2502\n\u2502  L1: Regime Engine \u2500\u2500\u2500\u2500 Gatekeeper      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     INGESTION LAYER (L0)                \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  US Pipeline \u2502  India Pipeline     \u2502 \u2502\n\u2502  \u2502  AlphaVantage\u2502  SmartAPI WebSocket \u2502 \u2502\n\u2502  \u2502  REST Batch  \u2502  + REST Historical  \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502  Output: Canonical Store (Parquet)      \u2502\n\u2502  Invariant: Pipelines are SEPARATE      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n"
}